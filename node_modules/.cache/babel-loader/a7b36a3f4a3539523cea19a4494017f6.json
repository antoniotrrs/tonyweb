{"ast":null,"code":"import _toConsumableArray from \"/Users/antoniotorres/Documents/tony/tonyweb/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _asyncToGenerator from \"/Users/antoniotorres/Documents/tony/tonyweb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n// Utilities\nimport { effectScope, onScopeDispose, watchEffect } from 'vue';\nimport { requestNewFrame } from \"./requestNewFrame.js\";\nimport { convertToUnit, getScrollParents, hasScrollbar, IN_BROWSER, propsFactory } from \"../../util/index.js\"; // Types\n\nvar scrollStrategies = {\n  none: null,\n  close: closeScrollStrategy,\n  block: blockScrollStrategy,\n  reposition: repositionScrollStrategy\n};\nexport var makeScrollStrategyProps = propsFactory({\n  scrollStrategy: {\n    type: [String, Function],\n    default: 'block',\n    validator: function validator(val) {\n      return typeof val === 'function' || val in scrollStrategies;\n    }\n  }\n}, 'VOverlay-scroll-strategies');\nexport function useScrollStrategies(props, data) {\n  if (!IN_BROWSER) return;\n  var scope;\n  watchEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n    var _scope;\n\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            (_scope = scope) === null || _scope === void 0 ? void 0 : _scope.stop();\n\n            if (data.isActive.value && props.scrollStrategy) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 3:\n            scope = effectScope();\n            _context.next = 6;\n            return new Promise(function (resolve) {\n              return setTimeout(resolve);\n            });\n\n          case 6:\n            scope.active && scope.run(function () {\n              if (typeof props.scrollStrategy === 'function') {\n                props.scrollStrategy(data, props, scope);\n              } else {\n                var _scrollStrategies$pro;\n\n                (_scrollStrategies$pro = scrollStrategies[props.scrollStrategy]) === null || _scrollStrategies$pro === void 0 ? void 0 : _scrollStrategies$pro.call(scrollStrategies, data, props, scope);\n              }\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })));\n  onScopeDispose(function () {\n    var _scope2;\n\n    (_scope2 = scope) === null || _scope2 === void 0 ? void 0 : _scope2.stop();\n  });\n}\n\nfunction closeScrollStrategy(data) {\n  var _data$targetEl$value;\n\n  function onScroll(e) {\n    data.isActive.value = false;\n  }\n\n  bindScroll((_data$targetEl$value = data.targetEl.value) !== null && _data$targetEl$value !== void 0 ? _data$targetEl$value : data.contentEl.value, onScroll);\n}\n\nfunction blockScrollStrategy(data, props) {\n  var _data$root$value;\n\n  var offsetParent = (_data$root$value = data.root.value) === null || _data$root$value === void 0 ? void 0 : _data$root$value.offsetParent;\n\n  var scrollElements = _toConsumableArray(new Set([].concat(_toConsumableArray(getScrollParents(data.targetEl.value, props.contained ? offsetParent : undefined)), _toConsumableArray(getScrollParents(data.contentEl.value, props.contained ? offsetParent : undefined))))).filter(function (el) {\n    return !el.classList.contains('v-overlay-scroll-blocked');\n  });\n\n  var scrollbarWidth = window.innerWidth - document.documentElement.offsetWidth;\n\n  var scrollableParent = function (el) {\n    return hasScrollbar(el) && el;\n  }(offsetParent || document.documentElement);\n\n  if (scrollableParent) {\n    data.root.value.classList.add('v-overlay--scroll-blocked');\n  }\n\n  scrollElements.forEach(function (el, i) {\n    el.style.setProperty('--v-body-scroll-x', convertToUnit(-el.scrollLeft));\n    el.style.setProperty('--v-body-scroll-y', convertToUnit(-el.scrollTop));\n\n    if (el !== document.documentElement) {\n      el.style.setProperty('--v-scrollbar-offset', convertToUnit(scrollbarWidth));\n    }\n\n    el.classList.add('v-overlay-scroll-blocked');\n  });\n  onScopeDispose(function () {\n    scrollElements.forEach(function (el, i) {\n      var x = parseFloat(el.style.getPropertyValue('--v-body-scroll-x'));\n      var y = parseFloat(el.style.getPropertyValue('--v-body-scroll-y'));\n      var scrollBehavior = el.style.scrollBehavior;\n      el.style.scrollBehavior = 'auto';\n      el.style.removeProperty('--v-body-scroll-x');\n      el.style.removeProperty('--v-body-scroll-y');\n      el.style.removeProperty('--v-scrollbar-offset');\n      el.classList.remove('v-overlay-scroll-blocked');\n      el.scrollLeft = -x;\n      el.scrollTop = -y;\n      el.style.scrollBehavior = scrollBehavior;\n    });\n\n    if (scrollableParent) {\n      data.root.value.classList.remove('v-overlay--scroll-blocked');\n    }\n  });\n}\n\nfunction repositionScrollStrategy(data, props, scope) {\n  var slow = false;\n  var raf = -1;\n  var ric = -1;\n\n  function update(e) {\n    requestNewFrame(function () {\n      var _data$updateLocation$, _data$updateLocation;\n\n      var start = performance.now();\n      (_data$updateLocation$ = (_data$updateLocation = data.updateLocation).value) === null || _data$updateLocation$ === void 0 ? void 0 : _data$updateLocation$.call(_data$updateLocation, e);\n      var time = performance.now() - start;\n      slow = time / (1000 / 60) > 2;\n    });\n  }\n\n  ric = (typeof requestIdleCallback === 'undefined' ? function (cb) {\n    return cb();\n  } : requestIdleCallback)(function () {\n    scope.run(function () {\n      var _data$targetEl$value2;\n\n      bindScroll((_data$targetEl$value2 = data.targetEl.value) !== null && _data$targetEl$value2 !== void 0 ? _data$targetEl$value2 : data.contentEl.value, function (e) {\n        if (slow) {\n          // If the position calculation is slow,\n          // defer updates until scrolling is finished.\n          // Browsers usually fire one scroll event per frame so\n          // we just wait until we've got two frames without an event\n          cancelAnimationFrame(raf);\n          raf = requestAnimationFrame(function () {\n            raf = requestAnimationFrame(function () {\n              update(e);\n            });\n          });\n        } else {\n          update(e);\n        }\n      });\n    });\n  });\n  onScopeDispose(function () {\n    typeof cancelIdleCallback !== 'undefined' && cancelIdleCallback(ric);\n    cancelAnimationFrame(raf);\n  });\n}\n/** @private */\n\n\nfunction bindScroll(el, onScroll) {\n  var scrollElements = [document].concat(_toConsumableArray(getScrollParents(el)));\n  scrollElements.forEach(function (el) {\n    el.addEventListener('scroll', onScroll, {\n      passive: true\n    });\n  });\n  onScopeDispose(function () {\n    scrollElements.forEach(function (el) {\n      el.removeEventListener('scroll', onScroll);\n    });\n  });\n}","map":{"version":3,"mappings":"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","names":["effectScope","onScopeDispose","watchEffect","requestNewFrame","convertToUnit","getScrollParents","hasScrollbar","IN_BROWSER","propsFactory","scrollStrategies","none","close","closeScrollStrategy","block","blockScrollStrategy","reposition","repositionScrollStrategy","makeScrollStrategyProps","scrollStrategy","type","String","Function","default","validator","val","useScrollStrategies","props","data","scope","stop","isActive","value","Promise","resolve","setTimeout","active","run","onScroll","e","bindScroll","targetEl","contentEl","offsetParent","root","scrollElements","Set","contained","undefined","filter","el","classList","contains","scrollbarWidth","window","innerWidth","document","documentElement","offsetWidth","scrollableParent","add","forEach","i","style","setProperty","scrollLeft","scrollTop","x","parseFloat","getPropertyValue","y","scrollBehavior","removeProperty","remove","slow","raf","ric","update","start","performance","now","updateLocation","time","requestIdleCallback","cb","cancelAnimationFrame","requestAnimationFrame","cancelIdleCallback","addEventListener","passive","removeEventListener"],"sources":["../../../src/components/VOverlay/scrollStrategies.ts"],"sourcesContent":["// Utilities\nimport { effectScope, onScopeDispose, watchEffect } from 'vue'\nimport { requestNewFrame } from './requestNewFrame'\nimport { convertToUnit, getScrollParents, hasScrollbar, IN_BROWSER, propsFactory } from '@/util'\n\n// Types\nimport type { EffectScope, PropType, Ref } from 'vue'\n\nexport interface ScrollStrategyData {\n  root: Ref<HTMLElement | undefined>\n  contentEl: Ref<HTMLElement | undefined>\n  targetEl: Ref<HTMLElement | undefined>\n  isActive: Ref<boolean>\n  updateLocation: Ref<((e: Event) => void) | undefined>\n}\n\nexport type ScrollStrategyFunction = (data: ScrollStrategyData, props: StrategyProps, scope: EffectScope) => void\n\nconst scrollStrategies = {\n  none: null,\n  close: closeScrollStrategy,\n  block: blockScrollStrategy,\n  reposition: repositionScrollStrategy,\n}\n\nexport interface StrategyProps {\n  scrollStrategy: keyof typeof scrollStrategies | ScrollStrategyFunction\n  contained: boolean | undefined\n}\n\nexport const makeScrollStrategyProps = propsFactory({\n  scrollStrategy: {\n    type: [String, Function] as PropType<StrategyProps['scrollStrategy']>,\n    default: 'block',\n    validator: (val: any) => typeof val === 'function' || val in scrollStrategies,\n  },\n}, 'VOverlay-scroll-strategies')\n\nexport function useScrollStrategies (\n  props: StrategyProps,\n  data: ScrollStrategyData\n) {\n  if (!IN_BROWSER) return\n\n  let scope: EffectScope | undefined\n  watchEffect(async () => {\n    scope?.stop()\n\n    if (!(data.isActive.value && props.scrollStrategy)) return\n\n    scope = effectScope()\n    await new Promise(resolve => setTimeout(resolve))\n    scope.active && scope.run(() => {\n      if (typeof props.scrollStrategy === 'function') {\n        props.scrollStrategy(data, props, scope!)\n      } else {\n        scrollStrategies[props.scrollStrategy]?.(data, props, scope!)\n      }\n    })\n  })\n\n  onScopeDispose(() => {\n    scope?.stop()\n  })\n}\n\nfunction closeScrollStrategy (data: ScrollStrategyData) {\n  function onScroll (e: Event) {\n    data.isActive.value = false\n  }\n\n  bindScroll(data.targetEl.value ?? data.contentEl.value, onScroll)\n}\n\nfunction blockScrollStrategy (data: ScrollStrategyData, props: StrategyProps) {\n  const offsetParent = data.root.value?.offsetParent\n  const scrollElements = [...new Set([\n    ...getScrollParents(data.targetEl.value, props.contained ? offsetParent : undefined),\n    ...getScrollParents(data.contentEl.value, props.contained ? offsetParent : undefined),\n  ])].filter(el => !el.classList.contains('v-overlay-scroll-blocked'))\n  const scrollbarWidth = window.innerWidth - document.documentElement.offsetWidth\n\n  const scrollableParent = (el => hasScrollbar(el) && el)(offsetParent || document.documentElement)\n  if (scrollableParent) {\n    data.root.value!.classList.add('v-overlay--scroll-blocked')\n  }\n\n  scrollElements.forEach((el, i) => {\n    el.style.setProperty('--v-body-scroll-x', convertToUnit(-el.scrollLeft))\n    el.style.setProperty('--v-body-scroll-y', convertToUnit(-el.scrollTop))\n\n    if (el !== document.documentElement) {\n      el.style.setProperty('--v-scrollbar-offset', convertToUnit(scrollbarWidth))\n    }\n\n    el.classList.add('v-overlay-scroll-blocked')\n  })\n\n  onScopeDispose(() => {\n    scrollElements.forEach((el, i) => {\n      const x = parseFloat(el.style.getPropertyValue('--v-body-scroll-x'))\n      const y = parseFloat(el.style.getPropertyValue('--v-body-scroll-y'))\n\n      const scrollBehavior = el.style.scrollBehavior\n\n      el.style.scrollBehavior = 'auto'\n      el.style.removeProperty('--v-body-scroll-x')\n      el.style.removeProperty('--v-body-scroll-y')\n      el.style.removeProperty('--v-scrollbar-offset')\n      el.classList.remove('v-overlay-scroll-blocked')\n\n      el.scrollLeft = -x\n      el.scrollTop = -y\n\n      el.style.scrollBehavior = scrollBehavior\n    })\n    if (scrollableParent) {\n      data.root.value!.classList.remove('v-overlay--scroll-blocked')\n    }\n  })\n}\n\nfunction repositionScrollStrategy (data: ScrollStrategyData, props: StrategyProps, scope: EffectScope) {\n  let slow = false\n  let raf = -1\n  let ric = -1\n\n  function update (e: Event) {\n    requestNewFrame(() => {\n      const start = performance.now()\n      data.updateLocation.value?.(e)\n      const time = performance.now() - start\n      slow = time / (1000 / 60) > 2\n    })\n  }\n\n  ric = (typeof requestIdleCallback === 'undefined' ? (cb: Function) => cb() : requestIdleCallback)(() => {\n    scope.run(() => {\n      bindScroll(data.targetEl.value ?? data.contentEl.value, e => {\n        if (slow) {\n          // If the position calculation is slow,\n          // defer updates until scrolling is finished.\n          // Browsers usually fire one scroll event per frame so\n          // we just wait until we've got two frames without an event\n          cancelAnimationFrame(raf)\n          raf = requestAnimationFrame(() => {\n            raf = requestAnimationFrame(() => {\n              update(e)\n            })\n          })\n        } else {\n          update(e)\n        }\n      })\n    })\n  })\n\n  onScopeDispose(() => {\n    typeof cancelIdleCallback !== 'undefined' && cancelIdleCallback(ric)\n    cancelAnimationFrame(raf)\n  })\n}\n\n/** @private */\nfunction bindScroll (el: HTMLElement | undefined, onScroll: (e: Event) => void) {\n  const scrollElements = [document, ...getScrollParents(el)]\n  scrollElements.forEach(el => {\n    el.addEventListener('scroll', onScroll, { passive: true })\n  })\n\n  onScopeDispose(() => {\n    scrollElements.forEach(el => {\n      el.removeEventListener('scroll', onScroll)\n    })\n  })\n}\n"]},"metadata":{},"sourceType":"module"}