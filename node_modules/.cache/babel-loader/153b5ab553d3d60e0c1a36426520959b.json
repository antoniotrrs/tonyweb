{"ast":null,"code":"import _objectWithoutProperties from \"/Users/antoniotorres/Documents/tony/tonyweb/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _asyncToGenerator from \"/Users/antoniotorres/Documents/tony/tonyweb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"/Users/antoniotorres/Documents/tony/tonyweb/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _excluded = [\"modelValue\"];\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.number.min-safe-integer.js\";\nimport \"core-js/modules/es.number.max-safe-integer.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { createVNode as _createVNode, Fragment as _Fragment, mergeProps as _mergeProps } from \"vue\"; // Styles\n\nimport \"./VNumberInput.css\"; // Components\n\nimport { VBtn } from \"../VBtn/index.js\";\nimport { VDefaultsProvider } from \"../VDefaultsProvider/index.js\";\nimport { VDivider } from \"../VDivider/index.js\";\nimport { makeVTextFieldProps, VTextField } from \"../VTextField/VTextField.js\"; // Composables\n\nimport { useHold } from \"./hold.js\";\nimport { useFocus } from \"../../composables/focus.js\";\nimport { useForm } from \"../../composables/form.js\";\nimport { forwardRefs } from \"../../composables/forwardRefs.js\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.js\"; // Utilities\n\nimport { computed, nextTick, onMounted, ref, shallowRef, watch, watchEffect } from 'vue';\nimport { clamp, genericComponent, omit, propsFactory, useRender } from \"../../util/index.js\"; // Types\n\nvar makeVNumberInputProps = propsFactory(_objectSpread({\n  controlVariant: {\n    type: String,\n    default: 'default'\n  },\n  inset: Boolean,\n  hideInput: Boolean,\n  modelValue: {\n    type: Number,\n    default: null\n  },\n  min: {\n    type: Number,\n    default: Number.MIN_SAFE_INTEGER\n  },\n  max: {\n    type: Number,\n    default: Number.MAX_SAFE_INTEGER\n  },\n  step: {\n    type: Number,\n    default: 1\n  },\n  precision: {\n    type: Number,\n    default: 0\n  }\n}, omit(makeVTextFieldProps(), ['modelValue', 'validationValue'])), 'VNumberInput');\nexport var VNumberInput = genericComponent()({\n  name: 'VNumberInput',\n  props: _objectSpread({}, makeVNumberInputProps()),\n  emits: {\n    'update:modelValue': function updateModelValue(val) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n    var vTextFieldRef = ref();\n\n    var _useHold = useHold({\n      toggleUpDown: toggleUpDown\n    }),\n        holdStart = _useHold.holdStart,\n        holdStop = _useHold.holdStop;\n\n    var form = useForm(props);\n    var controlsDisabled = computed(function () {\n      return form.isDisabled.value || form.isReadonly.value;\n    });\n\n    var _useFocus = useFocus(props),\n        isFocused = _useFocus.isFocused,\n        focus = _useFocus.focus,\n        blur = _useFocus.blur;\n\n    function correctPrecision(val) {\n      var precision = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : props.precision;\n      var fixed = precision == null ? String(val) : val.toFixed(precision);\n      return isFocused.value ? Number(fixed).toString() // trim zeros\n      : fixed;\n    }\n\n    var model = useProxiedModel(props, 'modelValue', null, function (val) {\n      return val !== null && val !== void 0 ? val : null;\n    }, function (val) {\n      return val == null ? val !== null && val !== void 0 ? val : null : clamp(Number(val), props.min, props.max);\n    });\n\n    var _inputText = shallowRef(null);\n\n    watchEffect(function () {\n      if (isFocused.value && !controlsDisabled.value) {// ignore external changes\n      } else if (model.value == null) {\n        _inputText.value = null;\n      } else if (!isNaN(model.value)) {\n        _inputText.value = correctPrecision(model.value);\n      }\n    });\n    var inputText = computed({\n      get: function get() {\n        return _inputText.value;\n      },\n      set: function set(val) {\n        if (val === null || val === '') {\n          model.value = null;\n          _inputText.value = null;\n        } else if (!isNaN(Number(val)) && Number(val) <= props.max && Number(val) >= props.min) {\n          model.value = Number(val);\n          _inputText.value = val;\n        }\n      }\n    });\n    var canIncrease = computed(function () {\n      var _model$value;\n\n      if (controlsDisabled.value) return false;\n      return ((_model$value = model.value) !== null && _model$value !== void 0 ? _model$value : 0) + props.step <= props.max;\n    });\n    var canDecrease = computed(function () {\n      var _model$value2;\n\n      if (controlsDisabled.value) return false;\n      return ((_model$value2 = model.value) !== null && _model$value2 !== void 0 ? _model$value2 : 0) - props.step >= props.min;\n    });\n    var controlVariant = computed(function () {\n      return props.hideInput ? 'stacked' : props.controlVariant;\n    });\n    var incrementIcon = computed(function () {\n      return controlVariant.value === 'split' ? '$plus' : '$collapse';\n    });\n    var decrementIcon = computed(function () {\n      return controlVariant.value === 'split' ? '$minus' : '$expand';\n    });\n    var controlNodeSize = computed(function () {\n      return controlVariant.value === 'split' ? 'default' : 'small';\n    });\n    var controlNodeDefaultHeight = computed(function () {\n      return controlVariant.value === 'stacked' ? 'auto' : '100%';\n    });\n    var incrementSlotProps = computed(function () {\n      return {\n        props: {\n          onClick: onControlClick,\n          onPointerup: onControlMouseup,\n          onPointerdown: onUpControlMousedown\n        }\n      };\n    });\n    var decrementSlotProps = computed(function () {\n      return {\n        props: {\n          onClick: onControlClick,\n          onPointerup: onControlMouseup,\n          onPointerdown: onDownControlMousedown\n        }\n      };\n    });\n    watch(function () {\n      return props.precision;\n    }, function () {\n      return formatInputValue();\n    });\n    onMounted(function () {\n      clampModel();\n    });\n\n    function inferPrecision(value) {\n      if (value == null) return 0;\n      var str = value.toString();\n      var idx = str.indexOf('.');\n      return ~idx ? str.length - idx : 0;\n    }\n\n    function toggleUpDown() {\n      var increment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (controlsDisabled.value) return;\n\n      if (model.value == null) {\n        inputText.value = correctPrecision(clamp(0, props.min, props.max));\n        return;\n      }\n\n      var inferredPrecision = Math.max(inferPrecision(model.value), inferPrecision(props.step));\n      if (props.precision != null) inferredPrecision = Math.max(inferredPrecision, props.precision);\n\n      if (increment) {\n        if (canIncrease.value) inputText.value = correctPrecision(model.value + props.step, inferredPrecision);\n      } else {\n        if (canDecrease.value) inputText.value = correctPrecision(model.value - props.step, inferredPrecision);\n      }\n    }\n\n    function onBeforeinput(e) {\n      var _e$target, _e$target2, _e$target3, _potentialNewInputVal;\n\n      if (!e.data) return;\n      var existingTxt = (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.value;\n      var selectionStart = (_e$target2 = e.target) === null || _e$target2 === void 0 ? void 0 : _e$target2.selectionStart;\n      var selectionEnd = (_e$target3 = e.target) === null || _e$target3 === void 0 ? void 0 : _e$target3.selectionEnd;\n      var potentialNewInputVal = existingTxt ? existingTxt.slice(0, selectionStart) + e.data + existingTxt.slice(selectionEnd) : e.data; // Only numbers, \"-\", \".\" are allowed\n      // AND \"-\", \".\" are allowed only once\n      // AND \"-\" is only allowed at the start\n\n      if (!/^-?(\\d+(\\.\\d*)?|(\\.\\d+)|\\d*|\\.)$/.test(potentialNewInputVal)) {\n        e.preventDefault();\n      }\n\n      if (props.precision == null) return; // Ignore decimal digits above precision limit\n\n      if (((_potentialNewInputVal = potentialNewInputVal.split('.')[1]) === null || _potentialNewInputVal === void 0 ? void 0 : _potentialNewInputVal.length) > props.precision) {\n        e.preventDefault();\n      } // Ignore decimal separator when precision = 0\n\n\n      if (props.precision === 0 && potentialNewInputVal.includes('.')) {\n        e.preventDefault();\n      }\n    }\n\n    function onKeydown(_x) {\n      return _onKeydown.apply(this, arguments);\n    }\n\n    function _onKeydown() {\n      _onKeydown = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(e) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(['Enter', 'ArrowLeft', 'ArrowRight', 'Backspace', 'Delete', 'Tab'].includes(e.key) || e.ctrlKey)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                if (!['ArrowDown', 'ArrowUp'].includes(e.key)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                e.preventDefault();\n                clampModel(); // _model is controlled, so need to wait until props['modelValue'] is updated\n\n                _context.next = 7;\n                return nextTick();\n\n              case 7:\n                if (e.key === 'ArrowDown') {\n                  toggleUpDown(false);\n                } else {\n                  toggleUpDown();\n                }\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _onKeydown.apply(this, arguments);\n    }\n\n    function onControlClick(e) {\n      e.stopPropagation();\n    }\n\n    function onControlMouseup(e) {\n      var el = e.currentTarget;\n      el === null || el === void 0 ? void 0 : el.releasePointerCapture(e.pointerId);\n      e.preventDefault();\n      e.stopPropagation();\n      holdStop();\n    }\n\n    function onUpControlMousedown(e) {\n      var el = e.currentTarget;\n      el === null || el === void 0 ? void 0 : el.setPointerCapture(e.pointerId);\n      e.preventDefault();\n      e.stopPropagation();\n      holdStart('up');\n    }\n\n    function onDownControlMousedown(e) {\n      var el = e.currentTarget;\n      el === null || el === void 0 ? void 0 : el.setPointerCapture(e.pointerId);\n      e.preventDefault();\n      e.stopPropagation();\n      holdStart('down');\n    }\n\n    function clampModel() {\n      if (controlsDisabled.value) return;\n      if (!vTextFieldRef.value) return;\n      var actualText = vTextFieldRef.value.value;\n\n      if (actualText && !isNaN(Number(actualText))) {\n        inputText.value = correctPrecision(clamp(Number(actualText), props.min, props.max));\n      } else {\n        inputText.value = null;\n      }\n    }\n\n    function formatInputValue() {\n      if (controlsDisabled.value) return;\n\n      if (model.value === null || isNaN(model.value)) {\n        inputText.value = null;\n        return;\n      }\n\n      inputText.value = props.precision == null ? String(model.value) : model.value.toFixed(props.precision);\n    }\n\n    function trimDecimalZeros() {\n      if (controlsDisabled.value) return;\n\n      if (model.value === null || isNaN(model.value)) {\n        inputText.value = null;\n        return;\n      }\n\n      inputText.value = model.value.toString();\n    }\n\n    function onFocus() {\n      focus();\n      trimDecimalZeros();\n    }\n\n    function onBlur() {\n      blur();\n      clampModel();\n    }\n\n    useRender(function () {\n      var _VTextField$filterPro = VTextField.filterProps(props),\n          _ = _VTextField$filterPro.modelValue,\n          textFieldProps = _objectWithoutProperties(_VTextField$filterPro, _excluded);\n\n      function incrementControlNode() {\n        return !slots.increment ? _createVNode(VBtn, {\n          \"disabled\": !canIncrease.value,\n          \"flat\": true,\n          \"key\": \"increment-btn\",\n          \"height\": controlNodeDefaultHeight.value,\n          \"data-testid\": \"increment\",\n          \"aria-hidden\": \"true\",\n          \"icon\": incrementIcon.value,\n          \"onClick\": onControlClick,\n          \"onPointerup\": onControlMouseup,\n          \"onPointerdown\": onUpControlMousedown,\n          \"size\": controlNodeSize.value,\n          \"tabindex\": \"-1\"\n        }, null) : _createVNode(VDefaultsProvider, {\n          \"key\": \"increment-defaults\",\n          \"defaults\": {\n            VBtn: {\n              disabled: !canIncrease.value,\n              flat: true,\n              height: controlNodeDefaultHeight.value,\n              size: controlNodeSize.value,\n              icon: incrementIcon.value\n            }\n          }\n        }, {\n          default: function _default() {\n            return [slots.increment(incrementSlotProps.value)];\n          }\n        });\n      }\n\n      function decrementControlNode() {\n        return !slots.decrement ? _createVNode(VBtn, {\n          \"disabled\": !canDecrease.value,\n          \"flat\": true,\n          \"key\": \"decrement-btn\",\n          \"height\": controlNodeDefaultHeight.value,\n          \"data-testid\": \"decrement\",\n          \"aria-hidden\": \"true\",\n          \"icon\": decrementIcon.value,\n          \"size\": controlNodeSize.value,\n          \"tabindex\": \"-1\",\n          \"onClick\": onControlClick,\n          \"onPointerup\": onControlMouseup,\n          \"onPointerdown\": onDownControlMousedown\n        }, null) : _createVNode(VDefaultsProvider, {\n          \"key\": \"decrement-defaults\",\n          \"defaults\": {\n            VBtn: {\n              disabled: !canDecrease.value,\n              flat: true,\n              height: controlNodeDefaultHeight.value,\n              size: controlNodeSize.value,\n              icon: decrementIcon.value\n            }\n          }\n        }, {\n          default: function _default() {\n            return [slots.decrement(decrementSlotProps.value)];\n          }\n        });\n      }\n\n      function controlNode() {\n        return _createVNode(\"div\", {\n          \"class\": \"v-number-input__control\"\n        }, [decrementControlNode(), _createVNode(VDivider, {\n          \"vertical\": controlVariant.value !== 'stacked'\n        }, null), incrementControlNode()]);\n      }\n\n      function dividerNode() {\n        return !props.hideInput && !props.inset ? _createVNode(VDivider, {\n          \"vertical\": true\n        }, null) : undefined;\n      }\n\n      var appendInnerControl = controlVariant.value === 'split' ? _createVNode(\"div\", {\n        \"class\": \"v-number-input__control\"\n      }, [_createVNode(VDivider, {\n        \"vertical\": true\n      }, null), incrementControlNode()]) : props.reverse || controlVariant.value === 'hidden' ? undefined : _createVNode(_Fragment, null, [dividerNode(), controlNode()]);\n      var hasAppendInner = slots['append-inner'] || appendInnerControl;\n      var prependInnerControl = controlVariant.value === 'split' ? _createVNode(\"div\", {\n        \"class\": \"v-number-input__control\"\n      }, [decrementControlNode(), _createVNode(VDivider, {\n        \"vertical\": true\n      }, null)]) : props.reverse && controlVariant.value !== 'hidden' ? _createVNode(_Fragment, null, [controlNode(), dividerNode()]) : undefined;\n      var hasPrependInner = slots['prepend-inner'] || prependInnerControl;\n      return _createVNode(VTextField, _mergeProps({\n        \"ref\": vTextFieldRef,\n        \"modelValue\": inputText.value,\n        \"onUpdate:modelValue\": function onUpdateModelValue($event) {\n          return inputText.value = $event;\n        },\n        \"validationValue\": model.value,\n        \"onBeforeinput\": onBeforeinput,\n        \"onFocus\": onFocus,\n        \"onBlur\": onBlur,\n        \"onKeydown\": onKeydown,\n        \"class\": ['v-number-input', {\n          'v-number-input--default': controlVariant.value === 'default',\n          'v-number-input--hide-input': props.hideInput,\n          'v-number-input--inset': props.inset,\n          'v-number-input--reverse': props.reverse,\n          'v-number-input--split': controlVariant.value === 'split',\n          'v-number-input--stacked': controlVariant.value === 'stacked'\n        }, props.class]\n      }, textFieldProps, {\n        \"style\": props.style,\n        \"inputmode\": \"decimal\"\n      }), _objectSpread(_objectSpread({}, slots), {}, {\n        'append-inner': hasAppendInner ? function () {\n          var _slots$appendInner;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          return _createVNode(_Fragment, null, [(_slots$appendInner = slots['append-inner']) === null || _slots$appendInner === void 0 ? void 0 : _slots$appendInner.call.apply(_slots$appendInner, [slots].concat(args)), appendInnerControl]);\n        } : undefined,\n        'prepend-inner': hasPrependInner ? function () {\n          var _slots$prependInner;\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          return _createVNode(_Fragment, null, [prependInnerControl, (_slots$prependInner = slots['prepend-inner']) === null || _slots$prependInner === void 0 ? void 0 : _slots$prependInner.call.apply(_slots$prependInner, [slots].concat(args))]);\n        } : undefined\n      }));\n    });\n    return forwardRefs({}, vTextFieldRef);\n  }\n});","map":{"version":3,"mappings":"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","names":["VBtn","VDefaultsProvider","VDivider","makeVTextFieldProps","VTextField","useHold","useFocus","useForm","forwardRefs","useProxiedModel","computed","nextTick","onMounted","ref","shallowRef","watch","watchEffect","clamp","genericComponent","omit","propsFactory","useRender","makeVNumberInputProps","controlVariant","type","String","default","inset","Boolean","hideInput","modelValue","Number","min","MIN_SAFE_INTEGER","max","MAX_SAFE_INTEGER","step","precision","VNumberInput","name","props","emits","val","setup","_ref","slots","vTextFieldRef","toggleUpDown","holdStart","holdStop","form","controlsDisabled","isDisabled","value","isReadonly","isFocused","focus","blur","correctPrecision","fixed","toFixed","toString","model","_inputText","isNaN","inputText","get","set","canIncrease","canDecrease","incrementIcon","decrementIcon","controlNodeSize","controlNodeDefaultHeight","incrementSlotProps","onClick","onControlClick","onPointerup","onControlMouseup","onPointerdown","onUpControlMousedown","decrementSlotProps","onDownControlMousedown","formatInputValue","clampModel","inferPrecision","str","idx","indexOf","length","increment","inferredPrecision","Math","onBeforeinput","e","data","existingTxt","target","selectionStart","selectionEnd","potentialNewInputVal","slice","test","preventDefault","split","includes","onKeydown","key","ctrlKey","stopPropagation","el","currentTarget","releasePointerCapture","pointerId","setPointerCapture","actualText","trimDecimalZeros","onFocus","onBlur","filterProps","_","textFieldProps","incrementControlNode","_createVNode","disabled","flat","height","size","icon","decrementControlNode","decrement","controlNode","dividerNode","undefined","appendInnerControl","reverse","hasAppendInner","prependInnerControl","hasPrependInner","$event","class","style","args","_key","arguments","_key2"],"sources":["../../../src/components/VNumberInput/VNumberInput.tsx"],"sourcesContent":["// Styles\nimport './VNumberInput.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VDivider } from '@/components/VDivider'\nimport { makeVTextFieldProps, VTextField } from '@/components/VTextField/VTextField'\n\n// Composables\nimport { useHold } from './hold'\nimport { useFocus } from '@/composables/focus'\nimport { useForm } from '@/composables/form'\nimport { forwardRefs } from '@/composables/forwardRefs'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { computed, nextTick, onMounted, ref, shallowRef, watch, watchEffect } from 'vue'\nimport { clamp, genericComponent, omit, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { VTextFieldSlots } from '@/components/VTextField/VTextField'\n\ntype ControlSlot = {\n  props: Record<string, unknown>\n}\n\ntype VNumberInputSlots = Omit<VTextFieldSlots, 'default'> & {\n  increment: ControlSlot\n  decrement: ControlSlot\n}\n\ntype ControlVariant = 'default' | 'stacked' | 'split' | 'hidden'\n\nconst makeVNumberInputProps = propsFactory({\n  controlVariant: {\n    type: String as PropType<ControlVariant>,\n    default: 'default',\n  },\n  inset: Boolean,\n  hideInput: Boolean,\n  modelValue: {\n    type: Number as PropType<number | null>,\n    default: null,\n  },\n  min: {\n    type: Number,\n    default: Number.MIN_SAFE_INTEGER,\n  },\n  max: {\n    type: Number,\n    default: Number.MAX_SAFE_INTEGER,\n  },\n  step: {\n    type: Number,\n    default: 1,\n  },\n  precision: {\n    type: Number as PropType<number | null>,\n    default: 0,\n  },\n\n  ...omit(makeVTextFieldProps(), ['modelValue', 'validationValue']),\n}, 'VNumberInput')\n\nexport const VNumberInput = genericComponent<VNumberInputSlots>()({\n  name: 'VNumberInput',\n\n  props: {\n    ...makeVNumberInputProps(),\n  },\n\n  emits: {\n    'update:modelValue': (val: number) => true,\n  },\n\n  setup (props, { slots }) {\n    const vTextFieldRef = ref<VTextField>()\n\n    const { holdStart, holdStop } = useHold({ toggleUpDown })\n    const form = useForm(props)\n    const controlsDisabled = computed(() => (\n      form.isDisabled.value || form.isReadonly.value\n    ))\n\n    const { isFocused, focus, blur } = useFocus(props)\n\n    function correctPrecision (val: number, precision = props.precision) {\n      const fixed = precision == null\n        ? String(val)\n        : val.toFixed(precision)\n      return isFocused.value\n        ? Number(fixed).toString() // trim zeros\n        : fixed\n    }\n\n    const model = useProxiedModel(props, 'modelValue', null,\n      val => val ?? null,\n      val => val == null\n        ? val ?? null\n        : clamp(Number(val), props.min, props.max)\n    )\n\n    const _inputText = shallowRef<string | null>(null)\n    watchEffect(() => {\n      if (isFocused.value && !controlsDisabled.value) {\n        // ignore external changes\n      } else if (model.value == null) {\n        _inputText.value = null\n      } else if (!isNaN(model.value)) {\n        _inputText.value = correctPrecision(model.value)\n      }\n    })\n    const inputText = computed<string | null>({\n      get: () => _inputText.value,\n      set (val) {\n        if (val === null || val === '') {\n          model.value = null\n          _inputText.value = null\n        } else if (!isNaN(Number(val)) && Number(val) <= props.max && Number(val) >= props.min) {\n          model.value = Number(val)\n          _inputText.value = val\n        }\n      },\n    })\n\n    const canIncrease = computed(() => {\n      if (controlsDisabled.value) return false\n      return (model.value ?? 0) as number + props.step <= props.max\n    })\n    const canDecrease = computed(() => {\n      if (controlsDisabled.value) return false\n      return (model.value ?? 0) as number - props.step >= props.min\n    })\n\n    const controlVariant = computed(() => {\n      return props.hideInput ? 'stacked' : props.controlVariant\n    })\n\n    const incrementIcon = computed(() => controlVariant.value === 'split' ? '$plus' : '$collapse')\n    const decrementIcon = computed(() => controlVariant.value === 'split' ? '$minus' : '$expand')\n    const controlNodeSize = computed(() => controlVariant.value === 'split' ? 'default' : 'small')\n    const controlNodeDefaultHeight = computed(() => controlVariant.value === 'stacked' ? 'auto' : '100%')\n\n    const incrementSlotProps = computed(() => ({\n      props: {\n        onClick: onControlClick,\n        onPointerup: onControlMouseup,\n        onPointerdown: onUpControlMousedown,\n      },\n    }))\n    const decrementSlotProps = computed(() => ({\n      props: {\n        onClick: onControlClick,\n        onPointerup: onControlMouseup,\n        onPointerdown: onDownControlMousedown,\n      },\n    }))\n\n    watch(() => props.precision, () => formatInputValue())\n\n    onMounted(() => {\n      clampModel()\n    })\n\n    function inferPrecision (value: number | null) {\n      if (value == null) return 0\n      const str = value.toString()\n      const idx = str.indexOf('.')\n      return ~idx ? str.length - idx : 0\n    }\n\n    function toggleUpDown (increment = true) {\n      if (controlsDisabled.value) return\n      if (model.value == null) {\n        inputText.value = correctPrecision(clamp(0, props.min, props.max))\n        return\n      }\n\n      let inferredPrecision = Math.max(inferPrecision(model.value), inferPrecision(props.step))\n      if (props.precision != null) inferredPrecision = Math.max(inferredPrecision, props.precision)\n      if (increment) {\n        if (canIncrease.value) inputText.value = correctPrecision(model.value + props.step, inferredPrecision)\n      } else {\n        if (canDecrease.value) inputText.value = correctPrecision(model.value - props.step, inferredPrecision)\n      }\n    }\n\n    function onBeforeinput (e: InputEvent) {\n      if (!e.data) return\n      const existingTxt = (e.target as HTMLInputElement)?.value\n      const selectionStart = (e.target as HTMLInputElement)?.selectionStart\n      const selectionEnd = (e.target as HTMLInputElement)?.selectionEnd\n      const potentialNewInputVal =\n        existingTxt\n          ? existingTxt.slice(0, selectionStart as number | undefined) + e.data + existingTxt.slice(selectionEnd as number | undefined)\n          : e.data\n      // Only numbers, \"-\", \".\" are allowed\n      // AND \"-\", \".\" are allowed only once\n      // AND \"-\" is only allowed at the start\n      if (!/^-?(\\d+(\\.\\d*)?|(\\.\\d+)|\\d*|\\.)$/.test(potentialNewInputVal)) {\n        e.preventDefault()\n      }\n\n      if (props.precision == null) return\n\n      // Ignore decimal digits above precision limit\n      if (potentialNewInputVal.split('.')[1]?.length > props.precision) {\n        e.preventDefault()\n      }\n      // Ignore decimal separator when precision = 0\n      if (props.precision === 0 && potentialNewInputVal.includes('.')) {\n        e.preventDefault()\n      }\n    }\n\n    async function onKeydown (e: KeyboardEvent) {\n      if (\n        ['Enter', 'ArrowLeft', 'ArrowRight', 'Backspace', 'Delete', 'Tab'].includes(e.key) ||\n        e.ctrlKey\n      ) return\n\n      if (['ArrowDown', 'ArrowUp'].includes(e.key)) {\n        e.preventDefault()\n        clampModel()\n        // _model is controlled, so need to wait until props['modelValue'] is updated\n        await nextTick()\n        if (e.key === 'ArrowDown') {\n          toggleUpDown(false)\n        } else {\n          toggleUpDown()\n        }\n      }\n    }\n\n    function onControlClick (e: MouseEvent) {\n      e.stopPropagation()\n    }\n\n    function onControlMouseup (e: PointerEvent) {\n      const el = e.currentTarget as HTMLElement\n      el?.releasePointerCapture(e.pointerId)\n      e.preventDefault()\n      e.stopPropagation()\n      holdStop()\n    }\n\n    function onUpControlMousedown (e: PointerEvent) {\n      const el = e.currentTarget as HTMLElement\n      el?.setPointerCapture(e.pointerId)\n      e.preventDefault()\n      e.stopPropagation()\n      holdStart('up')\n    }\n\n    function onDownControlMousedown (e: PointerEvent) {\n      const el = e.currentTarget as HTMLElement\n      el?.setPointerCapture(e.pointerId)\n      e.preventDefault()\n      e.stopPropagation()\n      holdStart('down')\n    }\n\n    function clampModel () {\n      if (controlsDisabled.value) return\n      if (!vTextFieldRef.value) return\n      const actualText = vTextFieldRef.value.value\n      if (actualText && !isNaN(Number(actualText))) {\n        inputText.value = correctPrecision(clamp(Number(actualText), props.min, props.max))\n      } else {\n        inputText.value = null\n      }\n    }\n\n    function formatInputValue () {\n      if (controlsDisabled.value) return\n      if (model.value === null || isNaN(model.value)) {\n        inputText.value = null\n        return\n      }\n      inputText.value = props.precision == null\n        ? String(model.value)\n        : model.value.toFixed(props.precision)\n    }\n\n    function trimDecimalZeros () {\n      if (controlsDisabled.value) return\n      if (model.value === null || isNaN(model.value)) {\n        inputText.value = null\n        return\n      }\n      inputText.value = model.value.toString()\n    }\n\n    function onFocus () {\n      focus()\n      trimDecimalZeros()\n    }\n\n    function onBlur () {\n      blur()\n      clampModel()\n    }\n\n    useRender(() => {\n      const { modelValue: _, ...textFieldProps } = VTextField.filterProps(props)\n\n      function incrementControlNode () {\n        return !slots.increment ? (\n          <VBtn\n            disabled={ !canIncrease.value }\n            flat\n            key=\"increment-btn\"\n            height={ controlNodeDefaultHeight.value }\n            data-testid=\"increment\"\n            aria-hidden=\"true\"\n            icon={ incrementIcon.value }\n            onClick={ onControlClick }\n            onPointerup={ onControlMouseup }\n            onPointerdown={ onUpControlMousedown }\n            size={ controlNodeSize.value }\n            tabindex=\"-1\"\n          />\n        ) : (\n          <VDefaultsProvider\n            key=\"increment-defaults\"\n            defaults={{\n              VBtn: {\n                disabled: !canIncrease.value,\n                flat: true,\n                height: controlNodeDefaultHeight.value,\n                size: controlNodeSize.value,\n                icon: incrementIcon.value,\n              },\n            }}\n          >\n            { slots.increment(incrementSlotProps.value) }\n          </VDefaultsProvider>\n        )\n      }\n\n      function decrementControlNode () {\n        return !slots.decrement ? (\n          <VBtn\n            disabled={ !canDecrease.value }\n            flat\n            key=\"decrement-btn\"\n            height={ controlNodeDefaultHeight.value }\n            data-testid=\"decrement\"\n            aria-hidden=\"true\"\n            icon={ decrementIcon.value }\n            size={ controlNodeSize.value }\n            tabindex=\"-1\"\n            onClick={ onControlClick }\n            onPointerup={ onControlMouseup }\n            onPointerdown={ onDownControlMousedown }\n          />\n        ) : (\n          <VDefaultsProvider\n            key=\"decrement-defaults\"\n            defaults={{\n              VBtn: {\n                disabled: !canDecrease.value,\n                flat: true,\n                height: controlNodeDefaultHeight.value,\n                size: controlNodeSize.value,\n                icon: decrementIcon.value,\n              },\n            }}\n          >\n            { slots.decrement(decrementSlotProps.value) }\n          </VDefaultsProvider>\n        )\n      }\n\n      function controlNode () {\n        return (\n          <div class=\"v-number-input__control\">\n            { decrementControlNode() }\n\n            <VDivider\n              vertical={ controlVariant.value !== 'stacked' }\n            />\n\n            { incrementControlNode() }\n          </div>\n        )\n      }\n\n      function dividerNode () {\n        return !props.hideInput && !props.inset ? <VDivider vertical /> : undefined\n      }\n\n      const appendInnerControl =\n        controlVariant.value === 'split'\n          ? (\n            <div class=\"v-number-input__control\">\n              <VDivider vertical />\n\n              { incrementControlNode() }\n            </div>\n          ) : (props.reverse || controlVariant.value === 'hidden'\n            ? undefined\n            : <>{ dividerNode() }{ controlNode() }</>)\n\n      const hasAppendInner = slots['append-inner'] || appendInnerControl\n\n      const prependInnerControl =\n        controlVariant.value === 'split'\n          ? (\n            <div class=\"v-number-input__control\">\n              { decrementControlNode() }\n\n              <VDivider vertical />\n            </div>\n          ) : (props.reverse && controlVariant.value !== 'hidden'\n            ? <>{ controlNode() }{ dividerNode() }</>\n            : undefined)\n\n      const hasPrependInner = slots['prepend-inner'] || prependInnerControl\n\n      return (\n        <VTextField\n          ref={ vTextFieldRef }\n          v-model={ inputText.value }\n          validationValue={ model.value }\n          onBeforeinput={ onBeforeinput }\n          onFocus={ onFocus }\n          onBlur={ onBlur }\n          onKeydown={ onKeydown }\n          class={[\n            'v-number-input',\n            {\n              'v-number-input--default': controlVariant.value === 'default',\n              'v-number-input--hide-input': props.hideInput,\n              'v-number-input--inset': props.inset,\n              'v-number-input--reverse': props.reverse,\n              'v-number-input--split': controlVariant.value === 'split',\n              'v-number-input--stacked': controlVariant.value === 'stacked',\n            },\n            props.class,\n          ]}\n          { ...textFieldProps }\n          style={ props.style }\n          inputmode=\"decimal\"\n        >\n          {{\n            ...slots,\n            'append-inner': hasAppendInner ? (...args) => (\n              <>\n                { slots['append-inner']?.(...args) }\n                { appendInnerControl }\n              </>\n            ) : undefined,\n            'prepend-inner': hasPrependInner ? (...args) => (\n              <>\n                { prependInnerControl }\n                { slots['prepend-inner']?.(...args) }\n              </>\n            ) : undefined,\n          }}\n        </VTextField>\n      )\n    })\n\n    return forwardRefs({}, vTextFieldRef)\n  },\n})\n\nexport type VNumberInput = InstanceType<typeof VNumberInput>\n"]},"metadata":{},"sourceType":"module"}