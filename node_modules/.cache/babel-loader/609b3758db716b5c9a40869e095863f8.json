{"ast":null,"code":"import _objectSpread from \"/Users/antoniotorres/Documents/tony/tonyweb/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.regexp.sticky.js\";\nimport { createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\"; // Components\n\nimport { makeDataTableProps } from \"./VDataTable.js\";\nimport { VDataTableHeaders } from \"./VDataTableHeaders.js\";\nimport { VDataTableRow } from \"./VDataTableRow.js\";\nimport { VDataTableRows } from \"./VDataTableRows.js\";\nimport { VTable } from \"../VTable/index.js\";\nimport { VVirtualScrollItem } from \"../VVirtualScroll/VVirtualScrollItem.js\"; // Composables\n\nimport { provideExpanded } from \"./composables/expand.js\";\nimport { createGroupBy, makeDataTableGroupProps, provideGroupBy, useGroupedItems } from \"./composables/group.js\";\nimport { createHeaders } from \"./composables/headers.js\";\nimport { useDataTableItems } from \"./composables/items.js\";\nimport { useOptions } from \"./composables/options.js\";\nimport { provideSelection } from \"./composables/select.js\";\nimport { createSort, provideSort, useSortedItems } from \"./composables/sort.js\";\nimport { provideDefaults } from \"../../composables/defaults.js\";\nimport { makeFilterProps, useFilter } from \"../../composables/filter.js\";\nimport { makeVirtualProps, useVirtual } from \"../../composables/virtual.js\"; // Utilities\n\nimport { computed, shallowRef, toRef, toRefs } from 'vue';\nimport { convertToUnit, genericComponent, omit, propsFactory, useRender } from \"../../util/index.js\"; // Types\n\nexport var makeVDataTableVirtualProps = propsFactory(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, omit(makeDataTableProps(), ['hideDefaultFooter'])), makeDataTableGroupProps()), makeVirtualProps()), makeFilterProps()), 'VDataTableVirtual');\nexport var VDataTableVirtual = genericComponent()({\n  name: 'VDataTableVirtual',\n  props: makeVDataTableVirtualProps(),\n  emits: {\n    'update:modelValue': function updateModelValue(value) {\n      return true;\n    },\n    'update:sortBy': function updateSortBy(value) {\n      return true;\n    },\n    'update:options': function updateOptions(value) {\n      return true;\n    },\n    'update:groupBy': function updateGroupBy(value) {\n      return true;\n    },\n    'update:expanded': function updateExpanded(value) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var attrs = _ref.attrs,\n        slots = _ref.slots;\n\n    var _createGroupBy = createGroupBy(props),\n        groupBy = _createGroupBy.groupBy;\n\n    var _createSort = createSort(props),\n        sortBy = _createSort.sortBy,\n        multiSort = _createSort.multiSort,\n        mustSort = _createSort.mustSort;\n\n    var _toRefs = toRefs(props),\n        disableSort = _toRefs.disableSort;\n\n    var _createHeaders = createHeaders(props, {\n      groupBy: groupBy,\n      showSelect: toRef(props, 'showSelect'),\n      showExpand: toRef(props, 'showExpand')\n    }),\n        columns = _createHeaders.columns,\n        headers = _createHeaders.headers,\n        filterFunctions = _createHeaders.filterFunctions,\n        sortFunctions = _createHeaders.sortFunctions,\n        sortRawFunctions = _createHeaders.sortRawFunctions;\n\n    var _useDataTableItems = useDataTableItems(props, columns),\n        items = _useDataTableItems.items;\n\n    var search = toRef(props, 'search');\n\n    var _useFilter = useFilter(props, items, search, {\n      transform: function transform(item) {\n        return item.columns;\n      },\n      customKeyFilter: filterFunctions\n    }),\n        filteredItems = _useFilter.filteredItems;\n\n    var _provideSort = provideSort({\n      sortBy: sortBy,\n      multiSort: multiSort,\n      mustSort: mustSort\n    }),\n        toggleSort = _provideSort.toggleSort;\n\n    var _provideGroupBy = provideGroupBy({\n      groupBy: groupBy,\n      sortBy: sortBy,\n      disableSort: disableSort\n    }),\n        sortByWithGroups = _provideGroupBy.sortByWithGroups,\n        opened = _provideGroupBy.opened,\n        extractRows = _provideGroupBy.extractRows,\n        isGroupOpen = _provideGroupBy.isGroupOpen,\n        toggleGroup = _provideGroupBy.toggleGroup;\n\n    var _useSortedItems = useSortedItems(props, filteredItems, sortByWithGroups, {\n      transform: function transform(item) {\n        return _objectSpread(_objectSpread({}, item.raw), item.columns);\n      },\n      sortFunctions: sortFunctions,\n      sortRawFunctions: sortRawFunctions\n    }),\n        sortedItems = _useSortedItems.sortedItems;\n\n    var _useGroupedItems = useGroupedItems(sortedItems, groupBy, opened),\n        flatItems = _useGroupedItems.flatItems;\n\n    var allItems = computed(function () {\n      return extractRows(flatItems.value);\n    });\n\n    var _provideSelection = provideSelection(props, {\n      allItems: allItems,\n      currentPage: allItems\n    }),\n        isSelected = _provideSelection.isSelected,\n        select = _provideSelection.select,\n        selectAll = _provideSelection.selectAll,\n        toggleSelect = _provideSelection.toggleSelect,\n        someSelected = _provideSelection.someSelected,\n        allSelected = _provideSelection.allSelected;\n\n    var _provideExpanded = provideExpanded(props),\n        isExpanded = _provideExpanded.isExpanded,\n        toggleExpand = _provideExpanded.toggleExpand;\n\n    var _useVirtual = useVirtual(props, flatItems),\n        containerRef = _useVirtual.containerRef,\n        markerRef = _useVirtual.markerRef,\n        paddingTop = _useVirtual.paddingTop,\n        paddingBottom = _useVirtual.paddingBottom,\n        computedItems = _useVirtual.computedItems,\n        handleItemResize = _useVirtual.handleItemResize,\n        handleScroll = _useVirtual.handleScroll,\n        handleScrollend = _useVirtual.handleScrollend,\n        calculateVisibleItems = _useVirtual.calculateVisibleItems,\n        scrollToIndex = _useVirtual.scrollToIndex;\n\n    var displayItems = computed(function () {\n      return computedItems.value.map(function (item) {\n        return item.raw;\n      });\n    });\n    useOptions({\n      sortBy: sortBy,\n      page: shallowRef(1),\n      itemsPerPage: shallowRef(-1),\n      groupBy: groupBy,\n      search: search\n    });\n    provideDefaults({\n      VDataTableRows: {\n        hideNoData: toRef(props, 'hideNoData'),\n        noDataText: toRef(props, 'noDataText'),\n        loading: toRef(props, 'loading'),\n        loadingText: toRef(props, 'loadingText')\n      }\n    });\n    var slotProps = computed(function () {\n      return {\n        sortBy: sortBy.value,\n        toggleSort: toggleSort,\n        someSelected: someSelected.value,\n        allSelected: allSelected.value,\n        isSelected: isSelected,\n        select: select,\n        selectAll: selectAll,\n        toggleSelect: toggleSelect,\n        isExpanded: isExpanded,\n        toggleExpand: toggleExpand,\n        isGroupOpen: isGroupOpen,\n        toggleGroup: toggleGroup,\n        items: allItems.value.map(function (item) {\n          return item.raw;\n        }),\n        internalItems: allItems.value,\n        groupedItems: flatItems.value,\n        columns: columns.value,\n        headers: headers.value\n      };\n    });\n    useRender(function () {\n      var dataTableHeadersProps = VDataTableHeaders.filterProps(props);\n      var dataTableRowsProps = VDataTableRows.filterProps(props);\n      var tableProps = VTable.filterProps(props);\n      return _createVNode(VTable, _mergeProps({\n        \"class\": ['v-data-table', {\n          'v-data-table--loading': props.loading\n        }, props.class],\n        \"style\": props.style\n      }, tableProps, {\n        \"fixedHeader\": props.fixedHeader || props.sticky\n      }), {\n        top: function top() {\n          var _slots$top;\n\n          return (_slots$top = slots.top) === null || _slots$top === void 0 ? void 0 : _slots$top.call(slots, slotProps.value);\n        },\n        wrapper: function wrapper() {\n          var _slots$colgroup, _slots$thead, _slots$bodyPrepend, _slots$bodyAppend, _slots$tbody, _slots$tfoot;\n\n          return _createVNode(\"div\", {\n            \"ref\": containerRef,\n            \"onScrollPassive\": handleScroll,\n            \"onScrollend\": handleScrollend,\n            \"class\": \"v-table__wrapper\",\n            \"style\": {\n              height: convertToUnit(props.height)\n            }\n          }, [_createVNode(\"table\", null, [(_slots$colgroup = slots.colgroup) === null || _slots$colgroup === void 0 ? void 0 : _slots$colgroup.call(slots, slotProps.value), !props.hideDefaultHeader && _createVNode(\"thead\", {\n            \"key\": \"thead\"\n          }, [_createVNode(VDataTableHeaders, dataTableHeadersProps, slots)]), (_slots$thead = slots.thead) === null || _slots$thead === void 0 ? void 0 : _slots$thead.call(slots, slotProps.value), !props.hideDefaultBody && _createVNode(\"tbody\", {\n            \"key\": \"tbody\"\n          }, [_createVNode(\"tr\", {\n            \"ref\": markerRef,\n            \"style\": {\n              height: convertToUnit(paddingTop.value),\n              border: 0\n            }\n          }, [_createVNode(\"td\", {\n            \"colspan\": columns.value.length,\n            \"style\": {\n              height: 0,\n              border: 0\n            }\n          }, null)]), (_slots$bodyPrepend = slots['body.prepend']) === null || _slots$bodyPrepend === void 0 ? void 0 : _slots$bodyPrepend.call(slots, slotProps.value), _createVNode(VDataTableRows, _mergeProps(attrs, dataTableRowsProps, {\n            \"items\": displayItems.value\n          }), _objectSpread(_objectSpread({}, slots), {}, {\n            item: function item(itemSlotProps) {\n              return _createVNode(VVirtualScrollItem, {\n                \"key\": itemSlotProps.internalItem.index,\n                \"renderless\": true,\n                \"onUpdate:height\": function onUpdateHeight(height) {\n                  return handleItemResize(itemSlotProps.internalItem.index, height);\n                }\n              }, {\n                default: function _default(_ref2) {\n                  var _slots$item, _slots$item2;\n\n                  var itemRef = _ref2.itemRef;\n                  return (_slots$item = (_slots$item2 = slots.item) === null || _slots$item2 === void 0 ? void 0 : _slots$item2.call(slots, _objectSpread(_objectSpread({}, itemSlotProps), {}, {\n                    itemRef: itemRef\n                  }))) !== null && _slots$item !== void 0 ? _slots$item : _createVNode(VDataTableRow, _mergeProps(itemSlotProps.props, {\n                    \"ref\": itemRef,\n                    \"key\": itemSlotProps.internalItem.index,\n                    \"index\": itemSlotProps.internalItem.index\n                  }), slots);\n                }\n              });\n            }\n          })), (_slots$bodyAppend = slots['body.append']) === null || _slots$bodyAppend === void 0 ? void 0 : _slots$bodyAppend.call(slots, slotProps.value), _createVNode(\"tr\", {\n            \"style\": {\n              height: convertToUnit(paddingBottom.value),\n              border: 0\n            }\n          }, [_createVNode(\"td\", {\n            \"colspan\": columns.value.length,\n            \"style\": {\n              height: 0,\n              border: 0\n            }\n          }, null)])]), (_slots$tbody = slots.tbody) === null || _slots$tbody === void 0 ? void 0 : _slots$tbody.call(slots, slotProps.value), (_slots$tfoot = slots.tfoot) === null || _slots$tfoot === void 0 ? void 0 : _slots$tfoot.call(slots, slotProps.value)])]);\n        },\n        bottom: function bottom() {\n          var _slots$bottom;\n\n          return (_slots$bottom = slots.bottom) === null || _slots$bottom === void 0 ? void 0 : _slots$bottom.call(slots, slotProps.value);\n        }\n      });\n    });\n    return {\n      calculateVisibleItems: calculateVisibleItems,\n      scrollToIndex: scrollToIndex\n    };\n  }\n});","map":{"version":3,"mappings":"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","names":["makeDataTableProps","VDataTableHeaders","VDataTableRow","VDataTableRows","VTable","VVirtualScrollItem","provideExpanded","createGroupBy","makeDataTableGroupProps","provideGroupBy","useGroupedItems","createHeaders","useDataTableItems","useOptions","provideSelection","createSort","provideSort","useSortedItems","provideDefaults","makeFilterProps","useFilter","makeVirtualProps","useVirtual","computed","shallowRef","toRef","toRefs","convertToUnit","genericComponent","omit","propsFactory","useRender","makeVDataTableVirtualProps","VDataTableVirtual","name","props","emits","value","setup","_ref","attrs","slots","groupBy","sortBy","multiSort","mustSort","disableSort","showSelect","showExpand","columns","headers","filterFunctions","sortFunctions","sortRawFunctions","items","search","transform","item","customKeyFilter","filteredItems","toggleSort","sortByWithGroups","opened","extractRows","isGroupOpen","toggleGroup","raw","sortedItems","flatItems","allItems","currentPage","isSelected","select","selectAll","toggleSelect","someSelected","allSelected","isExpanded","toggleExpand","containerRef","markerRef","paddingTop","paddingBottom","computedItems","handleItemResize","handleScroll","handleScrollend","calculateVisibleItems","scrollToIndex","displayItems","map","page","itemsPerPage","hideNoData","noDataText","loading","loadingText","slotProps","internalItems","groupedItems","dataTableHeadersProps","filterProps","dataTableRowsProps","tableProps","class","style","fixedHeader","sticky","top","wrapper","height","colgroup","hideDefaultHeader","_createVNode","thead","hideDefaultBody","border","length","itemSlotProps","internalItem","index","default","_ref2","itemRef","tbody","tfoot","bottom"],"sources":["../../../src/components/VDataTable/VDataTableVirtual.tsx"],"sourcesContent":["// Components\nimport { makeDataTableProps } from './VDataTable'\nimport { VDataTableHeaders } from './VDataTableHeaders'\nimport { VDataTableRow } from './VDataTableRow'\nimport { VDataTableRows } from './VDataTableRows'\nimport { VTable } from '@/components/VTable'\nimport { VVirtualScrollItem } from '@/components/VVirtualScroll/VVirtualScrollItem'\n\n// Composables\nimport { provideExpanded } from './composables/expand'\nimport { createGroupBy, makeDataTableGroupProps, provideGroupBy, useGroupedItems } from './composables/group'\nimport { createHeaders } from './composables/headers'\nimport { useDataTableItems } from './composables/items'\nimport { useOptions } from './composables/options'\nimport { provideSelection } from './composables/select'\nimport { createSort, provideSort, useSortedItems } from './composables/sort'\nimport { provideDefaults } from '@/composables/defaults'\nimport { makeFilterProps, useFilter } from '@/composables/filter'\nimport { makeVirtualProps, useVirtual } from '@/composables/virtual'\n\n// Utilities\nimport { computed, shallowRef, toRef, toRefs } from 'vue'\nimport { convertToUnit, genericComponent, omit, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { VDataTableSlotProps } from './VDataTable'\nimport type { VDataTableHeadersSlots } from './VDataTableHeaders'\nimport type { VDataTableRowsSlots } from './VDataTableRows'\nimport type { CellProps, RowProps } from '@/components/VDataTable/types'\nimport type { GenericProps, SelectItemKey, TemplateRef } from '@/util'\n\ntype VDataTableVirtualSlotProps<T> = Omit<\n  VDataTableSlotProps<T>,\n  | 'setItemsPerPage'\n  | 'page'\n  | 'pageCount'\n  | 'itemsPerPage'\n>\n\nexport type VDataTableVirtualSlots<T> = VDataTableRowsSlots<T> & VDataTableHeadersSlots & {\n  colgroup: VDataTableVirtualSlotProps<T>\n  top: VDataTableVirtualSlotProps<T>\n  headers: VDataTableHeadersSlots['headers']\n  tbody: VDataTableVirtualSlotProps<T>\n  thead: VDataTableVirtualSlotProps<T>\n  tfoot: VDataTableVirtualSlotProps<T>\n  bottom: VDataTableVirtualSlotProps<T>\n  'body.prepend': VDataTableVirtualSlotProps<T>\n  'body.append': VDataTableVirtualSlotProps<T>\n  item: {\n    itemRef: TemplateRef\n  }\n}\n\nexport const makeVDataTableVirtualProps = propsFactory({\n  ...omit(makeDataTableProps(), ['hideDefaultFooter']),\n  ...makeDataTableGroupProps(),\n  ...makeVirtualProps(),\n  ...makeFilterProps(),\n}, 'VDataTableVirtual')\n\ntype ItemType<T> = T extends readonly (infer U)[] ? U : never\n\nexport const VDataTableVirtual = genericComponent<new <T extends readonly any[], V>(\n  props: {\n    items?: T\n    itemValue?: SelectItemKey<ItemType<T>>\n    rowProps?: RowProps<ItemType<T>>\n    cellProps?: CellProps<ItemType<T>>\n    itemSelectable?: SelectItemKey<ItemType<T>>\n    modelValue?: V\n    'onUpdate:modelValue'?: (value: V) => void\n  },\n  slots: VDataTableVirtualSlots<ItemType<T>>,\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VDataTableVirtual',\n\n  props: makeVDataTableVirtualProps(),\n\n  emits: {\n    'update:modelValue': (value: any[]) => true,\n    'update:sortBy': (value: any) => true,\n    'update:options': (value: any) => true,\n    'update:groupBy': (value: any) => true,\n    'update:expanded': (value: any) => true,\n  },\n\n  setup (props, { attrs, slots }) {\n    const { groupBy } = createGroupBy(props)\n    const { sortBy, multiSort, mustSort } = createSort(props)\n    const { disableSort } = toRefs(props)\n\n    const {\n      columns,\n      headers,\n      filterFunctions,\n      sortFunctions,\n      sortRawFunctions,\n    } = createHeaders(props, {\n      groupBy,\n      showSelect: toRef(props, 'showSelect'),\n      showExpand: toRef(props, 'showExpand'),\n    })\n    const { items } = useDataTableItems(props, columns)\n\n    const search = toRef(props, 'search')\n    const { filteredItems } = useFilter(props, items, search, {\n      transform: item => item.columns,\n      customKeyFilter: filterFunctions,\n    })\n\n    const { toggleSort } = provideSort({ sortBy, multiSort, mustSort })\n    const { sortByWithGroups, opened, extractRows, isGroupOpen, toggleGroup } = provideGroupBy({ groupBy, sortBy, disableSort })\n\n    const { sortedItems } = useSortedItems(props, filteredItems, sortByWithGroups, {\n      transform: item => ({ ...item.raw, ...item.columns }),\n      sortFunctions,\n      sortRawFunctions,\n    })\n    const { flatItems } = useGroupedItems(sortedItems, groupBy, opened)\n\n    const allItems = computed(() => extractRows(flatItems.value))\n\n    const { isSelected, select, selectAll, toggleSelect, someSelected, allSelected } = provideSelection(props, {\n      allItems,\n      currentPage: allItems,\n    })\n    const { isExpanded, toggleExpand } = provideExpanded(props)\n\n    const {\n      containerRef,\n      markerRef,\n      paddingTop,\n      paddingBottom,\n      computedItems,\n      handleItemResize,\n      handleScroll,\n      handleScrollend,\n      calculateVisibleItems,\n      scrollToIndex,\n    } = useVirtual(props, flatItems)\n    const displayItems = computed(() => computedItems.value.map(item => item.raw))\n\n    useOptions({\n      sortBy,\n      page: shallowRef(1),\n      itemsPerPage: shallowRef(-1),\n      groupBy,\n      search,\n    })\n\n    provideDefaults({\n      VDataTableRows: {\n        hideNoData: toRef(props, 'hideNoData'),\n        noDataText: toRef(props, 'noDataText'),\n        loading: toRef(props, 'loading'),\n        loadingText: toRef(props, 'loadingText'),\n      },\n    })\n\n    const slotProps = computed<VDataTableVirtualSlotProps<any>>(() => ({\n      sortBy: sortBy.value,\n      toggleSort,\n      someSelected: someSelected.value,\n      allSelected: allSelected.value,\n      isSelected,\n      select,\n      selectAll,\n      toggleSelect,\n      isExpanded,\n      toggleExpand,\n      isGroupOpen,\n      toggleGroup,\n      items: allItems.value.map(item => item.raw),\n      internalItems: allItems.value,\n      groupedItems: flatItems.value,\n      columns: columns.value,\n      headers: headers.value,\n    }))\n\n    useRender(() => {\n      const dataTableHeadersProps = VDataTableHeaders.filterProps(props)\n      const dataTableRowsProps = VDataTableRows.filterProps(props)\n      const tableProps = VTable.filterProps(props)\n\n      return (\n        <VTable\n          class={[\n            'v-data-table',\n            {\n              'v-data-table--loading': props.loading,\n            },\n            props.class,\n          ]}\n          style={ props.style }\n          { ...tableProps }\n          fixedHeader={ props.fixedHeader || props.sticky }\n        >\n          {{\n            top: () => slots.top?.(slotProps.value),\n            wrapper: () => (\n              <div\n                ref={ containerRef }\n                onScrollPassive={ handleScroll }\n                onScrollend={ handleScrollend }\n                class=\"v-table__wrapper\"\n                style={{\n                  height: convertToUnit(props.height),\n                }}\n              >\n                <table>\n                  { slots.colgroup?.(slotProps.value) }\n                  { !props.hideDefaultHeader && (\n                    <thead key=\"thead\">\n                      <VDataTableHeaders\n                        { ...dataTableHeadersProps }\n                        v-slots={ slots }\n                      />\n                    </thead>\n                  )}\n                  { slots.thead?.(slotProps.value) }\n                  { !props.hideDefaultBody && (\n                    <tbody key=\"tbody\">\n                      <tr ref={ markerRef } style={{ height: convertToUnit(paddingTop.value), border: 0 }}>\n                        <td colspan={ columns.value.length } style={{ height: 0, border: 0 }}></td>\n                      </tr>\n\n                      { slots['body.prepend']?.(slotProps.value) }\n\n                      <VDataTableRows\n                        { ...attrs }\n                        { ...dataTableRowsProps }\n                        items={ displayItems.value }\n                      >\n                        {{\n                          ...slots,\n                          item: itemSlotProps => (\n                            <VVirtualScrollItem\n                              key={ itemSlotProps.internalItem.index }\n                              renderless\n                              onUpdate:height={ height => handleItemResize(itemSlotProps.internalItem.index, height) }\n                            >\n                              { ({ itemRef }) => (\n                                slots.item?.({ ...itemSlotProps, itemRef }) ?? (\n                                  <VDataTableRow\n                                    { ...itemSlotProps.props }\n                                    ref={ itemRef }\n                                    key={ itemSlotProps.internalItem.index }\n                                    index={ itemSlotProps.internalItem.index }\n                                    v-slots={ slots }\n                                  />\n                                )\n                              )}\n                            </VVirtualScrollItem>\n                          ),\n                        }}\n                      </VDataTableRows>\n\n                      { slots['body.append']?.(slotProps.value) }\n\n                      <tr style={{ height: convertToUnit(paddingBottom.value), border: 0 }}>\n                        <td colspan={ columns.value.length } style={{ height: 0, border: 0 }}></td>\n                      </tr>\n                    </tbody>\n                  )}\n                  { slots.tbody?.(slotProps.value) }\n                  { slots.tfoot?.(slotProps.value) }\n                </table>\n              </div>\n            ),\n            bottom: () => slots.bottom?.(slotProps.value),\n          }}\n        </VTable>\n      )\n    })\n\n    return {\n      calculateVisibleItems,\n      scrollToIndex,\n    }\n  },\n})\n\nexport type VDataTableVirtual = InstanceType<typeof VDataTableVirtual>\n"]},"metadata":{},"sourceType":"module"}