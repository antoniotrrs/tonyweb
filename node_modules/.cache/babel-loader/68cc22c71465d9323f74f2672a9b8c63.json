{"ast":null,"code":"import _toConsumableArray from \"/Users/antoniotorres/Documents/tony/tony/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/antoniotorres/Documents/tony/tony/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.weak-map.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.set.js\";\n// Utilities\nimport { eventName, isOn } from \"./helpers.js\";\nvar handlers = new WeakMap();\nexport function bindProps(el, props) {\n  Object.keys(props).forEach(function (k) {\n    if (isOn(k)) {\n      var _ref;\n\n      var name = eventName(k);\n      var handler = handlers.get(el);\n\n      if (props[k] == null) {\n        handler === null || handler === void 0 ? void 0 : handler.forEach(function (v) {\n          var _v = _slicedToArray(v, 2),\n              n = _v[0],\n              fn = _v[1];\n\n          if (n === name) {\n            el.removeEventListener(name, fn);\n            handler.delete(v);\n          }\n        });\n      } else if (!handler || !((_ref = _toConsumableArray(handler)) !== null && _ref !== void 0 && _ref.some(function (v) {\n        return v[0] === name && v[1] === props[k];\n      }))) {\n        el.addEventListener(name, props[k]);\n\n        var _handler = handler || new Set();\n\n        _handler.add([name, props[k]]);\n\n        if (!handlers.has(el)) handlers.set(el, _handler);\n      }\n    } else {\n      if (props[k] == null) {\n        el.removeAttribute(k);\n      } else {\n        el.setAttribute(k, props[k]);\n      }\n    }\n  });\n}\nexport function unbindProps(el, props) {\n  Object.keys(props).forEach(function (k) {\n    if (isOn(k)) {\n      var name = eventName(k);\n      var handler = handlers.get(el);\n      handler === null || handler === void 0 ? void 0 : handler.forEach(function (v) {\n        var _v2 = _slicedToArray(v, 2),\n            n = _v2[0],\n            fn = _v2[1];\n\n        if (n === name) {\n          el.removeEventListener(name, fn);\n          handler.delete(v);\n        }\n      });\n    } else {\n      el.removeAttribute(k);\n    }\n  });\n}","map":{"version":3,"mappings":";;;;;;;;;AAAA;AAAA,SACSA,SADT,EACoBC,IADpB,QACwB,cADxB;AAGA,IAAMC,QAAQ,GAAG,IAAIC,OAAJ,EAAjB;AAEA,OAAO,SAASC,SAAT,CAAoBC,EAApB,EAAqCC,KAArC,EAAiE;AACtEC,QAAM,CAACC,IAAPD,CAAYD,KAAZC,EAAmBE,OAAnBF,CAA2BG,WAAC,EAAI;AAC9B,QAAIT,IAAI,CAACS,CAAD,CAAR,EAAa;AAAA;;AACX,UAAMC,IAAI,GAAGX,SAAS,CAACU,CAAD,CAAtB;AACA,UAAME,OAAO,GAAGV,QAAQ,CAACW,GAATX,CAAaG,EAAbH,CAAhB;;AACA,UAAII,KAAK,CAACI,CAAD,CAALJ,IAAY,IAAhB,EAAsB;AACpBM,eAAO,SAAPA,WAAO,WAAPA,mBAAO,CAAEH,OAATG,CAAiBE,WAAC,EAAI;AACpB,kCAAgBA,CAAhB;AAAA,cAAOC,CAAP;AAAA,cAAUC,EAAV;;AACA,cAAID,CAAC,KAAKJ,IAAV,EAAgB;AACdN,cAAE,CAACY,mBAAHZ,CAAuBM,IAAvBN,EAA6BW,EAA7BX;AACAO,mBAAO,CAACM,MAARN,CAAeE,CAAfF;AACF;AACD,SANDA;AAOD,OARD,MAQO,IAAI,CAACA,OAAD,IAAY,6BAAKA,OAAL,kCAAC,KAAcO,IAAd,CAAmBL,WAAC;AAAA,eAAIA,CAAC,CAAC,CAAD,CAADA,KAASH,IAATG,IAAiBA,CAAC,CAAC,CAAD,CAADA,KAASR,KAAK,CAACI,CAAD,CAAnC;AAAA,OAApB,CAAD,CAAhB,EAA8E;AACnFL,UAAE,CAACe,gBAAHf,CAAoBM,IAApBN,EAA0BC,KAAK,CAACI,CAAD,CAA/BL;;AACA,YAAMgB,QAAQ,GAAGT,OAAO,IAAI,IAAIU,GAAJ,EAA5B;;AACAD,gBAAQ,CAACE,GAATF,CAAa,CAACV,IAAD,EAAOL,KAAK,CAACI,CAAD,CAAZ,CAAbW;;AACA,YAAI,CAACnB,QAAQ,CAACsB,GAATtB,CAAaG,EAAbH,CAAL,EAAuBA,QAAQ,CAACuB,GAATvB,CAAaG,EAAbH,EAAiBmB,QAAjBnB;AACzB;AACD,KAjBD,MAiBO;AACL,UAAII,KAAK,CAACI,CAAD,CAALJ,IAAY,IAAhB,EAAsB;AACpBD,UAAE,CAACqB,eAAHrB,CAAmBK,CAAnBL;AACD,OAFD,MAEO;AACLA,UAAE,CAACsB,YAAHtB,CAAgBK,CAAhBL,EAAmBC,KAAK,CAACI,CAAD,CAAxBL;AACF;AACF;AACD,GAzBDE;AA0BF;AAEA,OAAO,SAASqB,WAAT,CAAsBvB,EAAtB,EAAuCC,KAAvC,EAAmE;AACxEC,QAAM,CAACC,IAAPD,CAAYD,KAAZC,EAAmBE,OAAnBF,CAA2BG,WAAC,EAAI;AAC9B,QAAIT,IAAI,CAACS,CAAD,CAAR,EAAa;AACX,UAAMC,IAAI,GAAGX,SAAS,CAACU,CAAD,CAAtB;AACA,UAAME,OAAO,GAAGV,QAAQ,CAACW,GAATX,CAAaG,EAAbH,CAAhB;AACAU,aAAO,SAAPA,WAAO,WAAPA,mBAAO,CAAEH,OAATG,CAAiBE,WAAC,EAAI;AACpB,iCAAgBA,CAAhB;AAAA,YAAOC,CAAP;AAAA,YAAUC,EAAV;;AACA,YAAID,CAAC,KAAKJ,IAAV,EAAgB;AACdN,YAAE,CAACY,mBAAHZ,CAAuBM,IAAvBN,EAA6BW,EAA7BX;AACAO,iBAAO,CAACM,MAARN,CAAeE,CAAfF;AACF;AACD,OANDA;AAOD,KAVD,MAUO;AACLP,QAAE,CAACqB,eAAHrB,CAAmBK,CAAnBL;AACF;AACD,GAdDE;AAeF","names":["eventName","isOn","handlers","WeakMap","bindProps","el","props","Object","keys","forEach","k","name","handler","get","v","n","fn","removeEventListener","delete","some","addEventListener","_handler","Set","add","has","set","removeAttribute","setAttribute","unbindProps"],"sources":["../../src/util/bindProps.ts"],"sourcesContent":["// Utilities\nimport { eventName, isOn } from '@/util/helpers'\n\nconst handlers = new WeakMap<HTMLElement, Set<[string, () => void]>>()\n\nexport function bindProps (el: HTMLElement, props: Record<string, any>) {\n  Object.keys(props).forEach(k => {\n    if (isOn(k)) {\n      const name = eventName(k)\n      const handler = handlers.get(el)\n      if (props[k] == null) {\n        handler?.forEach(v => {\n          const [n, fn] = v\n          if (n === name) {\n            el.removeEventListener(name, fn)\n            handler.delete(v)\n          }\n        })\n      } else if (!handler || ![...handler]?.some(v => v[0] === name && v[1] === props[k])) {\n        el.addEventListener(name, props[k])\n        const _handler = handler || new Set()\n        _handler.add([name, props[k]])\n        if (!handlers.has(el)) handlers.set(el, _handler)\n      }\n    } else {\n      if (props[k] == null) {\n        el.removeAttribute(k)\n      } else {\n        el.setAttribute(k, props[k])\n      }\n    }\n  })\n}\n\nexport function unbindProps (el: HTMLElement, props: Record<string, any>) {\n  Object.keys(props).forEach(k => {\n    if (isOn(k)) {\n      const name = eventName(k)\n      const handler = handlers.get(el)\n      handler?.forEach(v => {\n        const [n, fn] = v\n        if (n === name) {\n          el.removeEventListener(name, fn)\n          handler.delete(v)\n        }\n      })\n    } else {\n      el.removeAttribute(k)\n    }\n  })\n}\n"]},"metadata":{},"sourceType":"module"}