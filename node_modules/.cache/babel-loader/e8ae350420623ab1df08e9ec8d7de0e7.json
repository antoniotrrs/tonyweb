{"ast":null,"code":"import _typeof from \"/Users/antoniotorres/Documents/tony/tonyweb/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n// Utilities\nimport { attachedRoot } from \"../../util/index.js\"; // Types\n\nfunction defaultConditional() {\n  return true;\n}\n\nfunction checkEvent(e, el, binding) {\n  // The include element callbacks below can be expensive\n  // so we should avoid calling them when we're not active.\n  // Explicitly check for false to allow fallback compatibility\n  // with non-toggleable components\n  if (!e || checkIsActive(e, binding) === false) return false; // If we're clicking inside the shadowroot, then the app root doesn't get the same\n  // level of introspection as to _what_ we're clicking. We want to check to see if\n  // our target is the shadowroot parent container, and if it is, ignore.\n\n  var root = attachedRoot(el);\n  if (typeof ShadowRoot !== 'undefined' && root instanceof ShadowRoot && root.host === e.target) return false; // Check if additional elements were passed to be included in check\n  // (click must be outside all included elements, if any)\n\n  var elements = (_typeof(binding.value) === 'object' && binding.value.include || function () {\n    return [];\n  })(); // Add the root element for the component this directive was defined on\n\n\n  elements.push(el); // Check if it's a click outside our elements, and then if our callback returns true.\n  // Non-toggleable components should take action in their callback and return falsy.\n  // Toggleable can return true if it wants to deactivate.\n  // Note that, because we're in the capture phase, this callback will occur before\n  // the bubbling click event on any outside elements.\n\n  return !elements.some(function (el) {\n    return el === null || el === void 0 ? void 0 : el.contains(e.target);\n  });\n}\n\nfunction checkIsActive(e, binding) {\n  var isActive = _typeof(binding.value) === 'object' && binding.value.closeConditional || defaultConditional;\n  return isActive(e);\n}\n\nfunction directive(e, el, binding) {\n  var handler = typeof binding.value === 'function' ? binding.value : binding.value.handler; // Clicks in the Shadow DOM change their target while using setTimeout, so the original target is saved here\n\n  e.shadowTarget = e.target;\n  el._clickOutside.lastMousedownWasOutside && checkEvent(e, el, binding) && setTimeout(function () {\n    checkIsActive(e, binding) && handler && handler(e);\n  }, 0);\n}\n\nfunction handleShadow(el, callback) {\n  var root = attachedRoot(el);\n  callback(document);\n\n  if (typeof ShadowRoot !== 'undefined' && root instanceof ShadowRoot) {\n    callback(root);\n  }\n}\n\nexport var ClickOutside = {\n  // [data-app] may not be found\n  // if using bind, inserted makes\n  // sure that the root element is\n  // available, iOS does not support\n  // clicks on body\n  mounted: function mounted(el, binding) {\n    var onClick = function onClick(e) {\n      return directive(e, el, binding);\n    };\n\n    var onMousedown = function onMousedown(e) {\n      el._clickOutside.lastMousedownWasOutside = checkEvent(e, el, binding);\n    };\n\n    handleShadow(el, function (app) {\n      app.addEventListener('click', onClick, true);\n      app.addEventListener('mousedown', onMousedown, true);\n    });\n\n    if (!el._clickOutside) {\n      el._clickOutside = {\n        lastMousedownWasOutside: false\n      };\n    }\n\n    el._clickOutside[binding.instance.$.uid] = {\n      onClick: onClick,\n      onMousedown: onMousedown\n    };\n  },\n  beforeUnmount: function beforeUnmount(el, binding) {\n    if (!el._clickOutside) return;\n    handleShadow(el, function (app) {\n      var _el$_clickOutside;\n\n      if (!app || !((_el$_clickOutside = el._clickOutside) !== null && _el$_clickOutside !== void 0 && _el$_clickOutside[binding.instance.$.uid])) return;\n      var _el$_clickOutside$bin = el._clickOutside[binding.instance.$.uid],\n          onClick = _el$_clickOutside$bin.onClick,\n          onMousedown = _el$_clickOutside$bin.onMousedown;\n      app.removeEventListener('click', onClick, true);\n      app.removeEventListener('mousedown', onMousedown, true);\n    });\n    delete el._clickOutside[binding.instance.$.uid];\n  }\n};\nexport default ClickOutside;","map":{"version":3,"mappings":"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","names":["attachedRoot","defaultConditional","checkEvent","e","el","binding","checkIsActive","root","ShadowRoot","host","target","elements","value","include","push","some","contains","isActive","closeConditional","directive","handler","shadowTarget","_clickOutside","lastMousedownWasOutside","setTimeout","handleShadow","callback","document","ClickOutside","mounted","onClick","onMousedown","app","addEventListener","instance","$","uid","beforeUnmount","removeEventListener"],"sources":["../../../src/directives/click-outside/index.ts"],"sourcesContent":["// Utilities\nimport { attachedRoot } from '@/util'\n\n// Types\nimport type { DirectiveBinding } from 'vue'\n\ninterface ClickOutsideBindingArgs {\n  handler: (e: MouseEvent) => void\n  closeConditional?: (e: Event) => boolean\n  include?: () => HTMLElement[]\n}\n\ninterface ClickOutsideDirectiveBinding extends DirectiveBinding {\n  value: ((e: MouseEvent) => void) | ClickOutsideBindingArgs\n}\n\nfunction defaultConditional () {\n  return true\n}\n\nfunction checkEvent (e: MouseEvent, el: HTMLElement, binding: ClickOutsideDirectiveBinding): boolean {\n  // The include element callbacks below can be expensive\n  // so we should avoid calling them when we're not active.\n  // Explicitly check for false to allow fallback compatibility\n  // with non-toggleable components\n  if (!e || checkIsActive(e, binding) === false) return false\n\n  // If we're clicking inside the shadowroot, then the app root doesn't get the same\n  // level of introspection as to _what_ we're clicking. We want to check to see if\n  // our target is the shadowroot parent container, and if it is, ignore.\n  const root = attachedRoot(el)\n  if (\n    typeof ShadowRoot !== 'undefined' &&\n    root instanceof ShadowRoot &&\n    root.host === e.target\n  ) return false\n\n  // Check if additional elements were passed to be included in check\n  // (click must be outside all included elements, if any)\n  const elements = ((typeof binding.value === 'object' && binding.value.include) || (() => []))()\n  // Add the root element for the component this directive was defined on\n  elements.push(el)\n\n  // Check if it's a click outside our elements, and then if our callback returns true.\n  // Non-toggleable components should take action in their callback and return falsy.\n  // Toggleable can return true if it wants to deactivate.\n  // Note that, because we're in the capture phase, this callback will occur before\n  // the bubbling click event on any outside elements.\n  return !elements.some(el => el?.contains(e.target as Node))\n}\n\nfunction checkIsActive (e: MouseEvent, binding: ClickOutsideDirectiveBinding): boolean | void {\n  const isActive = (typeof binding.value === 'object' && binding.value.closeConditional) || defaultConditional\n\n  return isActive(e)\n}\n\nfunction directive (e: MouseEvent, el: HTMLElement, binding: ClickOutsideDirectiveBinding) {\n  const handler = typeof binding.value === 'function' ? binding.value : binding.value.handler\n\n  // Clicks in the Shadow DOM change their target while using setTimeout, so the original target is saved here\n  e.shadowTarget = e.target\n\n  el._clickOutside!.lastMousedownWasOutside && checkEvent(e, el, binding) && setTimeout(() => {\n    checkIsActive(e, binding) && handler && handler(e)\n  }, 0)\n}\n\nfunction handleShadow (el: HTMLElement, callback: Function): void {\n  const root = attachedRoot(el)\n\n  callback(document)\n\n  if (typeof ShadowRoot !== 'undefined' && root instanceof ShadowRoot) {\n    callback(root)\n  }\n}\n\nexport const ClickOutside = {\n  // [data-app] may not be found\n  // if using bind, inserted makes\n  // sure that the root element is\n  // available, iOS does not support\n  // clicks on body\n  mounted (el: HTMLElement, binding: ClickOutsideDirectiveBinding) {\n    const onClick = (e: Event) => directive(e as MouseEvent, el, binding)\n    const onMousedown = (e: Event) => {\n      el._clickOutside!.lastMousedownWasOutside = checkEvent(e as MouseEvent, el, binding)\n    }\n\n    handleShadow(el, (app: HTMLElement) => {\n      app.addEventListener('click', onClick, true)\n      app.addEventListener('mousedown', onMousedown, true)\n    })\n    if (!el._clickOutside) {\n      el._clickOutside = {\n        lastMousedownWasOutside: false,\n      }\n    }\n\n    el._clickOutside[binding.instance!.$.uid] = {\n      onClick,\n      onMousedown,\n    }\n  },\n\n  beforeUnmount (el: HTMLElement, binding: ClickOutsideDirectiveBinding) {\n    if (!el._clickOutside) return\n\n    handleShadow(el, (app: HTMLElement) => {\n      if (!app || !el._clickOutside?.[binding.instance!.$.uid]) return\n\n      const { onClick, onMousedown } = el._clickOutside[binding.instance!.$.uid]!\n\n      app.removeEventListener('click', onClick, true)\n      app.removeEventListener('mousedown', onMousedown, true)\n    })\n\n    delete el._clickOutside[binding.instance!.$.uid]\n  },\n}\n\nexport default ClickOutside\n"]},"metadata":{},"sourceType":"module"}