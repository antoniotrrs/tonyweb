{"ast":null,"code":"import _asyncToGenerator from \"/Users/antoniotorres/Documents/tony/tonyweb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"/Users/antoniotorres/Documents/tony/tonyweb/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport { createVNode as _createVNode } from \"vue\"; // Styles\n\nimport \"./VColorPickerPreview.css\"; // Components\n\nimport { VBtn } from \"../VBtn/index.js\";\nimport { VSlider } from \"../VSlider/index.js\"; // Composables\n\nimport { makeComponentProps } from \"../../composables/component.js\"; // Utilities\n\nimport { onUnmounted } from 'vue';\nimport { nullColor } from \"./util/index.js\";\nimport { defineComponent, HSVtoCSS, parseColor, propsFactory, RGBtoHSV, SUPPORTS_EYE_DROPPER, useRender } from \"../../util/index.js\"; // Types\n\nexport var makeVColorPickerPreviewProps = propsFactory(_objectSpread({\n  color: {\n    type: Object\n  },\n  disabled: Boolean,\n  hideAlpha: Boolean\n}, makeComponentProps()), 'VColorPickerPreview');\nexport var VColorPickerPreview = defineComponent({\n  name: 'VColorPickerPreview',\n  props: makeVColorPickerPreviewProps(),\n  emits: {\n    'update:color': function updateColor(color) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var abortController = new AbortController();\n    onUnmounted(function () {\n      return abortController.abort();\n    });\n\n    function openEyeDropper() {\n      return _openEyeDropper.apply(this, arguments);\n    }\n\n    function _openEyeDropper() {\n      _openEyeDropper = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var eyeDropper, _props$color6, result, colorHexValue;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(!SUPPORTS_EYE_DROPPER || props.disabled)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                eyeDropper = new window.EyeDropper();\n                _context.prev = 3;\n                _context.next = 6;\n                return eyeDropper.open({\n                  signal: abortController.signal\n                });\n\n              case 6:\n                result = _context.sent;\n                colorHexValue = RGBtoHSV(parseColor(result.sRGBHex));\n                emit('update:color', _objectSpread(_objectSpread({}, (_props$color6 = props.color) !== null && _props$color6 !== void 0 ? _props$color6 : nullColor), colorHexValue));\n                _context.next = 13;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](3);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 11]]);\n      }));\n      return _openEyeDropper.apply(this, arguments);\n    }\n\n    useRender(function () {\n      var _props$color, _props$color2, _props$color$a, _props$color4;\n\n      return _createVNode(\"div\", {\n        \"class\": ['v-color-picker-preview', {\n          'v-color-picker-preview--hide-alpha': props.hideAlpha\n        }, props.class],\n        \"style\": props.style\n      }, [SUPPORTS_EYE_DROPPER && _createVNode(\"div\", {\n        \"class\": \"v-color-picker-preview__eye-dropper\",\n        \"key\": \"eyeDropper\"\n      }, [_createVNode(VBtn, {\n        \"density\": \"comfortable\",\n        \"disabled\": props.disabled,\n        \"icon\": \"$eyeDropper\",\n        \"variant\": \"plain\",\n        \"onClick\": openEyeDropper\n      }, null)]), _createVNode(\"div\", {\n        \"class\": \"v-color-picker-preview__dot\"\n      }, [_createVNode(\"div\", {\n        \"style\": {\n          background: HSVtoCSS((_props$color = props.color) !== null && _props$color !== void 0 ? _props$color : nullColor)\n        }\n      }, null)]), _createVNode(\"div\", {\n        \"class\": \"v-color-picker-preview__sliders\"\n      }, [_createVNode(VSlider, {\n        \"class\": \"v-color-picker-preview__track v-color-picker-preview__hue\",\n        \"modelValue\": (_props$color2 = props.color) === null || _props$color2 === void 0 ? void 0 : _props$color2.h,\n        \"onUpdate:modelValue\": function onUpdateModelValue(h) {\n          var _props$color3;\n\n          return emit('update:color', _objectSpread(_objectSpread({}, (_props$color3 = props.color) !== null && _props$color3 !== void 0 ? _props$color3 : nullColor), {}, {\n            h: h\n          }));\n        },\n        \"step\": 0,\n        \"min\": 0,\n        \"max\": 360,\n        \"disabled\": props.disabled,\n        \"thumbSize\": 14,\n        \"trackSize\": 8,\n        \"trackFillColor\": \"white\",\n        \"hideDetails\": true\n      }, null), !props.hideAlpha && _createVNode(VSlider, {\n        \"class\": \"v-color-picker-preview__track v-color-picker-preview__alpha\",\n        \"modelValue\": (_props$color$a = (_props$color4 = props.color) === null || _props$color4 === void 0 ? void 0 : _props$color4.a) !== null && _props$color$a !== void 0 ? _props$color$a : 1,\n        \"onUpdate:modelValue\": function onUpdateModelValue(a) {\n          var _props$color5;\n\n          return emit('update:color', _objectSpread(_objectSpread({}, (_props$color5 = props.color) !== null && _props$color5 !== void 0 ? _props$color5 : nullColor), {}, {\n            a: a\n          }));\n        },\n        \"step\": 1 / 256,\n        \"min\": 0,\n        \"max\": 1,\n        \"disabled\": props.disabled,\n        \"thumbSize\": 14,\n        \"trackSize\": 8,\n        \"trackFillColor\": \"white\",\n        \"hideDetails\": true\n      }, null)])]);\n    });\n    return {};\n  }\n});","map":{"version":3,"mappings":"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","names":["VBtn","VSlider","makeComponentProps","onUnmounted","nullColor","defineComponent","HSVtoCSS","parseColor","propsFactory","RGBtoHSV","SUPPORTS_EYE_DROPPER","useRender","makeVColorPickerPreviewProps","color","type","Object","disabled","Boolean","hideAlpha","VColorPickerPreview","name","props","emits","setup","_ref","emit","abortController","AbortController","abort","openEyeDropper","eyeDropper","window","EyeDropper","open","signal","result","colorHexValue","sRGBHex","class","style","_createVNode","background","h","a"],"sources":["../../../src/components/VColorPicker/VColorPickerPreview.tsx"],"sourcesContent":["// Styles\nimport './VColorPickerPreview.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\nimport { VSlider } from '@/components/VSlider'\n\n// Composables\nimport { makeComponentProps } from '@/composables/component'\n\n// Utilities\nimport { onUnmounted } from 'vue'\nimport { nullColor } from './util'\nimport {\n  defineComponent,\n  HSVtoCSS,\n  parseColor,\n  propsFactory,\n  RGBtoHSV,\n  SUPPORTS_EYE_DROPPER,\n  useRender,\n} from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { HSV } from '@/util'\n\nexport const makeVColorPickerPreviewProps = propsFactory({\n  color: {\n    type: Object as PropType<HSV | null>,\n  },\n  disabled: Boolean,\n  hideAlpha: Boolean,\n\n  ...makeComponentProps(),\n}, 'VColorPickerPreview')\n\nexport const VColorPickerPreview = defineComponent({\n  name: 'VColorPickerPreview',\n\n  props: makeVColorPickerPreviewProps(),\n\n  emits: {\n    'update:color': (color: HSV) => true,\n  },\n\n  setup (props, { emit }) {\n    const abortController = new AbortController()\n\n    onUnmounted(() => abortController.abort())\n\n    async function openEyeDropper () {\n      if (!SUPPORTS_EYE_DROPPER || props.disabled) return\n\n      const eyeDropper = new window.EyeDropper()\n      try {\n        const result = await eyeDropper.open({ signal: abortController.signal })\n        const colorHexValue = RGBtoHSV(parseColor(result.sRGBHex))\n        emit('update:color', { ...(props.color ?? nullColor), ...colorHexValue })\n      } catch (e) {}\n    }\n\n    useRender(() => (\n      <div\n        class={[\n          'v-color-picker-preview',\n          {\n            'v-color-picker-preview--hide-alpha': props.hideAlpha,\n          },\n          props.class,\n        ]}\n        style={ props.style }\n      >\n        { SUPPORTS_EYE_DROPPER && (\n          <div class=\"v-color-picker-preview__eye-dropper\" key=\"eyeDropper\">\n            <VBtn density=\"comfortable\" disabled={ props.disabled } icon=\"$eyeDropper\" variant=\"plain\" onClick={ openEyeDropper } />\n          </div>\n        )}\n\n        <div class=\"v-color-picker-preview__dot\">\n          <div style={{ background: HSVtoCSS(props.color ?? nullColor) }} />\n        </div>\n\n        <div class=\"v-color-picker-preview__sliders\">\n          <VSlider\n            class=\"v-color-picker-preview__track v-color-picker-preview__hue\"\n            modelValue={ props.color?.h }\n            onUpdate:modelValue={ h => emit('update:color', { ...(props.color ?? nullColor), h }) }\n            step={ 0 }\n            min={ 0 }\n            max={ 360 }\n            disabled={ props.disabled }\n            thumbSize={ 14 }\n            trackSize={ 8 }\n            trackFillColor=\"white\"\n            hideDetails\n          />\n\n          { !props.hideAlpha && (\n            <VSlider\n              class=\"v-color-picker-preview__track v-color-picker-preview__alpha\"\n              modelValue={ props.color?.a ?? 1 }\n              onUpdate:modelValue={ a => emit('update:color', { ...(props.color ?? nullColor), a }) }\n              step={ 1 / 256 }\n              min={ 0 }\n              max={ 1 }\n              disabled={ props.disabled }\n              thumbSize={ 14 }\n              trackSize={ 8 }\n              trackFillColor=\"white\"\n              hideDetails\n            />\n          )}\n        </div>\n      </div>\n    ))\n\n    return {}\n  },\n})\n\nexport type VColorPickerPreview = InstanceType<typeof VColorPickerPreview>\n"]},"metadata":{},"sourceType":"module"}