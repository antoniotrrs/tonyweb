{"ast":null,"code":"import _objectSpread from \"/Users/antoniotorres/Documents/tony/tonyweb/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.regexp.sticky.js\";\nimport { Fragment as _Fragment, createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\"; // Components\n\nimport { makeDataTableProps } from \"./VDataTable.js\";\nimport { makeVDataTableFooterProps, VDataTableFooter } from \"./VDataTableFooter.js\";\nimport { VDataTableHeaders } from \"./VDataTableHeaders.js\";\nimport { VDataTableRows } from \"./VDataTableRows.js\";\nimport { VDivider } from \"../VDivider/index.js\";\nimport { VTable } from \"../VTable/index.js\"; // Composables\n\nimport { provideExpanded } from \"./composables/expand.js\";\nimport { createGroupBy, provideGroupBy, useGroupedItems } from \"./composables/group.js\";\nimport { createHeaders } from \"./composables/headers.js\";\nimport { useDataTableItems } from \"./composables/items.js\";\nimport { useOptions } from \"./composables/options.js\";\nimport { createPagination, makeDataTablePaginateProps, providePagination } from \"./composables/paginate.js\";\nimport { provideSelection } from \"./composables/select.js\";\nimport { createSort, provideSort } from \"./composables/sort.js\";\nimport { provideDefaults } from \"../../composables/defaults.js\"; // Utilities\n\nimport { computed, provide, toRef, toRefs } from 'vue';\nimport { genericComponent, propsFactory, useRender } from \"../../util/index.js\"; // Types\n\nexport var makeVDataTableServerProps = propsFactory(_objectSpread(_objectSpread(_objectSpread({\n  itemsLength: {\n    type: [Number, String],\n    required: true\n  }\n}, makeDataTablePaginateProps()), makeDataTableProps()), makeVDataTableFooterProps()), 'VDataTableServer');\nexport var VDataTableServer = genericComponent()({\n  name: 'VDataTableServer',\n  props: makeVDataTableServerProps(),\n  emits: {\n    'update:modelValue': function updateModelValue(value) {\n      return true;\n    },\n    'update:page': function updatePage(page) {\n      return true;\n    },\n    'update:itemsPerPage': function updateItemsPerPage(page) {\n      return true;\n    },\n    'update:sortBy': function updateSortBy(sortBy) {\n      return true;\n    },\n    'update:options': function updateOptions(options) {\n      return true;\n    },\n    'update:expanded': function updateExpanded(options) {\n      return true;\n    },\n    'update:groupBy': function updateGroupBy(value) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var attrs = _ref.attrs,\n        slots = _ref.slots;\n\n    var _createGroupBy = createGroupBy(props),\n        groupBy = _createGroupBy.groupBy;\n\n    var _createSort = createSort(props),\n        sortBy = _createSort.sortBy,\n        multiSort = _createSort.multiSort,\n        mustSort = _createSort.mustSort;\n\n    var _createPagination = createPagination(props),\n        page = _createPagination.page,\n        itemsPerPage = _createPagination.itemsPerPage;\n\n    var _toRefs = toRefs(props),\n        disableSort = _toRefs.disableSort;\n\n    var itemsLength = computed(function () {\n      return parseInt(props.itemsLength, 10);\n    });\n\n    var _createHeaders = createHeaders(props, {\n      groupBy: groupBy,\n      showSelect: toRef(props, 'showSelect'),\n      showExpand: toRef(props, 'showExpand')\n    }),\n        columns = _createHeaders.columns,\n        headers = _createHeaders.headers;\n\n    var _useDataTableItems = useDataTableItems(props, columns),\n        items = _useDataTableItems.items;\n\n    var _provideSort = provideSort({\n      sortBy: sortBy,\n      multiSort: multiSort,\n      mustSort: mustSort,\n      page: page\n    }),\n        toggleSort = _provideSort.toggleSort;\n\n    var _provideGroupBy = provideGroupBy({\n      groupBy: groupBy,\n      sortBy: sortBy,\n      disableSort: disableSort\n    }),\n        opened = _provideGroupBy.opened,\n        isGroupOpen = _provideGroupBy.isGroupOpen,\n        toggleGroup = _provideGroupBy.toggleGroup,\n        extractRows = _provideGroupBy.extractRows;\n\n    var _providePagination = providePagination({\n      page: page,\n      itemsPerPage: itemsPerPage,\n      itemsLength: itemsLength\n    }),\n        pageCount = _providePagination.pageCount,\n        setItemsPerPage = _providePagination.setItemsPerPage;\n\n    var _useGroupedItems = useGroupedItems(items, groupBy, opened),\n        flatItems = _useGroupedItems.flatItems;\n\n    var _provideSelection = provideSelection(props, {\n      allItems: items,\n      currentPage: items\n    }),\n        isSelected = _provideSelection.isSelected,\n        select = _provideSelection.select,\n        selectAll = _provideSelection.selectAll,\n        toggleSelect = _provideSelection.toggleSelect,\n        someSelected = _provideSelection.someSelected,\n        allSelected = _provideSelection.allSelected;\n\n    var _provideExpanded = provideExpanded(props),\n        isExpanded = _provideExpanded.isExpanded,\n        toggleExpand = _provideExpanded.toggleExpand;\n\n    var itemsWithoutGroups = computed(function () {\n      return extractRows(items.value);\n    });\n    useOptions({\n      page: page,\n      itemsPerPage: itemsPerPage,\n      sortBy: sortBy,\n      groupBy: groupBy,\n      search: toRef(props, 'search')\n    });\n    provide('v-data-table', {\n      toggleSort: toggleSort,\n      sortBy: sortBy\n    });\n    provideDefaults({\n      VDataTableRows: {\n        hideNoData: toRef(props, 'hideNoData'),\n        noDataText: toRef(props, 'noDataText'),\n        loading: toRef(props, 'loading'),\n        loadingText: toRef(props, 'loadingText')\n      }\n    });\n    var slotProps = computed(function () {\n      return {\n        page: page.value,\n        itemsPerPage: itemsPerPage.value,\n        sortBy: sortBy.value,\n        pageCount: pageCount.value,\n        toggleSort: toggleSort,\n        setItemsPerPage: setItemsPerPage,\n        someSelected: someSelected.value,\n        allSelected: allSelected.value,\n        isSelected: isSelected,\n        select: select,\n        selectAll: selectAll,\n        toggleSelect: toggleSelect,\n        isExpanded: isExpanded,\n        toggleExpand: toggleExpand,\n        isGroupOpen: isGroupOpen,\n        toggleGroup: toggleGroup,\n        items: itemsWithoutGroups.value.map(function (item) {\n          return item.raw;\n        }),\n        internalItems: itemsWithoutGroups.value,\n        groupedItems: flatItems.value,\n        columns: columns.value,\n        headers: headers.value\n      };\n    });\n    useRender(function () {\n      var dataTableFooterProps = VDataTableFooter.filterProps(props);\n      var dataTableHeadersProps = VDataTableHeaders.filterProps(props);\n      var dataTableRowsProps = VDataTableRows.filterProps(props);\n      var tableProps = VTable.filterProps(props);\n      return _createVNode(VTable, _mergeProps({\n        \"class\": ['v-data-table', {\n          'v-data-table--loading': props.loading\n        }, props.class],\n        \"style\": props.style\n      }, tableProps, {\n        \"fixedHeader\": props.fixedHeader || props.sticky\n      }), {\n        top: function top() {\n          var _slots$top;\n\n          return (_slots$top = slots.top) === null || _slots$top === void 0 ? void 0 : _slots$top.call(slots, slotProps.value);\n        },\n        default: function _default() {\n          var _slots$colgroup, _slots$thead, _slots$bodyPrepend, _slots$bodyAppend, _slots$tbody, _slots$tfoot;\n\n          return slots.default ? slots.default(slotProps.value) : _createVNode(_Fragment, null, [(_slots$colgroup = slots.colgroup) === null || _slots$colgroup === void 0 ? void 0 : _slots$colgroup.call(slots, slotProps.value), !props.hideDefaultHeader && _createVNode(\"thead\", {\n            \"key\": \"thead\",\n            \"class\": \"v-data-table__thead\",\n            \"role\": \"rowgroup\"\n          }, [_createVNode(VDataTableHeaders, dataTableHeadersProps, slots)]), (_slots$thead = slots.thead) === null || _slots$thead === void 0 ? void 0 : _slots$thead.call(slots, slotProps.value), !props.hideDefaultBody && _createVNode(\"tbody\", {\n            \"class\": \"v-data-table__tbody\",\n            \"role\": \"rowgroup\"\n          }, [(_slots$bodyPrepend = slots['body.prepend']) === null || _slots$bodyPrepend === void 0 ? void 0 : _slots$bodyPrepend.call(slots, slotProps.value), slots.body ? slots.body(slotProps.value) : _createVNode(VDataTableRows, _mergeProps(attrs, dataTableRowsProps, {\n            \"items\": flatItems.value\n          }), slots), (_slots$bodyAppend = slots['body.append']) === null || _slots$bodyAppend === void 0 ? void 0 : _slots$bodyAppend.call(slots, slotProps.value)]), (_slots$tbody = slots.tbody) === null || _slots$tbody === void 0 ? void 0 : _slots$tbody.call(slots, slotProps.value), (_slots$tfoot = slots.tfoot) === null || _slots$tfoot === void 0 ? void 0 : _slots$tfoot.call(slots, slotProps.value)]);\n        },\n        bottom: function bottom() {\n          return slots.bottom ? slots.bottom(slotProps.value) : !props.hideDefaultFooter && _createVNode(_Fragment, null, [_createVNode(VDivider, null, null), _createVNode(VDataTableFooter, dataTableFooterProps, {\n            prepend: slots['footer.prepend']\n          })]);\n        }\n      });\n    });\n  }\n});","map":{"version":3,"mappings":"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","names":["makeDataTableProps","makeVDataTableFooterProps","VDataTableFooter","VDataTableHeaders","VDataTableRows","VDivider","VTable","provideExpanded","createGroupBy","provideGroupBy","useGroupedItems","createHeaders","useDataTableItems","useOptions","createPagination","makeDataTablePaginateProps","providePagination","provideSelection","createSort","provideSort","provideDefaults","computed","provide","toRef","toRefs","genericComponent","propsFactory","useRender","makeVDataTableServerProps","itemsLength","type","Number","String","required","VDataTableServer","name","props","emits","value","page","sortBy","options","setup","_ref","attrs","slots","groupBy","multiSort","mustSort","itemsPerPage","disableSort","parseInt","showSelect","showExpand","columns","headers","items","toggleSort","opened","isGroupOpen","toggleGroup","extractRows","pageCount","setItemsPerPage","flatItems","allItems","currentPage","isSelected","select","selectAll","toggleSelect","someSelected","allSelected","isExpanded","toggleExpand","itemsWithoutGroups","search","hideNoData","noDataText","loading","loadingText","slotProps","map","item","raw","internalItems","groupedItems","dataTableFooterProps","filterProps","dataTableHeadersProps","dataTableRowsProps","tableProps","class","style","fixedHeader","sticky","top","default","_createVNode","colgroup","hideDefaultHeader","thead","hideDefaultBody","body","tbody","tfoot","bottom","hideDefaultFooter","prepend"],"sources":["../../../src/components/VDataTable/VDataTableServer.tsx"],"sourcesContent":["// Components\nimport { makeDataTableProps } from './VDataTable'\nimport { makeVDataTableFooterProps, VDataTableFooter } from './VDataTableFooter'\nimport { VDataTableHeaders } from './VDataTableHeaders'\nimport { VDataTableRows } from './VDataTableRows'\nimport { VDivider } from '@/components/VDivider'\nimport { VTable } from '@/components/VTable'\n\n// Composables\nimport { provideExpanded } from './composables/expand'\nimport { createGroupBy, provideGroupBy, useGroupedItems } from './composables/group'\nimport { createHeaders } from './composables/headers'\nimport { useDataTableItems } from './composables/items'\nimport { useOptions } from './composables/options'\nimport { createPagination, makeDataTablePaginateProps, providePagination } from './composables/paginate'\nimport { provideSelection } from './composables/select'\nimport { createSort, provideSort } from './composables/sort'\nimport { provideDefaults } from '@/composables/defaults'\n\n// Utilities\nimport { computed, provide, toRef, toRefs } from 'vue'\nimport { genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { VDataTableSlotProps, VDataTableSlots } from './VDataTable'\nimport type { CellProps, RowProps } from '@/components/VDataTable/types'\nimport type { GenericProps, SelectItemKey } from '@/util'\n\nexport const makeVDataTableServerProps = propsFactory({\n  itemsLength: {\n    type: [Number, String],\n    required: true,\n  },\n\n  ...makeDataTablePaginateProps(),\n  ...makeDataTableProps(),\n  ...makeVDataTableFooterProps(),\n}, 'VDataTableServer')\n\ntype ItemType<T> = T extends readonly (infer U)[] ? U : never\n\nexport const VDataTableServer = genericComponent<new <T extends readonly any[], V>(\n  props: {\n    items?: T\n    itemValue?: SelectItemKey<ItemType<T>>\n    rowProps?: RowProps<ItemType<T>>\n    cellProps?: CellProps<ItemType<T>>\n    itemSelectable?: SelectItemKey<ItemType<T>>\n    modelValue?: V\n    'onUpdate:modelValue'?: (value: V) => void\n  },\n  slots: VDataTableSlots<ItemType<T>>,\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VDataTableServer',\n\n  props: makeVDataTableServerProps(),\n\n  emits: {\n    'update:modelValue': (value: any[]) => true,\n    'update:page': (page: number) => true,\n    'update:itemsPerPage': (page: number) => true,\n    'update:sortBy': (sortBy: any) => true,\n    'update:options': (options: any) => true,\n    'update:expanded': (options: any) => true,\n    'update:groupBy': (value: any) => true,\n  },\n\n  setup (props, { attrs, slots }) {\n    const { groupBy } = createGroupBy(props)\n    const { sortBy, multiSort, mustSort } = createSort(props)\n    const { page, itemsPerPage } = createPagination(props)\n    const { disableSort } = toRefs(props)\n    const itemsLength = computed(() => parseInt(props.itemsLength, 10))\n\n    const { columns, headers } = createHeaders(props, {\n      groupBy,\n      showSelect: toRef(props, 'showSelect'),\n      showExpand: toRef(props, 'showExpand'),\n    })\n\n    const { items } = useDataTableItems(props, columns)\n\n    const { toggleSort } = provideSort({ sortBy, multiSort, mustSort, page })\n\n    const { opened, isGroupOpen, toggleGroup, extractRows } = provideGroupBy({ groupBy, sortBy, disableSort })\n\n    const { pageCount, setItemsPerPage } = providePagination({ page, itemsPerPage, itemsLength })\n\n    const { flatItems } = useGroupedItems(items, groupBy, opened)\n\n    const { isSelected, select, selectAll, toggleSelect, someSelected, allSelected } = provideSelection(props, {\n      allItems: items,\n      currentPage: items,\n    })\n\n    const { isExpanded, toggleExpand } = provideExpanded(props)\n\n    const itemsWithoutGroups = computed(() => extractRows(items.value))\n\n    useOptions({\n      page,\n      itemsPerPage,\n      sortBy,\n      groupBy,\n      search: toRef(props, 'search'),\n    })\n\n    provide('v-data-table', {\n      toggleSort,\n      sortBy,\n    })\n\n    provideDefaults({\n      VDataTableRows: {\n        hideNoData: toRef(props, 'hideNoData'),\n        noDataText: toRef(props, 'noDataText'),\n        loading: toRef(props, 'loading'),\n        loadingText: toRef(props, 'loadingText'),\n      },\n    })\n\n    const slotProps = computed<VDataTableSlotProps<any>>(() => ({\n      page: page.value,\n      itemsPerPage: itemsPerPage.value,\n      sortBy: sortBy.value,\n      pageCount: pageCount.value,\n      toggleSort,\n      setItemsPerPage,\n      someSelected: someSelected.value,\n      allSelected: allSelected.value,\n      isSelected,\n      select,\n      selectAll,\n      toggleSelect,\n      isExpanded,\n      toggleExpand,\n      isGroupOpen,\n      toggleGroup,\n      items: itemsWithoutGroups.value.map(item => item.raw),\n      internalItems: itemsWithoutGroups.value,\n      groupedItems: flatItems.value,\n      columns: columns.value,\n      headers: headers.value,\n    }))\n\n    useRender(() => {\n      const dataTableFooterProps = VDataTableFooter.filterProps(props)\n      const dataTableHeadersProps = VDataTableHeaders.filterProps(props)\n      const dataTableRowsProps = VDataTableRows.filterProps(props)\n      const tableProps = VTable.filterProps(props)\n\n      return (\n        <VTable\n          class={[\n            'v-data-table',\n            {\n              'v-data-table--loading': props.loading,\n            },\n            props.class,\n          ]}\n          style={ props.style }\n          { ...tableProps }\n          fixedHeader={ props.fixedHeader || props.sticky }\n        >\n          {{\n            top: () => slots.top?.(slotProps.value),\n            default: () => slots.default ? slots.default(slotProps.value) : (\n              <>\n                { slots.colgroup?.(slotProps.value) }\n                { !props.hideDefaultHeader && (\n                  <thead key=\"thead\" class=\"v-data-table__thead\" role=\"rowgroup\">\n                    <VDataTableHeaders\n                      { ...dataTableHeadersProps }\n                      v-slots={ slots }\n                    />\n                  </thead>\n                )}\n                { slots.thead?.(slotProps.value) }\n                { !props.hideDefaultBody && (\n                  <tbody class=\"v-data-table__tbody\" role=\"rowgroup\">\n                    { slots['body.prepend']?.(slotProps.value) }\n                    { slots.body ? slots.body(slotProps.value) : (\n                      <VDataTableRows\n                        { ...attrs }\n                        { ...dataTableRowsProps }\n                        items={ flatItems.value }\n                        v-slots={ slots }\n                      />\n                    )}\n                    { slots['body.append']?.(slotProps.value) }\n                  </tbody>\n                )}\n                { slots.tbody?.(slotProps.value) }\n                { slots.tfoot?.(slotProps.value) }\n              </>\n            ),\n            bottom: () => slots.bottom ? slots.bottom(slotProps.value) : !props.hideDefaultFooter && (\n              <>\n                <VDivider />\n\n                <VDataTableFooter\n                  { ...dataTableFooterProps }\n                  v-slots={{\n                    prepend: slots['footer.prepend'],\n                  }}\n                />\n              </>\n            ),\n          }}\n        </VTable>\n      )\n    })\n  },\n})\n\nexport type VDataTableServer = InstanceType<typeof VDataTableServer>\n"]},"metadata":{},"sourceType":"module"}