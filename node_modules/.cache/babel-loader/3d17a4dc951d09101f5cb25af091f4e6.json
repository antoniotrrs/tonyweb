{"ast":null,"code":"import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\"; // Styles\n\nimport \"./VAppBar.css\"; // Components\n\nimport { makeVToolbarProps, VToolbar } from \"../VToolbar/VToolbar.js\"; // Composables\n\nimport { makeLayoutItemProps, useLayoutItem } from \"../../composables/layout.js\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.js\";\nimport { makeScrollProps, useScroll } from \"../../composables/scroll.js\";\nimport { useSsrBoot } from \"../../composables/ssrBoot.js\";\nimport { useToggleScope } from \"../../composables/toggleScope.js\"; // Utilities\n\nimport { computed, ref, shallowRef, toRef, watchEffect } from 'vue';\nimport { genericComponent, propsFactory, useRender } from \"../../util/index.js\"; // Types\n\nexport const makeVAppBarProps = propsFactory({\n  scrollBehavior: String,\n  modelValue: {\n    type: Boolean,\n    default: true\n  },\n  location: {\n    type: String,\n    default: 'top',\n    validator: value => ['top', 'bottom'].includes(value)\n  },\n  ...makeVToolbarProps(),\n  ...makeLayoutItemProps(),\n  ...makeScrollProps(),\n  height: {\n    type: [Number, String],\n    default: 64\n  }\n}, 'VAppBar');\nexport const VAppBar = genericComponent()({\n  name: 'VAppBar',\n  props: makeVAppBarProps(),\n  emits: {\n    'update:modelValue': value => true\n  },\n\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const vToolbarRef = ref();\n    const isActive = useProxiedModel(props, 'modelValue');\n    const scrollBehavior = computed(() => {\n      const behavior = new Set(props.scrollBehavior?.split(' ') ?? []);\n      return {\n        hide: behavior.has('hide'),\n        fullyHide: behavior.has('fully-hide'),\n        inverted: behavior.has('inverted'),\n        collapse: behavior.has('collapse'),\n        elevate: behavior.has('elevate'),\n        fadeImage: behavior.has('fade-image') // shrink: behavior.has('shrink'),\n\n      };\n    });\n    const canScroll = computed(() => {\n      const behavior = scrollBehavior.value;\n      return behavior.hide || behavior.fullyHide || behavior.inverted || behavior.collapse || behavior.elevate || behavior.fadeImage || // behavior.shrink ||\n      !isActive.value;\n    });\n    const {\n      currentScroll,\n      scrollThreshold,\n      isScrollingUp,\n      scrollRatio\n    } = useScroll(props, {\n      canScroll\n    });\n    const canHide = computed(() => scrollBehavior.value.hide || scrollBehavior.value.fullyHide);\n    const isCollapsed = computed(() => props.collapse || scrollBehavior.value.collapse && (scrollBehavior.value.inverted ? scrollRatio.value > 0 : scrollRatio.value === 0));\n    const isFlat = computed(() => props.flat || scrollBehavior.value.fullyHide && !isActive.value || scrollBehavior.value.elevate && (scrollBehavior.value.inverted ? currentScroll.value > 0 : currentScroll.value === 0));\n    const opacity = computed(() => scrollBehavior.value.fadeImage ? scrollBehavior.value.inverted ? 1 - scrollRatio.value : scrollRatio.value : undefined);\n    const height = computed(() => {\n      if (scrollBehavior.value.hide && scrollBehavior.value.inverted) return 0;\n      const height = vToolbarRef.value?.contentHeight ?? 0;\n      const extensionHeight = vToolbarRef.value?.extensionHeight ?? 0;\n      if (!canHide.value) return height + extensionHeight;\n      return currentScroll.value < scrollThreshold.value || scrollBehavior.value.fullyHide ? height + extensionHeight : height;\n    });\n    useToggleScope(computed(() => !!props.scrollBehavior), () => {\n      watchEffect(() => {\n        if (canHide.value) {\n          if (scrollBehavior.value.inverted) {\n            isActive.value = currentScroll.value > scrollThreshold.value;\n          } else {\n            isActive.value = isScrollingUp.value || currentScroll.value < scrollThreshold.value;\n          }\n        } else {\n          isActive.value = true;\n        }\n      });\n    });\n    const {\n      ssrBootStyles\n    } = useSsrBoot();\n    const {\n      layoutItemStyles\n    } = useLayoutItem({\n      id: props.name,\n      order: computed(() => parseInt(props.order, 10)),\n      position: toRef(props, 'location'),\n      layoutSize: height,\n      elementSize: shallowRef(undefined),\n      active: isActive,\n      absolute: toRef(props, 'absolute')\n    });\n    useRender(() => {\n      const toolbarProps = VToolbar.filterProps(props);\n      return _createVNode(VToolbar, _mergeProps({\n        \"ref\": vToolbarRef,\n        \"class\": ['v-app-bar', {\n          'v-app-bar--bottom': props.location === 'bottom'\n        }, props.class],\n        \"style\": [{ ...layoutItemStyles.value,\n          '--v-toolbar-image-opacity': opacity.value,\n          height: undefined,\n          ...ssrBootStyles.value\n        }, props.style]\n      }, toolbarProps, {\n        \"collapse\": isCollapsed.value,\n        \"flat\": isFlat.value\n      }), slots);\n    });\n    return {};\n  }\n\n});","map":{"version":3,"mappings":"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","names":["makeVToolbarProps","VToolbar","makeLayoutItemProps","useLayoutItem","useProxiedModel","makeScrollProps","useScroll","useSsrBoot","useToggleScope","computed","ref","shallowRef","toRef","watchEffect","genericComponent","propsFactory","useRender","makeVAppBarProps","scrollBehavior","String","modelValue","type","Boolean","default","location","validator","value","includes","height","Number","VAppBar","name","props","emits","setup","_ref","slots","vToolbarRef","isActive","behavior","Set","split","hide","has","fullyHide","inverted","collapse","elevate","fadeImage","canScroll","currentScroll","scrollThreshold","isScrollingUp","scrollRatio","canHide","isCollapsed","isFlat","flat","opacity","undefined","contentHeight","extensionHeight","ssrBootStyles","layoutItemStyles","id","order","parseInt","position","layoutSize","elementSize","active","absolute","toolbarProps","filterProps","class","style"],"sources":["../../../src/components/VAppBar/VAppBar.tsx"],"sourcesContent":["// Styles\nimport './VAppBar.sass'\n\n// Components\nimport { makeVToolbarProps, VToolbar } from '@/components/VToolbar/VToolbar'\n\n// Composables\nimport { makeLayoutItemProps, useLayoutItem } from '@/composables/layout'\nimport { useProxiedModel } from '@/composables/proxiedModel'\nimport { makeScrollProps, useScroll } from '@/composables/scroll'\nimport { useSsrBoot } from '@/composables/ssrBoot'\nimport { useToggleScope } from '@/composables/toggleScope'\n\n// Utilities\nimport { computed, ref, shallowRef, toRef, watchEffect } from 'vue'\nimport { genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { VToolbarSlots } from '@/components/VToolbar/VToolbar'\n\nexport const makeVAppBarProps = propsFactory({\n  scrollBehavior: String as PropType<'hide' | 'fully-hide' | 'inverted' | 'collapse' | 'elevate' | 'fade-image' | (string & {})>,\n  modelValue: {\n    type: Boolean,\n    default: true,\n  },\n  location: {\n    type: String as PropType<'top' | 'bottom'>,\n    default: 'top',\n    validator: (value: any) => ['top', 'bottom'].includes(value),\n  },\n\n  ...makeVToolbarProps(),\n  ...makeLayoutItemProps(),\n  ...makeScrollProps(),\n\n  height: {\n    type: [Number, String],\n    default: 64,\n  },\n}, 'VAppBar')\n\nexport const VAppBar = genericComponent<VToolbarSlots>()({\n  name: 'VAppBar',\n\n  props: makeVAppBarProps(),\n\n  emits: {\n    'update:modelValue': (value: boolean) => true,\n  },\n\n  setup (props, { slots }) {\n    const vToolbarRef = ref<VToolbar>()\n    const isActive = useProxiedModel(props, 'modelValue')\n    const scrollBehavior = computed(() => {\n      const behavior = new Set(props.scrollBehavior?.split(' ') ?? [])\n      return {\n        hide: behavior.has('hide'),\n        fullyHide: behavior.has('fully-hide'),\n        inverted: behavior.has('inverted'),\n        collapse: behavior.has('collapse'),\n        elevate: behavior.has('elevate'),\n        fadeImage: behavior.has('fade-image'),\n        // shrink: behavior.has('shrink'),\n      }\n    })\n    const canScroll = computed(() => {\n      const behavior = scrollBehavior.value\n      return (\n        behavior.hide ||\n        behavior.fullyHide ||\n        behavior.inverted ||\n        behavior.collapse ||\n        behavior.elevate ||\n        behavior.fadeImage ||\n        // behavior.shrink ||\n        !isActive.value\n      )\n    })\n    const {\n      currentScroll,\n      scrollThreshold,\n      isScrollingUp,\n      scrollRatio,\n    } = useScroll(props, { canScroll })\n\n    const canHide = computed(() => (\n      scrollBehavior.value.hide ||\n      scrollBehavior.value.fullyHide\n    ))\n    const isCollapsed = computed(() => props.collapse || (\n      scrollBehavior.value.collapse &&\n      (scrollBehavior.value.inverted ? scrollRatio.value > 0 : scrollRatio.value === 0)\n    ))\n    const isFlat = computed(() => props.flat || (\n      scrollBehavior.value.fullyHide &&\n      !isActive.value\n    ) || (\n      scrollBehavior.value.elevate &&\n      (scrollBehavior.value.inverted ? currentScroll.value > 0 : currentScroll.value === 0)\n    ))\n    const opacity = computed(() => (\n      scrollBehavior.value.fadeImage\n        ? (scrollBehavior.value.inverted ? 1 - scrollRatio.value : scrollRatio.value)\n        : undefined\n    ))\n    const height = computed(() => {\n      if (scrollBehavior.value.hide && scrollBehavior.value.inverted) return 0\n\n      const height = vToolbarRef.value?.contentHeight ?? 0\n      const extensionHeight = vToolbarRef.value?.extensionHeight ?? 0\n\n      if (!canHide.value) return (height + extensionHeight)\n\n      return currentScroll.value < scrollThreshold.value || scrollBehavior.value.fullyHide\n        ? (height + extensionHeight)\n        : height\n    })\n\n    useToggleScope(computed(() => !!props.scrollBehavior), () => {\n      watchEffect(() => {\n        if (canHide.value) {\n          if (scrollBehavior.value.inverted) {\n            isActive.value = currentScroll.value > scrollThreshold.value\n          } else {\n            isActive.value = isScrollingUp.value || (currentScroll.value < scrollThreshold.value)\n          }\n        } else {\n          isActive.value = true\n        }\n      })\n    })\n\n    const { ssrBootStyles } = useSsrBoot()\n    const { layoutItemStyles } = useLayoutItem({\n      id: props.name,\n      order: computed(() => parseInt(props.order, 10)),\n      position: toRef(props, 'location'),\n      layoutSize: height,\n      elementSize: shallowRef(undefined),\n      active: isActive,\n      absolute: toRef(props, 'absolute'),\n    })\n\n    useRender(() => {\n      const toolbarProps = VToolbar.filterProps(props)\n\n      return (\n        <VToolbar\n          ref={ vToolbarRef }\n          class={[\n            'v-app-bar',\n            {\n              'v-app-bar--bottom': props.location === 'bottom',\n            },\n            props.class,\n          ]}\n          style={[\n            {\n              ...layoutItemStyles.value,\n              '--v-toolbar-image-opacity': opacity.value,\n              height: undefined,\n              ...ssrBootStyles.value,\n            },\n            props.style,\n          ]}\n          { ...toolbarProps }\n          collapse={ isCollapsed.value }\n          flat={ isFlat.value }\n          v-slots={ slots }\n        />\n      )\n    })\n\n    return {}\n  },\n})\n\nexport type VAppBar = InstanceType<typeof VAppBar>\n"]},"metadata":{},"sourceType":"module"}