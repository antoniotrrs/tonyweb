{"ast":null,"code":"import { createVNode as _createVNode, mergeProps as _mergeProps, Fragment as _Fragment } from \"vue\"; // Components\n\nimport { VDataTableColumn } from \"./VDataTableColumn.js\";\nimport { VCheckboxBtn } from \"../VCheckbox/index.js\";\nimport { VChip } from \"../VChip/index.js\";\nimport { VIcon } from \"../VIcon/index.js\";\nimport { VSelect } from \"../VSelect/index.js\"; // Composables\n\nimport { useHeaders } from \"./composables/headers.js\";\nimport { useSelection } from \"./composables/select.js\";\nimport { useSort } from \"./composables/sort.js\";\nimport { useBackgroundColor } from \"../../composables/color.js\";\nimport { makeDisplayProps, useDisplay } from \"../../composables/display.js\";\nimport { IconValue } from \"../../composables/icons.js\";\nimport { LoaderSlot, makeLoaderProps, useLoader } from \"../../composables/loader.js\";\nimport { useLocale } from \"../../composables/locale.js\"; // Utilities\n\nimport { computed, mergeProps } from 'vue';\nimport { convertToUnit, genericComponent, propsFactory, useRender } from \"../../util/index.js\"; // Types\n\nexport const makeVDataTableHeadersProps = propsFactory({\n  color: String,\n  disableSort: Boolean,\n  fixedHeader: Boolean,\n  multiSort: Boolean,\n  sortAscIcon: {\n    type: IconValue,\n    default: '$sortAsc'\n  },\n  sortDescIcon: {\n    type: IconValue,\n    default: '$sortDesc'\n  },\n  headerProps: {\n    type: Object\n  },\n\n  /** @deprecated */\n  sticky: Boolean,\n  ...makeDisplayProps(),\n  ...makeLoaderProps()\n}, 'VDataTableHeaders');\nexport const VDataTableHeaders = genericComponent()({\n  name: 'VDataTableHeaders',\n  props: makeVDataTableHeadersProps(),\n\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const {\n      t\n    } = useLocale();\n    const {\n      toggleSort,\n      sortBy,\n      isSorted\n    } = useSort();\n    const {\n      someSelected,\n      allSelected,\n      selectAll,\n      showSelectAll\n    } = useSelection();\n    const {\n      columns,\n      headers\n    } = useHeaders();\n    const {\n      loaderClasses\n    } = useLoader(props);\n\n    function getFixedStyles(column, y) {\n      if (!(props.sticky || props.fixedHeader) && !column.fixed) return undefined;\n      return {\n        position: 'sticky',\n        left: column.fixed ? convertToUnit(column.fixedOffset) : undefined,\n        top: props.sticky || props.fixedHeader ? `calc(var(--v-table-header-height) * ${y})` : undefined\n      };\n    }\n\n    function getSortIcon(column) {\n      const item = sortBy.value.find(item => item.key === column.key);\n      if (!item) return props.sortAscIcon;\n      return item.order === 'asc' ? props.sortAscIcon : props.sortDescIcon;\n    }\n\n    const {\n      backgroundColorClasses,\n      backgroundColorStyles\n    } = useBackgroundColor(props, 'color');\n    const {\n      displayClasses,\n      mobile\n    } = useDisplay(props);\n    const slotProps = computed(() => ({\n      headers: headers.value,\n      columns: columns.value,\n      toggleSort,\n      isSorted,\n      sortBy: sortBy.value,\n      someSelected: someSelected.value,\n      allSelected: allSelected.value,\n      selectAll,\n      getSortIcon\n    }));\n    const headerCellClasses = computed(() => ['v-data-table__th', {\n      'v-data-table__th--sticky': props.sticky || props.fixedHeader\n    }, displayClasses.value, loaderClasses.value]);\n\n    const VDataTableHeaderCell = _ref2 => {\n      let {\n        column,\n        x,\n        y\n      } = _ref2;\n      const noPadding = column.key === 'data-table-select' || column.key === 'data-table-expand';\n      const headerProps = mergeProps(props.headerProps ?? {}, column.headerProps ?? {});\n      return _createVNode(VDataTableColumn, _mergeProps({\n        \"tag\": \"th\",\n        \"align\": column.align,\n        \"class\": [{\n          'v-data-table__th--sortable': column.sortable && !props.disableSort,\n          'v-data-table__th--sorted': isSorted(column),\n          'v-data-table__th--fixed': column.fixed\n        }, ...headerCellClasses.value],\n        \"style\": {\n          width: convertToUnit(column.width),\n          minWidth: convertToUnit(column.minWidth),\n          maxWidth: convertToUnit(column.maxWidth),\n          ...getFixedStyles(column, y)\n        },\n        \"colspan\": column.colspan,\n        \"rowspan\": column.rowspan,\n        \"onClick\": column.sortable ? () => toggleSort(column) : undefined,\n        \"fixed\": column.fixed,\n        \"nowrap\": column.nowrap,\n        \"lastFixed\": column.lastFixed,\n        \"noPadding\": noPadding\n      }, headerProps), {\n        default: () => {\n          const columnSlotName = `header.${column.key}`;\n          const columnSlotProps = {\n            column,\n            selectAll,\n            isSorted,\n            toggleSort,\n            sortBy: sortBy.value,\n            someSelected: someSelected.value,\n            allSelected: allSelected.value,\n            getSortIcon\n          };\n          if (slots[columnSlotName]) return slots[columnSlotName](columnSlotProps);\n\n          if (column.key === 'data-table-select') {\n            return slots['header.data-table-select']?.(columnSlotProps) ?? (showSelectAll.value && _createVNode(VCheckboxBtn, {\n              \"modelValue\": allSelected.value,\n              \"indeterminate\": someSelected.value && !allSelected.value,\n              \"onUpdate:modelValue\": selectAll\n            }, null));\n          }\n\n          return _createVNode(\"div\", {\n            \"class\": \"v-data-table-header__content\"\n          }, [_createVNode(\"span\", null, [column.title]), column.sortable && !props.disableSort && _createVNode(VIcon, {\n            \"key\": \"icon\",\n            \"class\": \"v-data-table-header__sort-icon\",\n            \"icon\": getSortIcon(column)\n          }, null), props.multiSort && isSorted(column) && _createVNode(\"div\", {\n            \"key\": \"badge\",\n            \"class\": ['v-data-table-header__sort-badge', ...backgroundColorClasses.value],\n            \"style\": backgroundColorStyles.value\n          }, [sortBy.value.findIndex(x => x.key === column.key) + 1])]);\n        }\n      });\n    };\n\n    const VDataTableMobileHeaderCell = () => {\n      const headerProps = mergeProps(props.headerProps ?? {} ?? {});\n      const displayItems = computed(() => {\n        return columns.value.filter(column => column?.sortable && !props.disableSort);\n      });\n      const appendIcon = computed(() => {\n        const showSelectColumn = columns.value.find(column => column.key === 'data-table-select');\n        if (showSelectColumn == null) return;\n        return allSelected.value ? '$checkboxOn' : someSelected.value ? '$checkboxIndeterminate' : '$checkboxOff';\n      });\n      return _createVNode(VDataTableColumn, _mergeProps({\n        \"tag\": \"th\",\n        \"class\": [...headerCellClasses.value],\n        \"colspan\": headers.value.length + 1\n      }, headerProps), {\n        default: () => [_createVNode(\"div\", {\n          \"class\": \"v-data-table-header__content\"\n        }, [_createVNode(VSelect, {\n          \"chips\": true,\n          \"class\": \"v-data-table__td-sort-select\",\n          \"clearable\": true,\n          \"density\": \"default\",\n          \"items\": displayItems.value,\n          \"label\": t('$vuetify.dataTable.sortBy'),\n          \"multiple\": props.multiSort,\n          \"variant\": \"underlined\",\n          \"onClick:clear\": () => sortBy.value = [],\n          \"appendIcon\": appendIcon.value,\n          \"onClick:append\": () => selectAll(!allSelected.value)\n        }, { ...slots,\n          chip: props => _createVNode(VChip, {\n            \"onClick\": props.item.raw?.sortable ? () => toggleSort(props.item.raw) : undefined,\n            \"onMousedown\": e => {\n              e.preventDefault();\n              e.stopPropagation();\n            }\n          }, {\n            default: () => [props.item.title, _createVNode(VIcon, {\n              \"class\": ['v-data-table__td-sort-icon', isSorted(props.item.raw) && 'v-data-table__td-sort-icon-active'],\n              \"icon\": getSortIcon(props.item.raw),\n              \"size\": \"small\"\n            }, null)]\n          })\n        })])]\n      });\n    };\n\n    useRender(() => {\n      return mobile.value ? _createVNode(\"tr\", null, [_createVNode(VDataTableMobileHeaderCell, null, null)]) : _createVNode(_Fragment, null, [slots.headers ? slots.headers(slotProps.value) : headers.value.map((row, y) => _createVNode(\"tr\", null, [row.map((column, x) => _createVNode(VDataTableHeaderCell, {\n        \"column\": column,\n        \"x\": x,\n        \"y\": y\n      }, null))])), props.loading && _createVNode(\"tr\", {\n        \"class\": \"v-data-table-progress\"\n      }, [_createVNode(\"th\", {\n        \"colspan\": columns.value.length\n      }, [_createVNode(LoaderSlot, {\n        \"name\": \"v-data-table-progress\",\n        \"absolute\": true,\n        \"active\": true,\n        \"color\": typeof props.loading === 'boolean' ? undefined : props.loading,\n        \"indeterminate\": true\n      }, {\n        default: slots.loader\n      })])])]);\n    });\n  }\n\n});","map":{"version":3,"mappings":"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","names":["VDataTableColumn","VCheckboxBtn","VChip","VIcon","VSelect","useHeaders","useSelection","useSort","useBackgroundColor","makeDisplayProps","useDisplay","IconValue","LoaderSlot","makeLoaderProps","useLoader","useLocale","computed","mergeProps","convertToUnit","genericComponent","propsFactory","useRender","makeVDataTableHeadersProps","color","String","disableSort","Boolean","fixedHeader","multiSort","sortAscIcon","type","default","sortDescIcon","headerProps","Object","sticky","VDataTableHeaders","name","props","setup","_ref","slots","t","toggleSort","sortBy","isSorted","someSelected","allSelected","selectAll","showSelectAll","columns","headers","loaderClasses","getFixedStyles","column","y","fixed","undefined","position","left","fixedOffset","top","getSortIcon","item","value","find","key","order","backgroundColorClasses","backgroundColorStyles","displayClasses","mobile","slotProps","headerCellClasses","VDataTableHeaderCell","_ref2","x","noPadding","align","sortable","width","minWidth","maxWidth","colspan","rowspan","nowrap","lastFixed","columnSlotName","columnSlotProps","_createVNode","title","findIndex","VDataTableMobileHeaderCell","displayItems","filter","appendIcon","showSelectColumn","length","onClick:clear","onClick:append","chip","raw","e","preventDefault","stopPropagation","map","row","loading","loader"],"sources":["../../../src/components/VDataTable/VDataTableHeaders.tsx"],"sourcesContent":["// Components\nimport { VDataTableColumn } from './VDataTableColumn'\nimport { VCheckboxBtn } from '@/components/VCheckbox'\nimport { VChip } from '@/components/VChip'\nimport { VIcon } from '@/components/VIcon'\nimport { VSelect } from '@/components/VSelect'\n\n// Composables\nimport { useHeaders } from './composables/headers'\nimport { useSelection } from './composables/select'\nimport { useSort } from './composables/sort'\nimport { useBackgroundColor } from '@/composables/color'\nimport { makeDisplayProps, useDisplay } from '@/composables/display'\nimport { IconValue } from '@/composables/icons'\nimport { LoaderSlot, makeLoaderProps, useLoader } from '@/composables/loader'\nimport { useLocale } from '@/composables/locale'\n\n// Utilities\nimport { computed, mergeProps } from 'vue'\nimport { convertToUnit, genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { CSSProperties, PropType, UnwrapRef } from 'vue'\nimport type { provideSelection } from './composables/select'\nimport type { provideSort } from './composables/sort'\nimport type { InternalDataTableHeader } from './types'\nimport type { ItemProps } from '@/composables/list-items'\nimport type { LoaderSlotProps } from '@/composables/loader'\n\nexport type HeadersSlotProps = {\n  headers: InternalDataTableHeader[][]\n  columns: InternalDataTableHeader[]\n  sortBy: UnwrapRef<ReturnType<typeof provideSort>['sortBy']>\n  someSelected: UnwrapRef<ReturnType<typeof provideSelection>['someSelected']>\n  allSelected: UnwrapRef<ReturnType<typeof provideSelection>['allSelected']>\n  toggleSort: ReturnType<typeof provideSort>['toggleSort']\n  selectAll: ReturnType<typeof provideSelection>['selectAll']\n  getSortIcon: (column: InternalDataTableHeader) => IconValue\n  isSorted: ReturnType<typeof provideSort>['isSorted']\n}\n\nexport type VDataTableHeaderCellColumnSlotProps = {\n  column: InternalDataTableHeader\n  selectAll: ReturnType<typeof provideSelection>['selectAll']\n  isSorted: ReturnType<typeof provideSort>['isSorted']\n  toggleSort: ReturnType<typeof provideSort>['toggleSort']\n  sortBy: UnwrapRef<ReturnType<typeof provideSort>['sortBy']>\n  someSelected: UnwrapRef<ReturnType<typeof provideSelection>['someSelected']>\n  allSelected: UnwrapRef<ReturnType<typeof provideSelection>['allSelected']>\n  getSortIcon: (column: InternalDataTableHeader) => IconValue\n}\n\nexport type VDataTableHeadersSlots = {\n  headers: HeadersSlotProps\n  loader: LoaderSlotProps\n  'header.data-table-select': VDataTableHeaderCellColumnSlotProps\n  'header.data-table-expand': VDataTableHeaderCellColumnSlotProps\n} & { [key: `header.${string}`]: VDataTableHeaderCellColumnSlotProps }\n\nexport const makeVDataTableHeadersProps = propsFactory({\n  color: String,\n  disableSort: Boolean,\n  fixedHeader: Boolean,\n  multiSort: Boolean,\n  sortAscIcon: {\n    type: IconValue,\n    default: '$sortAsc',\n  },\n  sortDescIcon: {\n    type: IconValue,\n    default: '$sortDesc',\n  },\n  headerProps: {\n    type: Object as PropType<Record<string, any>>,\n  },\n\n  /** @deprecated */\n  sticky: Boolean,\n\n  ...makeDisplayProps(),\n  ...makeLoaderProps(),\n}, 'VDataTableHeaders')\n\nexport const VDataTableHeaders = genericComponent<VDataTableHeadersSlots>()({\n  name: 'VDataTableHeaders',\n\n  props: makeVDataTableHeadersProps(),\n\n  setup (props, { slots }) {\n    const { t } = useLocale()\n    const { toggleSort, sortBy, isSorted } = useSort()\n    const { someSelected, allSelected, selectAll, showSelectAll } = useSelection()\n    const { columns, headers } = useHeaders()\n    const { loaderClasses } = useLoader(props)\n\n    function getFixedStyles (column: InternalDataTableHeader, y: number): CSSProperties | undefined {\n      if (!(props.sticky || props.fixedHeader) && !column.fixed) return undefined\n\n      return {\n        position: 'sticky',\n        left: column.fixed ? convertToUnit(column.fixedOffset) : undefined,\n        top: (props.sticky || props.fixedHeader) ? `calc(var(--v-table-header-height) * ${y})` : undefined,\n      }\n    }\n\n    function getSortIcon (column: InternalDataTableHeader) {\n      const item = sortBy.value.find(item => item.key === column.key)\n\n      if (!item) return props.sortAscIcon\n\n      return item.order === 'asc' ? props.sortAscIcon : props.sortDescIcon\n    }\n\n    const { backgroundColorClasses, backgroundColorStyles } = useBackgroundColor(props, 'color')\n\n    const { displayClasses, mobile } = useDisplay(props)\n\n    const slotProps = computed(() => ({\n      headers: headers.value,\n      columns: columns.value,\n      toggleSort,\n      isSorted,\n      sortBy: sortBy.value,\n      someSelected: someSelected.value,\n      allSelected: allSelected.value,\n      selectAll,\n      getSortIcon,\n    } satisfies HeadersSlotProps))\n\n    const headerCellClasses = computed(() => ([\n      'v-data-table__th',\n      {\n        'v-data-table__th--sticky': (props.sticky || props.fixedHeader),\n      },\n      displayClasses.value,\n      loaderClasses.value,\n    ]))\n\n    const VDataTableHeaderCell = ({ column, x, y }: { column: InternalDataTableHeader, x: number, y: number }) => {\n      const noPadding = column.key === 'data-table-select' || column.key === 'data-table-expand'\n      const headerProps = mergeProps(props.headerProps ?? {}, column.headerProps ?? {})\n\n      return (\n        <VDataTableColumn\n          tag=\"th\"\n          align={ column.align }\n          class={[\n            {\n              'v-data-table__th--sortable': column.sortable && !props.disableSort,\n              'v-data-table__th--sorted': isSorted(column),\n              'v-data-table__th--fixed': column.fixed,\n            },\n            ...headerCellClasses.value,\n          ]}\n          style={{\n            width: convertToUnit(column.width),\n            minWidth: convertToUnit(column.minWidth),\n            maxWidth: convertToUnit(column.maxWidth),\n            ...getFixedStyles(column, y),\n          }}\n          colspan={ column.colspan }\n          rowspan={ column.rowspan }\n          onClick={ column.sortable ? () => toggleSort(column) : undefined }\n          fixed={ column.fixed }\n          nowrap={ column.nowrap }\n          lastFixed={ column.lastFixed }\n          noPadding={ noPadding }\n          { ...headerProps }\n        >\n          {{\n            default: () => {\n              const columnSlotName = `header.${column.key}` as const\n              const columnSlotProps: VDataTableHeaderCellColumnSlotProps = {\n                column,\n                selectAll,\n                isSorted,\n                toggleSort,\n                sortBy: sortBy.value,\n                someSelected: someSelected.value,\n                allSelected: allSelected.value,\n                getSortIcon,\n              }\n\n              if (slots[columnSlotName]) return slots[columnSlotName]!(columnSlotProps)\n\n              if (column.key === 'data-table-select') {\n                return slots['header.data-table-select']?.(columnSlotProps) ?? (showSelectAll.value && (\n                  <VCheckboxBtn\n                    modelValue={ allSelected.value }\n                    indeterminate={ someSelected.value && !allSelected.value }\n                    onUpdate:modelValue={ selectAll }\n                  />\n                ))\n              }\n\n              return (\n                <div class=\"v-data-table-header__content\">\n                  <span>{ column.title }</span>\n                  { column.sortable && !props.disableSort && (\n                    <VIcon\n                      key=\"icon\"\n                      class=\"v-data-table-header__sort-icon\"\n                      icon={ getSortIcon(column) }\n                    />\n                  )}\n                  { props.multiSort && isSorted(column) && (\n                    <div\n                      key=\"badge\"\n                      class={[\n                        'v-data-table-header__sort-badge',\n                        ...backgroundColorClasses.value,\n                      ]}\n                      style={ backgroundColorStyles.value }\n                    >\n                      { sortBy.value.findIndex(x => x.key === column.key) + 1 }\n                    </div>\n                  )}\n                </div>\n              )\n            },\n          }}\n        </VDataTableColumn>\n      )\n    }\n\n    const VDataTableMobileHeaderCell = () => {\n      const headerProps = mergeProps(props.headerProps ?? {} ?? {})\n\n      const displayItems = computed<ItemProps['items']>(() => {\n        return columns.value.filter(column => column?.sortable && !props.disableSort)\n      })\n\n      const appendIcon = computed(() => {\n        const showSelectColumn = columns.value.find(column => column.key === 'data-table-select')\n\n        if (showSelectColumn == null) return\n\n        return allSelected.value ? '$checkboxOn' : someSelected.value ? '$checkboxIndeterminate' : '$checkboxOff'\n      })\n\n      return (\n        <VDataTableColumn\n          tag=\"th\"\n          class={[\n            ...headerCellClasses.value,\n          ]}\n          colspan={ headers.value.length + 1 }\n          { ...headerProps }\n        >\n          <div class=\"v-data-table-header__content\">\n            <VSelect\n              chips\n              class=\"v-data-table__td-sort-select\"\n              clearable\n              density=\"default\"\n              items={ displayItems.value }\n              label={ t('$vuetify.dataTable.sortBy') }\n              multiple={ props.multiSort }\n              variant=\"underlined\"\n              onClick:clear={ () => sortBy.value = [] }\n              appendIcon={ appendIcon.value }\n              onClick:append={ () => selectAll(!allSelected.value) }\n            >\n              {{\n                ...slots,\n                chip: props => (\n                  <VChip\n                    onClick={ props.item.raw?.sortable ? () => toggleSort(props.item.raw) : undefined }\n                    onMousedown={ (e: MouseEvent) => {\n                      e.preventDefault()\n                      e.stopPropagation()\n                    }}\n                  >\n                    { props.item.title }\n                    <VIcon\n                      class={[\n                        'v-data-table__td-sort-icon',\n                        isSorted(props.item.raw) && 'v-data-table__td-sort-icon-active',\n                      ]}\n                      icon={ getSortIcon(props.item.raw) }\n                      size=\"small\"\n                    />\n                  </VChip>\n                ),\n              }}\n            </VSelect>\n          </div>\n        </VDataTableColumn>\n      )\n    }\n\n    useRender(() => {\n      return mobile.value ? (\n        <tr>\n          <VDataTableMobileHeaderCell />\n        </tr>\n      ) : (\n        <>\n          { slots.headers\n            ? slots.headers(slotProps.value)\n            : headers.value.map((row, y) => (\n              <tr>\n                { row.map((column, x) => (\n                  <VDataTableHeaderCell column={ column } x={ x } y={ y } />\n                ))}\n              </tr>\n            ))}\n\n          { props.loading && (\n            <tr class=\"v-data-table-progress\">\n              <th colspan={ columns.value.length }>\n                <LoaderSlot\n                  name=\"v-data-table-progress\"\n                  absolute\n                  active\n                  color={ typeof props.loading === 'boolean' ? undefined : props.loading }\n                  indeterminate\n                  v-slots={{ default: slots.loader }}\n                />\n              </th>\n            </tr>\n          )}\n        </>\n      )\n    })\n  },\n})\n\nexport type VDataTableHeaders = InstanceType<typeof VDataTableHeaders>\n"]},"metadata":{},"sourceType":"module"}