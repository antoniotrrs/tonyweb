{"ast":null,"code":"import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\"; // Styles\n\nimport \"./VDatePickerYears.css\"; // Components\n\nimport { VBtn } from \"../VBtn/index.js\"; // Composables\n\nimport { useDate } from \"../../composables/date/index.js\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.js\"; // Utilities\n\nimport { computed, nextTick, onMounted, watchEffect } from 'vue';\nimport { convertToUnit, createRange, genericComponent, propsFactory, templateRef, useRender } from \"../../util/index.js\"; // Types\n// Types\n\nexport const makeVDatePickerYearsProps = propsFactory({\n  color: String,\n  height: [String, Number],\n  min: null,\n  max: null,\n  modelValue: Number\n}, 'VDatePickerYears');\nexport const VDatePickerYears = genericComponent()({\n  name: 'VDatePickerYears',\n  props: makeVDatePickerYearsProps(),\n  emits: {\n    'update:modelValue': year => true\n  },\n\n  setup(props, _ref) {\n    let {\n      emit,\n      slots\n    } = _ref;\n    const adapter = useDate();\n    const model = useProxiedModel(props, 'modelValue');\n    const years = computed(() => {\n      const year = adapter.getYear(adapter.date());\n      let min = year - 100;\n      let max = year + 52;\n\n      if (props.min) {\n        min = adapter.getYear(adapter.date(props.min));\n      }\n\n      if (props.max) {\n        max = adapter.getYear(adapter.date(props.max));\n      }\n\n      let date = adapter.startOfYear(adapter.date());\n      date = adapter.setYear(date, min);\n      return createRange(max - min + 1, min).map(i => {\n        const text = adapter.format(date, 'year');\n        date = adapter.setYear(date, adapter.getYear(date) + 1);\n        return {\n          text,\n          value: i\n        };\n      });\n    });\n    watchEffect(() => {\n      model.value = model.value ?? adapter.getYear(adapter.date());\n    });\n    const yearRef = templateRef();\n    onMounted(async () => {\n      await nextTick();\n      yearRef.el?.scrollIntoView({\n        block: 'center'\n      });\n    });\n    useRender(() => _createVNode(\"div\", {\n      \"class\": \"v-date-picker-years\",\n      \"style\": {\n        height: convertToUnit(props.height)\n      }\n    }, [_createVNode(\"div\", {\n      \"class\": \"v-date-picker-years__content\"\n    }, [years.value.map((year, i) => {\n      const btnProps = {\n        ref: model.value === year.value ? yearRef : undefined,\n        active: model.value === year.value,\n        color: model.value === year.value ? props.color : undefined,\n        rounded: true,\n        text: year.text,\n        variant: model.value === year.value ? 'flat' : 'text',\n        onClick: () => {\n          if (model.value === year.value) {\n            emit('update:modelValue', model.value);\n            return;\n          }\n\n          model.value = year.value;\n        }\n      };\n      return slots.year?.({\n        year,\n        i,\n        props: btnProps\n      }) ?? _createVNode(VBtn, _mergeProps({\n        \"key\": \"month\"\n      }, btnProps), null);\n    })])]));\n    return {};\n  }\n\n});","map":{"version":3,"mappings":"8EAAA;;AACA,gC,CAEA;;AAAA,SACSA,IADT,QACa,kBADb,C,CAGA;;AAAA,SACSC,OADT,QACgB,iCADhB;AACgB,SACPC,eADO,QACQ,mCADR,C,CAGhB;;AACA,SAASC,QAAT,EAAmBC,QAAnB,EAA6BC,SAA7B,EAAwCC,WAAxC,QAA2D,KAA3D;AAAgE,SACvDC,aADuD,EACxCC,WADwC,EAC3BC,gBAD2B,EACTC,YADS,EACKC,WADL,EACkBC,SADlB,QAC2B,qBAD3B,C,CAGhE;AAGA;;AAmBA,OAAO,MAAMC,yBAAyB,GAAGH,YAAY,CAAC;AACpDI,OAAK,EAAEC,MAD6C;AAEpDC,QAAM,EAAE,CAACD,MAAD,EAASE,MAAT,CAF4C;AAGpDC,KAAG,EAAE,IAH+C;AAIpDC,KAAG,EAAE,IAJ+C;AAKpDC,YAAU,EAAEH;AALwC,CAAD,EAMlD,kBANkD,CAA9C;AAQP,OAAO,MAAMI,gBAAgB,GAAGZ,gBAAgB,GAA0B;AACxEa,MAAI,EAAE,kBADkE;AAGxEC,OAAK,EAAEV,yBAAyB,EAHwC;AAKxEW,OAAK,EAAE;AACL,yBAAsBC,IAAY,IAAK;AADlC,GALiE;;AASxEC,OAAKA,CAAEH,KAAFG,EAAOC,IAAPD,EAA0B;AAAA,QAAjB;AAAEE,UAAF;AAAQC;AAAR,QAAeF,IAAE;AAC7B,UAAMG,OAAO,GAAG7B,OAAO,EAAvB;AACA,UAAM8B,KAAK,GAAG7B,eAAe,CAACqB,KAAD,EAAQ,YAAR,CAA7B;AACA,UAAMS,KAAK,GAAG7B,QAAQ,CAAC,MAAM;AAC3B,YAAMsB,IAAI,GAAGK,OAAO,CAACG,OAARH,CAAgBA,OAAO,CAACI,IAARJ,EAAhBA,CAAb;AAEA,UAAIZ,GAAG,GAAGO,IAAI,GAAG,GAAjB;AACA,UAAIN,GAAG,GAAGM,IAAI,GAAG,EAAjB;;AAEA,UAAIF,KAAK,CAACL,GAAV,EAAe;AACbA,WAAG,GAAGY,OAAO,CAACG,OAARH,CAAgBA,OAAO,CAACI,IAARJ,CAAaP,KAAK,CAACL,GAAnBY,CAAhBA,CAANZ;AACF;;AAEA,UAAIK,KAAK,CAACJ,GAAV,EAAe;AACbA,WAAG,GAAGW,OAAO,CAACG,OAARH,CAAgBA,OAAO,CAACI,IAARJ,CAAaP,KAAK,CAACJ,GAAnBW,CAAhBA,CAANX;AACF;;AAEA,UAAIe,IAAI,GAAGJ,OAAO,CAACK,WAARL,CAAoBA,OAAO,CAACI,IAARJ,EAApBA,CAAX;AAEAI,UAAI,GAAGJ,OAAO,CAACM,OAARN,CAAgBI,IAAhBJ,EAAsBZ,GAAtBY,CAAPI;AAEA,aAAO1B,WAAW,CAACW,GAAG,GAAGD,GAANC,GAAY,CAAb,EAAgBD,GAAhB,CAAXV,CAAgC6B,GAAhC7B,CAAoC8B,CAAC,IAAI;AAC9C,cAAMC,IAAI,GAAGT,OAAO,CAACU,MAARV,CAAeI,IAAfJ,EAAqB,MAArBA,CAAb;AACAI,YAAI,GAAGJ,OAAO,CAACM,OAARN,CAAgBI,IAAhBJ,EAAsBA,OAAO,CAACG,OAARH,CAAgBI,IAAhBJ,IAAwB,CAA9CA,CAAPI;AAEA,eAAO;AACLK,cADK;AAELE,eAAK,EAAEH;AAFF,SAAP;AAID,OARM9B,CAAP;AASD,KA3BqB,CAAtB;AA6BAF,eAAW,CAAC,MAAM;AAChByB,WAAK,CAACU,KAANV,GAAcA,KAAK,CAACU,KAANV,IAAeD,OAAO,CAACG,OAARH,CAAgBA,OAAO,CAACI,IAARJ,EAAhBA,CAA7BC;AACD,KAFU,CAAXzB;AAIA,UAAMoC,OAAO,GAAG/B,WAAW,EAA3B;AAEAN,aAAS,CAAC,YAAY;AACpB,YAAMD,QAAQ,EAAd;AACAsC,aAAO,CAACC,EAARD,EAAYE,cAAZF,CAA2B;AAAEG,aAAK,EAAE;AAAT,OAA3BH;AACD,KAHQ,CAATrC;AAKAO,aAAS,CAAC;AAAA;AAAA,eAGC;AACLI,cAAM,EAAET,aAAa,CAACgB,KAAK,CAACP,MAAP;AADhB;AAHD,OAKL;AAAA;AAAA,QAGGgB,KAAK,CAACS,KAANT,CAAYK,GAAZL,CAAgB,CAACP,IAAD,EAAOa,CAAP,KAAa;AAC7B,YAAMQ,QAAQ,GAAG;AACfC,WAAG,EAAEhB,KAAK,CAACU,KAANV,KAAgBN,IAAI,CAACgB,KAArBV,GAA6BW,OAA7BX,GAAuCiB,SAD7B;AAEfC,cAAM,EAAElB,KAAK,CAACU,KAANV,KAAgBN,IAAI,CAACgB,KAFd;AAGf3B,aAAK,EAAEiB,KAAK,CAACU,KAANV,KAAgBN,IAAI,CAACgB,KAArBV,GAA6BR,KAAK,CAACT,KAAnCiB,GAA2CiB,SAHnC;AAIfE,eAAO,EAAE,IAJM;AAKfX,YAAI,EAAEd,IAAI,CAACc,IALI;AAMfY,eAAO,EAAEpB,KAAK,CAACU,KAANV,KAAgBN,IAAI,CAACgB,KAArBV,GAA6B,MAA7BA,GAAsC,MANhC;AAOfqB,eAAO,EAAEA,MAAM;AACb,cAAIrB,KAAK,CAACU,KAANV,KAAgBN,IAAI,CAACgB,KAAzB,EAAgC;AAC9Bb,gBAAI,CAAC,mBAAD,EAAsBG,KAAK,CAACU,KAA5B,CAAJb;AACA;AACF;;AACAG,eAAK,CAACU,KAANV,GAAcN,IAAI,CAACgB,KAAnBV;AACF;AAbe,OAAjB;AAgBA,aAAOF,KAAK,CAACJ,IAANI,GAAa;AAClBJ,YADkB;AAElBa,SAFkB;AAGlBf,aAAK,EAAEuB;AAHW,OAAbjB,KAILwB;AAAA;AAAA,SAGOP,QAHP,GAGe,IAHf,CAJF;AAUD,KA3BCd,CAHH,GALK,CAAD,CAATpB;AAwCA,WAAO,EAAP;AACF;;AA7FwE,CAA1B,CAAzC","names":["VBtn","useDate","useProxiedModel","computed","nextTick","onMounted","watchEffect","convertToUnit","createRange","genericComponent","propsFactory","templateRef","useRender","makeVDatePickerYearsProps","color","String","height","Number","min","max","modelValue","VDatePickerYears","name","props","emits","year","setup","_ref","emit","slots","adapter","model","years","getYear","date","startOfYear","setYear","map","i","text","format","value","yearRef","el","scrollIntoView","block","btnProps","ref","undefined","active","rounded","variant","onClick","_createVNode"],"sources":["../../../src/components/VDatePicker/VDatePickerYears.tsx"],"sourcesContent":["// Styles\nimport './VDatePickerYears.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\n\n// Composables\nimport { useDate } from '@/composables/date'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { computed, nextTick, onMounted, watchEffect } from 'vue'\nimport { convertToUnit, createRange, genericComponent, propsFactory, templateRef, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\n\n// Types\nexport type VDatePickerYearsSlots = {\n  year: {\n    year: {\n      text: string\n      value: number\n    }\n    i: number\n    props: {\n      active: boolean\n      color?: string\n      rounded: boolean\n      text: string\n      variant: 'flat' | 'text'\n      onClick: () => void\n    }\n  }\n}\n\nexport const makeVDatePickerYearsProps = propsFactory({\n  color: String,\n  height: [String, Number],\n  min: null as any as PropType<unknown>,\n  max: null as any as PropType<unknown>,\n  modelValue: Number,\n}, 'VDatePickerYears')\n\nexport const VDatePickerYears = genericComponent<VDatePickerYearsSlots>()({\n  name: 'VDatePickerYears',\n\n  props: makeVDatePickerYearsProps(),\n\n  emits: {\n    'update:modelValue': (year: number) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const adapter = useDate()\n    const model = useProxiedModel(props, 'modelValue')\n    const years = computed(() => {\n      const year = adapter.getYear(adapter.date())\n\n      let min = year - 100\n      let max = year + 52\n\n      if (props.min) {\n        min = adapter.getYear(adapter.date(props.min))\n      }\n\n      if (props.max) {\n        max = adapter.getYear(adapter.date(props.max))\n      }\n\n      let date = adapter.startOfYear(adapter.date())\n\n      date = adapter.setYear(date, min)\n\n      return createRange(max - min + 1, min).map(i => {\n        const text = adapter.format(date, 'year')\n        date = adapter.setYear(date, adapter.getYear(date) + 1)\n\n        return {\n          text,\n          value: i,\n        }\n      })\n    })\n\n    watchEffect(() => {\n      model.value = model.value ?? adapter.getYear(adapter.date())\n    })\n\n    const yearRef = templateRef()\n\n    onMounted(async () => {\n      await nextTick()\n      yearRef.el?.scrollIntoView({ block: 'center' })\n    })\n\n    useRender(() => (\n      <div\n        class=\"v-date-picker-years\"\n        style={{\n          height: convertToUnit(props.height),\n        }}\n      >\n        <div class=\"v-date-picker-years__content\">\n          { years.value.map((year, i) => {\n            const btnProps = {\n              ref: model.value === year.value ? yearRef : undefined,\n              active: model.value === year.value,\n              color: model.value === year.value ? props.color : undefined,\n              rounded: true,\n              text: year.text,\n              variant: model.value === year.value ? 'flat' : 'text',\n              onClick: () => {\n                if (model.value === year.value) {\n                  emit('update:modelValue', model.value)\n                  return\n                }\n                model.value = year.value\n              },\n            } as const\n\n            return slots.year?.({\n              year,\n              i,\n              props: btnProps,\n            }) ?? (\n              <VBtn\n                key=\"month\"\n                { ...btnProps }\n              />\n            )\n          })}\n        </div>\n      </div>\n    ))\n\n    return {}\n  },\n})\n\nexport type VDatePickerYears = InstanceType<typeof VDatePickerYears>\n"]},"metadata":{},"sourceType":"module"}