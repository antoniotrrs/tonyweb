{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/web.structured-clone.js\";\nimport { Fragment as _Fragment, mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\"; // Components\n\nimport { VBtn } from \"../VBtn/index.js\"; // Composables\n\nimport { useLocale } from \"../../composables/index.js\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.js\"; // Utilities\n\nimport { computed, ref, toRaw, watchEffect } from 'vue';\nimport { deepEqual, genericComponent, propsFactory, useRender } from \"../../util/index.js\"; // Types\n\nexport const makeVConfirmEditProps = propsFactory({\n  modelValue: null,\n  color: String,\n  cancelText: {\n    type: String,\n    default: '$vuetify.confirmEdit.cancel'\n  },\n  okText: {\n    type: String,\n    default: '$vuetify.confirmEdit.ok'\n  },\n  disabled: {\n    type: [Boolean, Array],\n    default: undefined\n  },\n  hideActions: Boolean\n}, 'VConfirmEdit');\nexport const VConfirmEdit = genericComponent()({\n  name: 'VConfirmEdit',\n  props: makeVConfirmEditProps(),\n  emits: {\n    cancel: () => true,\n    save: value => true,\n    'update:modelValue': value => true\n  },\n\n  setup(props, _ref) {\n    let {\n      emit,\n      slots\n    } = _ref;\n    const model = useProxiedModel(props, 'modelValue');\n    const internalModel = ref();\n    watchEffect(() => {\n      internalModel.value = structuredClone(toRaw(model.value));\n    });\n    const {\n      t\n    } = useLocale();\n    const isPristine = computed(() => {\n      return deepEqual(model.value, internalModel.value);\n    });\n\n    function isActionDisabled(action) {\n      if (typeof props.disabled === 'boolean') {\n        return props.disabled;\n      }\n\n      if (Array.isArray(props.disabled)) {\n        return props.disabled.includes(action);\n      }\n\n      return isPristine.value;\n    }\n\n    const isSaveDisabled = computed(() => isActionDisabled('save'));\n    const isCancelDisabled = computed(() => isActionDisabled('cancel'));\n\n    function save() {\n      model.value = internalModel.value;\n      emit('save', internalModel.value);\n    }\n\n    function cancel() {\n      internalModel.value = structuredClone(toRaw(model.value));\n      emit('cancel');\n    }\n\n    function actions(actionsProps) {\n      return _createVNode(_Fragment, null, [_createVNode(VBtn, _mergeProps({\n        \"disabled\": isCancelDisabled.value,\n        \"variant\": \"text\",\n        \"color\": props.color,\n        \"onClick\": cancel,\n        \"text\": t(props.cancelText)\n      }, actionsProps), null), _createVNode(VBtn, _mergeProps({\n        \"disabled\": isSaveDisabled.value,\n        \"variant\": \"text\",\n        \"color\": props.color,\n        \"onClick\": save,\n        \"text\": t(props.okText)\n      }, actionsProps), null)]);\n    }\n\n    let actionsUsed = false;\n    useRender(() => {\n      return _createVNode(_Fragment, null, [slots.default?.({\n        model: internalModel,\n        save,\n        cancel,\n        isPristine: isPristine.value,\n\n        get actions() {\n          actionsUsed = true;\n          return actions;\n        }\n\n      }), !props.hideActions && !actionsUsed && actions()]);\n    });\n    return {\n      save,\n      cancel,\n      isPristine\n    };\n  }\n\n});","map":{"version":3,"mappings":";;qGAAA;;AAAA,SACSA,IADT,QACa,kBADb,C,CAGA;;AAAA,SACSC,SADT,QACkB,4BADlB;AACkB,SACTC,eADS,QACM,mCADN,C,CAGlB;;AACA,SAASC,QAAT,EAAmBC,GAAnB,EAAwBC,KAAxB,EAA+BC,WAA/B,QAAkD,KAAlD;AAAuD,SAC9CC,SAD8C,EACnCC,gBADmC,EACjBC,YADiB,EACHC,SADG,QACM,qBADN,C,CAGvD;;AAcA,OAAO,MAAMC,qBAAqB,GAAGF,YAAY,CAAC;AAChDG,YAAU,EAAE,IADoC;AAEhDC,OAAK,EAAEC,MAFyC;AAGhDC,YAAU,EAAE;AACVC,QAAI,EAAEF,MADI;AAEVG,WAAO,EAAE;AAFC,GAHoC;AAOhDC,QAAM,EAAE;AACNF,QAAI,EAAEF,MADA;AAENG,WAAO,EAAE;AAFH,GAPwC;AAWhDE,UAAQ,EAAE;AACRH,QAAI,EAAE,CAACI,OAAD,EAAUC,KAAV,CADE;AAERJ,WAAO,EAAEK;AAFD,GAXsC;AAehDC,aAAW,EAAEH;AAfmC,CAAD,EAgB9C,cAhB8C,CAA1C;AAkBP,OAAO,MAAMI,YAAY,GAAGhB,gBAAgB,GAOK;AAC/CiB,MAAI,EAAE,cADyC;AAG/CC,OAAK,EAAEf,qBAAqB,EAHmB;AAK/CgB,OAAK,EAAE;AACLC,UAAM,EAAEA,MAAM,IADT;AAELC,QAAI,EAAGC,KAAU,IAAK,IAFjB;AAGL,yBAAsBA,KAAU,IAAK;AAHhC,GALwC;;AAW/CC,OAAKA,CAAEL,KAAFK,EAAOC,IAAPD,EAA0B;AAAA,QAAjB;AAAEE,UAAF;AAAQC;AAAR,QAAeF,IAAE;AAC7B,UAAMG,KAAK,GAAGjC,eAAe,CAACwB,KAAD,EAAQ,YAAR,CAA7B;AACA,UAAMU,aAAa,GAAGhC,GAAG,EAAzB;AACAE,eAAW,CAAC,MAAM;AAChB8B,mBAAa,CAACN,KAAdM,GAAsBC,eAAe,CAAChC,KAAK,CAAC8B,KAAK,CAACL,KAAP,CAAN,CAArCM;AACD,KAFU,CAAX9B;AAIA,UAAM;AAAEgC;AAAF,QAAQrC,SAAS,EAAvB;AAEA,UAAMsC,UAAU,GAAGpC,QAAQ,CAAC,MAAM;AAChC,aAAOI,SAAS,CAAC4B,KAAK,CAACL,KAAP,EAAcM,aAAa,CAACN,KAA5B,CAAhB;AACD,KAF0B,CAA3B;;AAIA,aAASU,gBAAT,CAA2BC,MAA3B,EAAsD;AACpD,UAAI,OAAOf,KAAK,CAACP,QAAb,KAA0B,SAA9B,EAAyC;AACvC,eAAOO,KAAK,CAACP,QAAb;AACF;;AAEA,UAAIE,KAAK,CAACqB,OAANrB,CAAcK,KAAK,CAACP,QAApBE,CAAJ,EAAmC;AACjC,eAAOK,KAAK,CAACP,QAANO,CAAeiB,QAAfjB,CAAwBe,MAAxBf,CAAP;AACF;;AAEA,aAAOa,UAAU,CAACT,KAAlB;AACF;;AAEA,UAAMc,cAAc,GAAGzC,QAAQ,CAAC,MAAMqC,gBAAgB,CAAC,MAAD,CAAvB,CAA/B;AACA,UAAMK,gBAAgB,GAAG1C,QAAQ,CAAC,MAAMqC,gBAAgB,CAAC,QAAD,CAAvB,CAAjC;;AAEA,aAASX,IAAT,GAAiB;AACfM,WAAK,CAACL,KAANK,GAAcC,aAAa,CAACN,KAA5BK;AACAF,UAAI,CAAC,MAAD,EAASG,aAAa,CAACN,KAAvB,CAAJG;AACF;;AAEA,aAASL,MAAT,GAAmB;AACjBQ,mBAAa,CAACN,KAAdM,GAAsBC,eAAe,CAAChC,KAAK,CAAC8B,KAAK,CAACL,KAAP,CAAN,CAArCM;AACAH,UAAI,CAAC,QAAD,CAAJA;AACF;;AAEA,aAASa,OAAT,CAAkBC,YAAlB,EAAqC;AACnC;AAAA,oBAGiBF,gBAAgB,CAACf,KAHlC;AAGuC,yBAHvC;AAGuC,iBAEzBJ,KAAK,CAACb,KALpB;AAKyB,mBACTe,MANhB;AAMsB,gBACTU,CAAC,CAACZ,KAAK,CAACX,UAAP;AAPd,SAQWgC,YARX,GAQuB,IARvB,GAQuBC;AAAA,oBAINJ,cAAc,CAACd,KAJT;AAIc,yBAJd;AAIc,iBAEvBJ,KAAK,CAACb,KANG;AAME,mBACTgB,IAPO;AAOH,gBACPS,CAAC,CAACZ,KAAK,CAACR,MAAP;AARS,SASZ6B,YATY,GASA,IATA,CARvB;AAqBF;;AAEA,QAAIE,WAAW,GAAG,KAAlB;AACAvC,aAAS,CAAC,MAAM;AACd,4CAGMwB,KAAK,CAACjB,OAANiB,GAAgB;AACdC,aAAK,EAAEC,aADO;AAEdP,YAFc;AAGdD,cAHc;AAIdW,kBAAU,EAAEA,UAAU,CAACT,KAJT;;AAKd,YAAIgB,OAAJ,GAAe;AACbG,qBAAW,GAAG,IAAdA;AACA,iBAAOH,OAAP;AACF;;AARc,OAAhBZ,CAHN,EAeM,CAACR,KAAK,CAACH,WAAP,IAAsB,CAAC0B,WAAvB,IAAsCH,OAAO,EAfnD;AAkBD,KAnBQ,CAATpC;AAqBA,WAAO;AACLmB,UADK;AAELD,YAFK;AAGLW;AAHK,KAAP;AAKF;;AApG+C,CAPL,CAArC","names":["VBtn","useLocale","useProxiedModel","computed","ref","toRaw","watchEffect","deepEqual","genericComponent","propsFactory","useRender","makeVConfirmEditProps","modelValue","color","String","cancelText","type","default","okText","disabled","Boolean","Array","undefined","hideActions","VConfirmEdit","name","props","emits","cancel","save","value","setup","_ref","emit","slots","model","internalModel","structuredClone","t","isPristine","isActionDisabled","action","isArray","includes","isSaveDisabled","isCancelDisabled","actions","actionsProps","_createVNode","actionsUsed"],"sources":["../../../src/components/VConfirmEdit/VConfirmEdit.tsx"],"sourcesContent":["// Components\nimport { VBtn } from '@/components/VBtn'\n\n// Composables\nimport { useLocale } from '@/composables'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { computed, ref, toRaw, watchEffect } from 'vue'\nimport { deepEqual, genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType, Ref, VNode } from 'vue'\nimport type { GenericProps } from '@/util'\n\nexport type VConfirmEditSlots<T> = {\n  default: {\n    model: Ref<T>\n    save: () => void\n    cancel: () => void\n    isPristine: boolean\n    get actions (): (props?: {}) => VNode\n  }\n}\n\nexport const makeVConfirmEditProps = propsFactory({\n  modelValue: null,\n  color: String,\n  cancelText: {\n    type: String,\n    default: '$vuetify.confirmEdit.cancel',\n  },\n  okText: {\n    type: String,\n    default: '$vuetify.confirmEdit.ok',\n  },\n  disabled: {\n    type: [Boolean, Array] as PropType<boolean | ('save' | 'cancel')[]>,\n    default: undefined,\n  },\n  hideActions: Boolean,\n}, 'VConfirmEdit')\n\nexport const VConfirmEdit = genericComponent<new <T> (\n  props: {\n    modelValue?: T\n    'onUpdate:modelValue'?: (value: T) => void\n    'onSave'?: (value: T) => void\n  },\n  slots: VConfirmEditSlots<T>\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VConfirmEdit',\n\n  props: makeVConfirmEditProps(),\n\n  emits: {\n    cancel: () => true,\n    save: (value: any) => true,\n    'update:modelValue': (value: any) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const model = useProxiedModel(props, 'modelValue')\n    const internalModel = ref()\n    watchEffect(() => {\n      internalModel.value = structuredClone(toRaw(model.value))\n    })\n\n    const { t } = useLocale()\n\n    const isPristine = computed(() => {\n      return deepEqual(model.value, internalModel.value)\n    })\n\n    function isActionDisabled (action: 'save' | 'cancel') {\n      if (typeof props.disabled === 'boolean') {\n        return props.disabled\n      }\n\n      if (Array.isArray(props.disabled)) {\n        return props.disabled.includes(action)\n      }\n\n      return isPristine.value\n    }\n\n    const isSaveDisabled = computed(() => isActionDisabled('save'))\n    const isCancelDisabled = computed(() => isActionDisabled('cancel'))\n\n    function save () {\n      model.value = internalModel.value\n      emit('save', internalModel.value)\n    }\n\n    function cancel () {\n      internalModel.value = structuredClone(toRaw(model.value))\n      emit('cancel')\n    }\n\n    function actions (actionsProps?: {}) {\n      return (\n        <>\n          <VBtn\n            disabled={ isCancelDisabled.value }\n            variant=\"text\"\n            color={ props.color }\n            onClick={ cancel }\n            text={ t(props.cancelText) }\n            { ...actionsProps }\n          />\n\n          <VBtn\n            disabled={ isSaveDisabled.value }\n            variant=\"text\"\n            color={ props.color }\n            onClick={ save }\n            text={ t(props.okText) }\n            { ...actionsProps }\n          />\n        </>\n      )\n    }\n\n    let actionsUsed = false\n    useRender(() => {\n      return (\n        <>\n          {\n            slots.default?.({\n              model: internalModel,\n              save,\n              cancel,\n              isPristine: isPristine.value,\n              get actions () {\n                actionsUsed = true\n                return actions\n              },\n            })\n          }\n\n          { !props.hideActions && !actionsUsed && actions() }\n        </>\n      )\n    })\n\n    return {\n      save,\n      cancel,\n      isPristine,\n    }\n  },\n})\n\nexport type VConfirmEdit = InstanceType<typeof VConfirmEdit>\n"]},"metadata":{},"sourceType":"module"}