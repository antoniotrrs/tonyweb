{"ast":null,"code":"import _asyncToGenerator from \"/Users/antoniotorres/Documents/tony/tonyweb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\"; // Styles\n\nimport \"./VDatePickerYears.css\"; // Components\n\nimport { VBtn } from \"../VBtn/index.js\"; // Composables\n\nimport { useDate } from \"../../composables/date/index.js\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.js\"; // Utilities\n\nimport { computed, nextTick, onMounted, watchEffect } from 'vue';\nimport { convertToUnit, createRange, genericComponent, propsFactory, templateRef, useRender } from \"../../util/index.js\"; // Types\n// Types\n\nexport var makeVDatePickerYearsProps = propsFactory({\n  color: String,\n  height: [String, Number],\n  min: null,\n  max: null,\n  modelValue: Number\n}, 'VDatePickerYears');\nexport var VDatePickerYears = genericComponent()({\n  name: 'VDatePickerYears',\n  props: makeVDatePickerYearsProps(),\n  emits: {\n    'update:modelValue': function updateModelValue(year) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n        slots = _ref.slots;\n    var adapter = useDate();\n    var model = useProxiedModel(props, 'modelValue');\n    var years = computed(function () {\n      var year = adapter.getYear(adapter.date());\n      var min = year - 100;\n      var max = year + 52;\n\n      if (props.min) {\n        min = adapter.getYear(adapter.date(props.min));\n      }\n\n      if (props.max) {\n        max = adapter.getYear(adapter.date(props.max));\n      }\n\n      var date = adapter.startOfYear(adapter.date());\n      date = adapter.setYear(date, min);\n      return createRange(max - min + 1, min).map(function (i) {\n        var text = adapter.format(date, 'year');\n        date = adapter.setYear(date, adapter.getYear(date) + 1);\n        return {\n          text: text,\n          value: i\n        };\n      });\n    });\n    watchEffect(function () {\n      var _model$value;\n\n      model.value = (_model$value = model.value) !== null && _model$value !== void 0 ? _model$value : adapter.getYear(adapter.date());\n    });\n    var yearRef = templateRef();\n    onMounted( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var _yearRef$el;\n\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return nextTick();\n\n            case 2:\n              (_yearRef$el = yearRef.el) === null || _yearRef$el === void 0 ? void 0 : _yearRef$el.scrollIntoView({\n                block: 'center'\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n    useRender(function () {\n      return _createVNode(\"div\", {\n        \"class\": \"v-date-picker-years\",\n        \"style\": {\n          height: convertToUnit(props.height)\n        }\n      }, [_createVNode(\"div\", {\n        \"class\": \"v-date-picker-years__content\"\n      }, [years.value.map(function (year, i) {\n        var _slots$year, _slots$year2;\n\n        var btnProps = {\n          ref: model.value === year.value ? yearRef : undefined,\n          active: model.value === year.value,\n          color: model.value === year.value ? props.color : undefined,\n          rounded: true,\n          text: year.text,\n          variant: model.value === year.value ? 'flat' : 'text',\n          onClick: function onClick() {\n            if (model.value === year.value) {\n              emit('update:modelValue', model.value);\n              return;\n            }\n\n            model.value = year.value;\n          }\n        };\n        return (_slots$year = (_slots$year2 = slots.year) === null || _slots$year2 === void 0 ? void 0 : _slots$year2.call(slots, {\n          year: year,\n          i: i,\n          props: btnProps\n        })) !== null && _slots$year !== void 0 ? _slots$year : _createVNode(VBtn, _mergeProps({\n          \"key\": \"month\"\n        }, btnProps), null);\n      })])]);\n    });\n    return {};\n  }\n});","map":{"version":3,"mappings":";;;;8EAAA;;AACA,gC,CAEA;;AAAA,SACSA,IADT,QACa,kBADb,C,CAGA;;AAAA,SACSC,OADT,QACgB,iCADhB;AACgB,SACPC,eADO,QACQ,mCADR,C,CAGhB;;AACA,SAASC,QAAT,EAAmBC,QAAnB,EAA6BC,SAA7B,EAAwCC,WAAxC,QAA2D,KAA3D;AAAgE,SACvDC,aADuD,EACxCC,WADwC,EAC3BC,gBAD2B,EACTC,YADS,EACKC,WADL,EACkBC,SADlB,QAC2B,qBAD3B,C,CAGhE;AAGA;;AAmBA,OAAO,IAAMC,yBAAyB,GAAGH,YAAY,CAAC;AACpDI,OAAK,EAAEC,MAD6C;AAEpDC,QAAM,EAAE,CAACD,MAAD,EAASE,MAAT,CAF4C;AAGpDC,KAAG,EAAE,IAH+C;AAIpDC,KAAG,EAAE,IAJ+C;AAKpDC,YAAU,EAAEH;AALwC,CAAD,EAMlD,kBANkD,CAA9C;AAQP,OAAO,IAAMI,gBAAgB,GAAGZ,gBAAgB,GAA0B;AACxEa,MAAI,EAAE,kBADkE;AAGxEC,OAAK,EAAEV,yBAAyB,EAHwC;AAKxEW,OAAK,EAAE;AACL,yBAAsBC,8BAAY;AAAA,aAAK,IAAL;AAAA;AAD7B,GALiE;AASxEC,OATwE,iBASjEH,KATiE,EAS5DI,IAT4D,EASzC;AAAA,QAAfC,IAAe,GAAFD,IAAE,CAAfC,IAAe;AAAA,QAATC,KAAS,GAAFF,IAAE,CAATE,KAAS;AAC7B,QAAMC,OAAO,GAAG7B,OAAO,EAAvB;AACA,QAAM8B,KAAK,GAAG7B,eAAe,CAACqB,KAAD,EAAQ,YAAR,CAA7B;AACA,QAAMS,KAAK,GAAG7B,QAAQ,CAAC,YAAM;AAC3B,UAAMsB,IAAI,GAAGK,OAAO,CAACG,OAARH,CAAgBA,OAAO,CAACI,IAARJ,EAAhBA,CAAb;AAEA,UAAIZ,GAAG,GAAGO,IAAI,GAAG,GAAjB;AACA,UAAIN,GAAG,GAAGM,IAAI,GAAG,EAAjB;;AAEA,UAAIF,KAAK,CAACL,GAAV,EAAe;AACbA,WAAG,GAAGY,OAAO,CAACG,OAARH,CAAgBA,OAAO,CAACI,IAARJ,CAAaP,KAAK,CAACL,GAAnBY,CAAhBA,CAANZ;AACF;;AAEA,UAAIK,KAAK,CAACJ,GAAV,EAAe;AACbA,WAAG,GAAGW,OAAO,CAACG,OAARH,CAAgBA,OAAO,CAACI,IAARJ,CAAaP,KAAK,CAACJ,GAAnBW,CAAhBA,CAANX;AACF;;AAEA,UAAIe,IAAI,GAAGJ,OAAO,CAACK,WAARL,CAAoBA,OAAO,CAACI,IAARJ,EAApBA,CAAX;AAEAI,UAAI,GAAGJ,OAAO,CAACM,OAARN,CAAgBI,IAAhBJ,EAAsBZ,GAAtBY,CAAPI;AAEA,aAAO1B,WAAW,CAACW,GAAG,GAAGD,GAANC,GAAY,CAAb,EAAgBD,GAAhB,CAAXV,CAAgC6B,GAAhC7B,CAAoC8B,WAAC,EAAI;AAC9C,YAAMC,IAAI,GAAGT,OAAO,CAACU,MAARV,CAAeI,IAAfJ,EAAqB,MAArBA,CAAb;AACAI,YAAI,GAAGJ,OAAO,CAACM,OAARN,CAAgBI,IAAhBJ,EAAsBA,OAAO,CAACG,OAARH,CAAgBI,IAAhBJ,IAAwB,CAA9CA,CAAPI;AAEA,eAAO;AACLK,cAAI,EAAJA,IADK;AAELE,eAAK,EAAEH;AAFF,SAAP;AAID,OARM9B,CAAP;AASD,KA3BqB,CAAtB;AA6BAF,eAAW,CAAC,YAAM;AAAA;;AAChByB,WAAK,CAACU,KAANV,mBAAcA,KAAK,CAACU,KAApBV,uDAA6BD,OAAO,CAACG,OAARH,CAAgBA,OAAO,CAACI,IAARJ,EAAhBA,CAA7BC;AACD,KAFU,CAAXzB;AAIA,QAAMoC,OAAO,GAAG/B,WAAW,EAA3B;AAEAN,aAAS,uEAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACFD,QAAQ,EADN;;AAAA;AAERsC,oCAAO,CAACC,EAARD,4DAAYE,cAAZF,CAA2B;AAAEG,qBAAK,EAAE;AAAT,eAA3BH;;AAFQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAATrC;AAKAO,aAAS,CAAC;AAAA;AAAA;AAAA,iBAGC;AACLI,gBAAM,EAAET,aAAa,CAACgB,KAAK,CAACP,MAAP;AADhB;AAHD,SAKL;AAAA;AAAA,UAGGgB,KAAK,CAACS,KAANT,CAAYK,GAAZL,CAAgB,UAACP,IAAD,EAAOa,CAAP,EAAa;AAAA;;AAC7B,YAAMQ,QAAQ,GAAG;AACfC,aAAG,EAAEhB,KAAK,CAACU,KAANV,KAAgBN,IAAI,CAACgB,KAArBV,GAA6BW,OAA7BX,GAAuCiB,SAD7B;AAEfC,gBAAM,EAAElB,KAAK,CAACU,KAANV,KAAgBN,IAAI,CAACgB,KAFd;AAGf3B,eAAK,EAAEiB,KAAK,CAACU,KAANV,KAAgBN,IAAI,CAACgB,KAArBV,GAA6BR,KAAK,CAACT,KAAnCiB,GAA2CiB,SAHnC;AAIfE,iBAAO,EAAE,IAJM;AAKfX,cAAI,EAAEd,IAAI,CAACc,IALI;AAMfY,iBAAO,EAAEpB,KAAK,CAACU,KAANV,KAAgBN,IAAI,CAACgB,KAArBV,GAA6B,MAA7BA,GAAsC,MANhC;AAOfqB,iBAAO,EAAEA,mBAAM;AACb,gBAAIrB,KAAK,CAACU,KAANV,KAAgBN,IAAI,CAACgB,KAAzB,EAAgC;AAC9Bb,kBAAI,CAAC,mBAAD,EAAsBG,KAAK,CAACU,KAA5B,CAAJb;AACA;AACF;;AACAG,iBAAK,CAACU,KAANV,GAAcN,IAAI,CAACgB,KAAnBV;AACF;AAbe,SAAjB;AAgBA,8CAAOF,KAAK,CAACJ,IAAb,iDAAOI,uBAAK,EAAQ;AAClBJ,cAAI,EAAJA,IADkB;AAElBa,WAAC,EAADA,CAFkB;AAGlBf,eAAK,EAAEuB;AAHW,SAAR,CAAZ,qDAIEO;AAAA;AAAA,WAGOP,QAHP,GAGe,IAHf,CAJF;AAUD,OA3BCd,CAHH,GALK;AAAA,KAAD,CAATpB;AAwCA,WAAO,EAAP;AACF;AA7FwE,CAA1B,CAAzC","names":["VBtn","useDate","useProxiedModel","computed","nextTick","onMounted","watchEffect","convertToUnit","createRange","genericComponent","propsFactory","templateRef","useRender","makeVDatePickerYearsProps","color","String","height","Number","min","max","modelValue","VDatePickerYears","name","props","emits","year","setup","_ref","emit","slots","adapter","model","years","getYear","date","startOfYear","setYear","map","i","text","format","value","yearRef","el","scrollIntoView","block","btnProps","ref","undefined","active","rounded","variant","onClick","_createVNode"],"sources":["../../../src/components/VDatePicker/VDatePickerYears.tsx"],"sourcesContent":["// Styles\nimport './VDatePickerYears.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\n\n// Composables\nimport { useDate } from '@/composables/date'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { computed, nextTick, onMounted, watchEffect } from 'vue'\nimport { convertToUnit, createRange, genericComponent, propsFactory, templateRef, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\n\n// Types\nexport type VDatePickerYearsSlots = {\n  year: {\n    year: {\n      text: string\n      value: number\n    }\n    i: number\n    props: {\n      active: boolean\n      color?: string\n      rounded: boolean\n      text: string\n      variant: 'flat' | 'text'\n      onClick: () => void\n    }\n  }\n}\n\nexport const makeVDatePickerYearsProps = propsFactory({\n  color: String,\n  height: [String, Number],\n  min: null as any as PropType<unknown>,\n  max: null as any as PropType<unknown>,\n  modelValue: Number,\n}, 'VDatePickerYears')\n\nexport const VDatePickerYears = genericComponent<VDatePickerYearsSlots>()({\n  name: 'VDatePickerYears',\n\n  props: makeVDatePickerYearsProps(),\n\n  emits: {\n    'update:modelValue': (year: number) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const adapter = useDate()\n    const model = useProxiedModel(props, 'modelValue')\n    const years = computed(() => {\n      const year = adapter.getYear(adapter.date())\n\n      let min = year - 100\n      let max = year + 52\n\n      if (props.min) {\n        min = adapter.getYear(adapter.date(props.min))\n      }\n\n      if (props.max) {\n        max = adapter.getYear(adapter.date(props.max))\n      }\n\n      let date = adapter.startOfYear(adapter.date())\n\n      date = adapter.setYear(date, min)\n\n      return createRange(max - min + 1, min).map(i => {\n        const text = adapter.format(date, 'year')\n        date = adapter.setYear(date, adapter.getYear(date) + 1)\n\n        return {\n          text,\n          value: i,\n        }\n      })\n    })\n\n    watchEffect(() => {\n      model.value = model.value ?? adapter.getYear(adapter.date())\n    })\n\n    const yearRef = templateRef()\n\n    onMounted(async () => {\n      await nextTick()\n      yearRef.el?.scrollIntoView({ block: 'center' })\n    })\n\n    useRender(() => (\n      <div\n        class=\"v-date-picker-years\"\n        style={{\n          height: convertToUnit(props.height),\n        }}\n      >\n        <div class=\"v-date-picker-years__content\">\n          { years.value.map((year, i) => {\n            const btnProps = {\n              ref: model.value === year.value ? yearRef : undefined,\n              active: model.value === year.value,\n              color: model.value === year.value ? props.color : undefined,\n              rounded: true,\n              text: year.text,\n              variant: model.value === year.value ? 'flat' : 'text',\n              onClick: () => {\n                if (model.value === year.value) {\n                  emit('update:modelValue', model.value)\n                  return\n                }\n                model.value = year.value\n              },\n            } as const\n\n            return slots.year?.({\n              year,\n              i,\n              props: btnProps,\n            }) ?? (\n              <VBtn\n                key=\"month\"\n                { ...btnProps }\n              />\n            )\n          })}\n        </div>\n      </div>\n    ))\n\n    return {}\n  },\n})\n\nexport type VDatePickerYears = InstanceType<typeof VDatePickerYears>\n"]},"metadata":{},"sourceType":"module"}