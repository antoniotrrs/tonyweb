{"ast":null,"code":"import _objectSpread from \"/Users/antoniotorres/Documents/tony/tony/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.array.concat.js\";\n// Composables\nimport { useProxiedModel } from \"../../composables/proxiedModel.js\"; // Utilities\n\nimport { ref, shallowRef, watch } from 'vue';\nimport { consoleError, consoleWarn, getObjectValueByPath } from \"../../util/index.js\"; // Locales\n\nimport en from \"../en.js\"; // Types\n\nvar LANG_PREFIX = '$vuetify.';\n\nvar replace = function replace(str, params) {\n  return str.replace(/\\{(\\d+)\\}/g, function (match, index) {\n    return String(params[Number(index)]);\n  });\n};\n\nvar createTranslateFunction = function createTranslateFunction(current, fallback, messages) {\n  return function (key) {\n    for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      params[_key - 1] = arguments[_key];\n    }\n\n    if (!key.startsWith(LANG_PREFIX)) {\n      return replace(key, params);\n    }\n\n    var shortKey = key.replace(LANG_PREFIX, '');\n    var currentLocale = current.value && messages.value[current.value];\n    var fallbackLocale = fallback.value && messages.value[fallback.value];\n    var str = getObjectValueByPath(currentLocale, shortKey, null);\n\n    if (!str) {\n      consoleWarn(\"Translation key \\\"\".concat(key, \"\\\" not found in \\\"\").concat(current.value, \"\\\", trying fallback locale\"));\n      str = getObjectValueByPath(fallbackLocale, shortKey, null);\n    }\n\n    if (!str) {\n      consoleError(\"Translation key \\\"\".concat(key, \"\\\" not found in fallback\"));\n      str = key;\n    }\n\n    if (typeof str !== 'string') {\n      consoleError(\"Translation key \\\"\".concat(key, \"\\\" has a non-string value\"));\n      str = key;\n    }\n\n    return replace(str, params);\n  };\n};\n\nfunction createNumberFunction(current, fallback) {\n  return function (value, options) {\n    var numberFormat = new Intl.NumberFormat([current.value, fallback.value], options);\n    return numberFormat.format(value);\n  };\n}\n\nfunction useProvided(props, prop, provided) {\n  var _props$prop, _props$prop2;\n\n  var internal = useProxiedModel(props, prop, (_props$prop = props[prop]) !== null && _props$prop !== void 0 ? _props$prop : provided.value); // TODO: Remove when defaultValue works\n\n  internal.value = (_props$prop2 = props[prop]) !== null && _props$prop2 !== void 0 ? _props$prop2 : provided.value;\n  watch(provided, function (v) {\n    if (props[prop] == null) {\n      internal.value = provided.value;\n    }\n  });\n  return internal;\n}\n\nfunction createProvideFunction(state) {\n  return function (props) {\n    var current = useProvided(props, 'locale', state.current);\n    var fallback = useProvided(props, 'fallback', state.fallback);\n    var messages = useProvided(props, 'messages', state.messages);\n    return {\n      name: 'vuetify',\n      current: current,\n      fallback: fallback,\n      messages: messages,\n      t: createTranslateFunction(current, fallback, messages),\n      n: createNumberFunction(current, fallback),\n      provide: createProvideFunction({\n        current: current,\n        fallback: fallback,\n        messages: messages\n      })\n    };\n  };\n}\n\nexport function createVuetifyAdapter(options) {\n  var _options$locale, _options$fallback;\n\n  var current = shallowRef((_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : 'en');\n  var fallback = shallowRef((_options$fallback = options === null || options === void 0 ? void 0 : options.fallback) !== null && _options$fallback !== void 0 ? _options$fallback : 'en');\n  var messages = ref(_objectSpread({\n    en: en\n  }, options === null || options === void 0 ? void 0 : options.messages));\n  return {\n    name: 'vuetify',\n    current: current,\n    fallback: fallback,\n    messages: messages,\n    t: createTranslateFunction(current, fallback, messages),\n    n: createNumberFunction(current, fallback),\n    provide: createProvideFunction({\n      current: current,\n      fallback: fallback,\n      messages: messages\n    })\n  };\n}","map":{"version":3,"mappings":"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","names":["useProxiedModel","ref","shallowRef","watch","consoleError","consoleWarn","getObjectValueByPath","en","LANG_PREFIX","replace","str","params","match","index","String","Number","createTranslateFunction","current","fallback","messages","key","_key","arguments","startsWith","shortKey","currentLocale","value","fallbackLocale","createNumberFunction","options","numberFormat","Intl","NumberFormat","format","useProvided","props","prop","provided","internal","v","createProvideFunction","state","name","t","n","provide","createVuetifyAdapter","locale"],"sources":["../../../src/locale/adapters/vuetify.ts"],"sourcesContent":["// Composables\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { ref, shallowRef, watch } from 'vue'\nimport { consoleError, consoleWarn, getObjectValueByPath } from '@/util'\n\n// Locales\nimport en from '@/locale/en'\n\n// Types\nimport type { Ref } from 'vue'\nimport type { LocaleInstance, LocaleMessages, LocaleOptions } from '@/composables/locale'\n\nconst LANG_PREFIX = '$vuetify.'\n\nconst replace = (str: string, params: unknown[]) => {\n  return str.replace(/\\{(\\d+)\\}/g, (match: string, index: string) => {\n    return String(params[Number(index)])\n  })\n}\n\nconst createTranslateFunction = (\n  current: Ref<string>,\n  fallback: Ref<string>,\n  messages: Ref<LocaleMessages>,\n) => {\n  return (key: string, ...params: unknown[]) => {\n    if (!key.startsWith(LANG_PREFIX)) {\n      return replace(key, params)\n    }\n\n    const shortKey = key.replace(LANG_PREFIX, '')\n    const currentLocale = current.value && messages.value[current.value]\n    const fallbackLocale = fallback.value && messages.value[fallback.value]\n\n    let str: string = getObjectValueByPath(currentLocale, shortKey, null)\n\n    if (!str) {\n      consoleWarn(`Translation key \"${key}\" not found in \"${current.value}\", trying fallback locale`)\n      str = getObjectValueByPath(fallbackLocale, shortKey, null)\n    }\n\n    if (!str) {\n      consoleError(`Translation key \"${key}\" not found in fallback`)\n      str = key\n    }\n\n    if (typeof str !== 'string') {\n      consoleError(`Translation key \"${key}\" has a non-string value`)\n      str = key\n    }\n\n    return replace(str, params)\n  }\n}\n\nfunction createNumberFunction (current: Ref<string>, fallback: Ref<string>) {\n  return (value: number, options?: Intl.NumberFormatOptions) => {\n    const numberFormat = new Intl.NumberFormat([current.value, fallback.value], options)\n\n    return numberFormat.format(value)\n  }\n}\n\nfunction useProvided <T> (props: any, prop: string, provided: Ref<T>) {\n  const internal = useProxiedModel(props, prop, props[prop] ?? provided.value)\n\n  // TODO: Remove when defaultValue works\n  internal.value = props[prop] ?? provided.value\n\n  watch(provided, v => {\n    if (props[prop] == null) {\n      internal.value = provided.value\n    }\n  })\n\n  return internal as Ref<T>\n}\n\nfunction createProvideFunction (state: { current: Ref<string>, fallback: Ref<string>, messages: Ref<LocaleMessages> }) {\n  return (props: LocaleOptions): LocaleInstance => {\n    const current = useProvided(props, 'locale', state.current)\n    const fallback = useProvided(props, 'fallback', state.fallback)\n    const messages = useProvided(props, 'messages', state.messages)\n\n    return {\n      name: 'vuetify',\n      current,\n      fallback,\n      messages,\n      t: createTranslateFunction(current, fallback, messages),\n      n: createNumberFunction(current, fallback),\n      provide: createProvideFunction({ current, fallback, messages }),\n    }\n  }\n}\n\nexport function createVuetifyAdapter (options?: LocaleOptions): LocaleInstance {\n  const current = shallowRef(options?.locale ?? 'en')\n  const fallback = shallowRef(options?.fallback ?? 'en')\n  const messages = ref({ en, ...options?.messages })\n\n  return {\n    name: 'vuetify',\n    current,\n    fallback,\n    messages,\n    t: createTranslateFunction(current, fallback, messages),\n    n: createNumberFunction(current, fallback),\n    provide: createProvideFunction({ current, fallback, messages }),\n  }\n}\n"]},"metadata":{},"sourceType":"module"}