{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\n// Utilities\nimport { computed, watch } from 'vue';\nimport { deepEqual, getCurrentInstance } from \"../../../util/index.js\"; // Types\n\nexport function useOptions(_ref) {\n  var page = _ref.page,\n      itemsPerPage = _ref.itemsPerPage,\n      sortBy = _ref.sortBy,\n      groupBy = _ref.groupBy,\n      search = _ref.search;\n  var vm = getCurrentInstance('VDataTable');\n  var options = computed(function () {\n    return {\n      page: page.value,\n      itemsPerPage: itemsPerPage.value,\n      sortBy: sortBy.value,\n      groupBy: groupBy.value,\n      search: search.value\n    };\n  });\n  var oldOptions = null;\n  watch(options, function () {\n    if (deepEqual(oldOptions, options.value)) return; // Reset page when searching\n\n    if (oldOptions && oldOptions.search !== options.value.search) {\n      page.value = 1;\n    }\n\n    vm.emit('update:options', options.value);\n    oldOptions = options.value;\n  }, {\n    deep: true,\n    immediate: true\n  });\n}","map":{"version":3,"mappings":";;AAAA;AACA,SAASA,QAAT,EAAmBC,KAAnB,QAAgC,KAAhC;AAAqC,SAC5BC,SAD4B,EACjBC,kBADiB,QACC,wBADD,C,CAGrC;;AAIA,OAAO,SAASC,UAAT,CAAmBC,IAAnB,EAYJ;AAAA,MAXDC,IAWC,GAAFD,IAAE,CAXDC,IAWC;AAAA,MAVDC,YAUC,GAAFF,IAAE,CAVDE,YAUC;AAAA,MATDC,MASC,GAAFH,IAAE,CATDG,MASC;AAAA,MARDC,OAQC,GAAFJ,IAAE,CARDI,OAQC;AAAA,MAPDC,MAOC,GAAFL,IAAE,CAPDK,MAOC;AACD,MAAMC,EAAE,GAAGR,kBAAkB,CAAC,YAAD,CAA7B;AAEA,MAAMS,OAAO,GAAGZ,QAAQ,CAAC;AAAA,WAAO;AAC9BM,UAAI,EAAEA,IAAI,CAACO,KADmB;AAE9BN,kBAAY,EAAEA,YAAY,CAACM,KAFG;AAG9BL,YAAM,EAAEA,MAAM,CAACK,KAHe;AAI9BJ,aAAO,EAAEA,OAAO,CAACI,KAJa;AAK9BH,YAAM,EAAEA,MAAM,CAACG;AALe,KAAP;AAAA,GAAD,CAAxB;AAQA,MAAIC,UAAuC,GAAG,IAA9C;AACAb,OAAK,CAACW,OAAD,EAAU,YAAM;AACnB,QAAIV,SAAS,CAACY,UAAD,EAAaF,OAAO,CAACC,KAArB,CAAb,EAA0C,OADvB,CAGnB;;AACA,QAAIC,UAAU,IAAIA,UAAU,CAACJ,MAAXI,KAAsBF,OAAO,CAACC,KAARD,CAAcF,MAAtD,EAA8D;AAC5DJ,UAAI,CAACO,KAALP,GAAa,CAAbA;AACF;;AAEAK,MAAE,CAACI,IAAHJ,CAAQ,gBAARA,EAA0BC,OAAO,CAACC,KAAlCF;AACAG,cAAU,GAAGF,OAAO,CAACC,KAArBC;AACD,GAVI,EAUF;AAAEE,QAAI,EAAE,IAAR;AAAcC,aAAS,EAAE;AAAzB,GAVE,CAALhB;AAWF","names":["computed","watch","deepEqual","getCurrentInstance","useOptions","_ref","page","itemsPerPage","sortBy","groupBy","search","vm","options","value","oldOptions","emit","deep","immediate"],"sources":["../../../../src/components/VDataTable/composables/options.ts"],"sourcesContent":["// Utilities\nimport { computed, watch } from 'vue'\nimport { deepEqual, getCurrentInstance } from '@/util'\n\n// Types\nimport type { Ref } from 'vue'\nimport type { SortItem } from './sort'\n\nexport function useOptions ({\n  page,\n  itemsPerPage,\n  sortBy,\n  groupBy,\n  search,\n}: {\n  page: Ref<number>\n  itemsPerPage: Ref<number>\n  sortBy: Ref<readonly SortItem[]>\n  groupBy: Ref<readonly SortItem[]>\n  search: Ref<string | undefined>\n}) {\n  const vm = getCurrentInstance('VDataTable')\n\n  const options = computed(() => ({\n    page: page.value,\n    itemsPerPage: itemsPerPage.value,\n    sortBy: sortBy.value,\n    groupBy: groupBy.value,\n    search: search.value,\n  }))\n\n  let oldOptions: typeof options.value | null = null\n  watch(options, () => {\n    if (deepEqual(oldOptions, options.value)) return\n\n    // Reset page when searching\n    if (oldOptions && oldOptions.search !== options.value.search) {\n      page.value = 1\n    }\n\n    vm.emit('update:options', options.value)\n    oldOptions = options.value\n  }, { deep: true, immediate: true })\n}\n"]},"metadata":{},"sourceType":"module"}