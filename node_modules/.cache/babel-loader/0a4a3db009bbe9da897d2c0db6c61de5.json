{"ast":null,"code":"import { Fragment as _Fragment, mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\"; // Styles\n\nimport \"./VCarousel.css\"; // Components\n\nimport { VBtn } from \"../VBtn/index.js\";\nimport { VDefaultsProvider } from \"../VDefaultsProvider/index.js\";\nimport { VProgressLinear } from \"../VProgressLinear/index.js\";\nimport { makeVWindowProps, VWindow } from \"../VWindow/VWindow.js\"; // Composables\n\nimport { IconValue } from \"../../composables/icons.js\";\nimport { useLocale } from \"../../composables/locale.js\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.js\"; // Utilities\n\nimport { onMounted, ref, watch } from 'vue';\nimport { convertToUnit, genericComponent, propsFactory, useRender } from \"../../util/index.js\"; // Types\n\nexport const makeVCarouselProps = propsFactory({\n  color: String,\n  cycle: Boolean,\n  delimiterIcon: {\n    type: IconValue,\n    default: '$delimiter'\n  },\n  height: {\n    type: [Number, String],\n    default: 500\n  },\n  hideDelimiters: Boolean,\n  hideDelimiterBackground: Boolean,\n  interval: {\n    type: [Number, String],\n    default: 6000,\n    validator: value => Number(value) > 0\n  },\n  progress: [Boolean, String],\n  verticalDelimiters: [Boolean, String],\n  ...makeVWindowProps({\n    continuous: true,\n    mandatory: 'force',\n    showArrows: true\n  })\n}, 'VCarousel');\nexport const VCarousel = genericComponent()({\n  name: 'VCarousel',\n  props: makeVCarouselProps(),\n  emits: {\n    'update:modelValue': value => true\n  },\n\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const model = useProxiedModel(props, 'modelValue');\n    const {\n      t\n    } = useLocale();\n    const windowRef = ref();\n    let slideTimeout = -1;\n    watch(model, restartTimeout);\n    watch(() => props.interval, restartTimeout);\n    watch(() => props.cycle, val => {\n      if (val) restartTimeout();else window.clearTimeout(slideTimeout);\n    });\n    onMounted(startTimeout);\n\n    function startTimeout() {\n      if (!props.cycle || !windowRef.value) return;\n      slideTimeout = window.setTimeout(windowRef.value.group.next, Number(props.interval) > 0 ? Number(props.interval) : 6000);\n    }\n\n    function restartTimeout() {\n      window.clearTimeout(slideTimeout);\n      window.requestAnimationFrame(startTimeout);\n    }\n\n    useRender(() => {\n      const windowProps = VWindow.filterProps(props);\n      return _createVNode(VWindow, _mergeProps({\n        \"ref\": windowRef\n      }, windowProps, {\n        \"modelValue\": model.value,\n        \"onUpdate:modelValue\": $event => model.value = $event,\n        \"class\": ['v-carousel', {\n          'v-carousel--hide-delimiter-background': props.hideDelimiterBackground,\n          'v-carousel--vertical-delimiters': props.verticalDelimiters\n        }, props.class],\n        \"style\": [{\n          height: convertToUnit(props.height)\n        }, props.style]\n      }), {\n        default: slots.default,\n        additional: _ref2 => {\n          let {\n            group\n          } = _ref2;\n          return _createVNode(_Fragment, null, [!props.hideDelimiters && _createVNode(\"div\", {\n            \"class\": \"v-carousel__controls\",\n            \"style\": {\n              left: props.verticalDelimiters === 'left' && props.verticalDelimiters ? 0 : 'auto',\n              right: props.verticalDelimiters === 'right' ? 0 : 'auto'\n            }\n          }, [group.items.value.length > 0 && _createVNode(VDefaultsProvider, {\n            \"defaults\": {\n              VBtn: {\n                color: props.color,\n                icon: props.delimiterIcon,\n                size: 'x-small',\n                variant: 'text'\n              }\n            },\n            \"scoped\": true\n          }, {\n            default: () => [group.items.value.map((item, index) => {\n              const props = {\n                id: `carousel-item-${item.id}`,\n                'aria-label': t('$vuetify.carousel.ariaLabel.delimiter', index + 1, group.items.value.length),\n                class: ['v-carousel__controls__item', group.isSelected(item.id) && 'v-btn--active'],\n                onClick: () => group.select(item.id, true)\n              };\n              return slots.item ? slots.item({\n                props,\n                item\n              }) : _createVNode(VBtn, _mergeProps(item, props), null);\n            })]\n          })]), props.progress && _createVNode(VProgressLinear, {\n            \"class\": \"v-carousel__progress\",\n            \"color\": typeof props.progress === 'string' ? props.progress : undefined,\n            \"modelValue\": (group.getItemIndex(model.value) + 1) / group.items.value.length * 100\n          }, null)]);\n        },\n        prev: slots.prev,\n        next: slots.next\n      });\n    });\n    return {};\n  }\n\n});","map":{"version":3,"mappings":"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","names":["VBtn","VDefaultsProvider","VProgressLinear","makeVWindowProps","VWindow","IconValue","useLocale","useProxiedModel","onMounted","ref","watch","convertToUnit","genericComponent","propsFactory","useRender","makeVCarouselProps","color","String","cycle","Boolean","delimiterIcon","type","default","height","Number","hideDelimiters","hideDelimiterBackground","interval","validator","value","progress","verticalDelimiters","continuous","mandatory","showArrows","VCarousel","name","props","emits","setup","_ref","slots","model","t","windowRef","slideTimeout","restartTimeout","val","window","clearTimeout","startTimeout","setTimeout","group","next","requestAnimationFrame","windowProps","filterProps","$event","class","style","additional","_ref2","_createVNode","left","right","items","length","icon","size","variant","map","item","index","id","isSelected","onClick","select","undefined","getItemIndex","prev"],"sources":["../../../src/components/VCarousel/VCarousel.tsx"],"sourcesContent":["// Styles\nimport './VCarousel.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VProgressLinear } from '@/components/VProgressLinear'\nimport { makeVWindowProps, VWindow } from '@/components/VWindow/VWindow'\n\n// Composables\nimport { IconValue } from '@/composables/icons'\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { onMounted, ref, watch } from 'vue'\nimport { convertToUnit, genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { VWindowSlots } from '@/components/VWindow/VWindow'\nimport type { GroupProvide } from '@/composables/group'\nimport type { GenericProps } from '@/util'\n\nexport const makeVCarouselProps = propsFactory({\n  color: String,\n  cycle: Boolean,\n  delimiterIcon: {\n    type: IconValue,\n    default: '$delimiter',\n  },\n  height: {\n    type: [Number, String],\n    default: 500,\n  },\n  hideDelimiters: Boolean,\n  hideDelimiterBackground: Boolean,\n  interval: {\n    type: [Number, String],\n    default: 6000,\n    validator: (value: string | number) => Number(value) > 0,\n  },\n  progress: [Boolean, String],\n  verticalDelimiters: [Boolean, String] as PropType<boolean | 'left' | 'right'>,\n\n  ...makeVWindowProps({\n    continuous: true,\n    mandatory: 'force' as const,\n    showArrows: true,\n  }),\n}, 'VCarousel')\n\ntype VCarouselSlots = VWindowSlots & {\n  item: {\n    props: Record<string, any>\n    item: {\n      id: string\n      value: unknown\n      disabled: boolean | undefined\n    }\n  }\n}\n\nexport const VCarousel = genericComponent<new <T>(\n  props: {\n    modelValue?: T\n    'onUpdate:modelValue'?: (value: T) => void\n  },\n  slots: VCarouselSlots,\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VCarousel',\n\n  props: makeVCarouselProps(),\n\n  emits: {\n    'update:modelValue': (value: any) => true,\n  },\n\n  setup (props, { slots }) {\n    const model = useProxiedModel(props, 'modelValue')\n    const { t } = useLocale()\n    const windowRef = ref<VWindow>()\n\n    let slideTimeout = -1\n    watch(model, restartTimeout)\n    watch(() => props.interval, restartTimeout)\n    watch(() => props.cycle, val => {\n      if (val) restartTimeout()\n      else window.clearTimeout(slideTimeout)\n    })\n\n    onMounted(startTimeout)\n\n    function startTimeout () {\n      if (!props.cycle || !windowRef.value) return\n\n      slideTimeout = window.setTimeout(\n        windowRef.value.group.next,\n        Number(props.interval) > 0 ? Number(props.interval) : 6000\n      )\n    }\n\n    function restartTimeout () {\n      window.clearTimeout(slideTimeout)\n      window.requestAnimationFrame(startTimeout)\n    }\n\n    useRender(() => {\n      const windowProps = VWindow.filterProps(props)\n\n      return (\n        <VWindow\n          ref={ windowRef }\n          { ...windowProps }\n          v-model={ model.value }\n          class={[\n            'v-carousel',\n            {\n              'v-carousel--hide-delimiter-background': props.hideDelimiterBackground,\n              'v-carousel--vertical-delimiters': props.verticalDelimiters,\n            },\n            props.class,\n          ]}\n          style={[\n            { height: convertToUnit(props.height) },\n            props.style,\n          ]}\n        >\n          {{\n            default: slots.default,\n            additional: ({ group }: { group: GroupProvide }) => (\n              <>\n                { !props.hideDelimiters && (\n                  <div\n                    class=\"v-carousel__controls\"\n                    style={{\n                      left: props.verticalDelimiters === 'left' && props.verticalDelimiters ? 0 : 'auto',\n                      right: props.verticalDelimiters === 'right' ? 0 : 'auto',\n                    }}\n                  >\n                    { group.items.value.length > 0 && (\n                      <VDefaultsProvider\n                        defaults={{\n                          VBtn: {\n                            color: props.color,\n                            icon: props.delimiterIcon,\n                            size: 'x-small',\n                            variant: 'text',\n                          },\n                        }}\n                        scoped\n                      >\n                        { group.items.value.map((item, index) => {\n                          const props = {\n                            id: `carousel-item-${item.id}`,\n                            'aria-label': t('$vuetify.carousel.ariaLabel.delimiter', index + 1, group.items.value.length),\n                            class: [\n                              'v-carousel__controls__item',\n                              group.isSelected(item.id) && 'v-btn--active',\n                            ],\n                            onClick: () => group.select(item.id, true),\n                          }\n\n                          return slots.item\n                            ? slots.item({ props, item })\n                            : (<VBtn { ...item } { ...props } />)\n                        })}\n                      </VDefaultsProvider>\n                    )}\n                  </div>\n                )}\n\n                { props.progress && (\n                  <VProgressLinear\n                    class=\"v-carousel__progress\"\n                    color={ typeof props.progress === 'string' ? props.progress : undefined }\n                    modelValue={ (group.getItemIndex(model.value) + 1) / group.items.value.length * 100 }\n                  />\n                )}\n              </>\n            ),\n            prev: slots.prev,\n            next: slots.next,\n          }}\n        </VWindow>\n      )\n    })\n\n    return {}\n  },\n})\n\nexport type VCarousel = InstanceType<typeof VCarousel>\n"]},"metadata":{},"sourceType":"module"}